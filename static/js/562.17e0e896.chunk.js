"use strict";(self.webpackChunknvision_TMS=self.webpackChunknvision_TMS||[]).push([[562],{50346:(e,t,a)=>{a.d(t,{r:()=>o});var i,l,s,n=a(72791);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},r.apply(this,arguments)}function d(e,t){let{title:a,titleId:d,...o}=e;return n.createElement("svg",r({width:40,height:36,viewBox:"0 0 40 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":d},o),a?n.createElement("title",{id:d},a):null,i||(i=n.createElement("path",{d:"M2.45062 29.9358L2.66712 30.0608L2.45061 29.9358C1.9794 30.752 1.9794 31.7295 2.45061 32.5458C2.92184 33.362 3.76844 33.8508 4.71103 33.8508H35.2889C36.2314 33.8508 37.078 33.362 37.5493 32.5458L37.3328 32.4208L37.5493 32.5458C38.0206 31.7295 38.0206 30.752 37.5494 29.9358L37.5494 29.9358L22.2604 3.45443C21.7892 2.63815 20.9425 2.14942 20.0001 2.14942C19.0576 2.14942 18.2109 2.63815 17.7397 3.45442L2.45062 29.9358ZM39.1459 29.014L39.3624 28.889L39.1459 29.014C39.9514 30.4092 39.9514 32.0722 39.1459 33.4675C38.3402 34.8626 36.9 35.6941 35.2889 35.6941H4.71103C3.09988 35.6941 1.65975 34.8626 0.854178 33.4674C0.0486084 32.0722 0.0486051 30.4092 0.854181 29.0139L16.1431 2.53262C16.9486 1.13748 18.3889 0.305908 20 0.305908C21.6111 0.305908 23.0513 1.13747 23.8568 2.53262L39.1459 29.014Z",fill:"white",stroke:"#38414A",strokeWidth:.5})),l||(l=n.createElement("path",{d:"M19.0781 23.2181V12.0007H20.9216V23.2181H19.0781Z",fill:"white",stroke:"#38414A",strokeWidth:.5})),s||(s=n.createElement("path",{d:"M18.6875 27.3741C18.6875 26.6507 19.2764 26.0618 19.9998 26.0618C20.7233 26.0618 21.3122 26.6507 21.3122 27.3741C21.3122 28.0975 20.7232 28.6864 19.9998 28.6864C19.2764 28.6864 18.6875 28.0975 18.6875 27.3741Z",fill:"white",stroke:"#38414A",strokeWidth:.5})))}const o=n.forwardRef(d);a.p},99979:(e,t,a)=>{a.d(t,{r:()=>d});var i,l,s=a(72791);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},n.apply(this,arguments)}function r(e,t){let{title:a,titleId:r,...d}=e;return s.createElement("svg",n({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},d),a?s.createElement("title",{id:r},a):null,i||(i=s.createElement("g",{clipPath:"url(#clip0_6073_113183)"},s.createElement("path",{d:"M9.88087 2.68736L1.07744 11.4914C1.03315 11.5358 1.00117 11.5919 0.985939 11.6522L0.0101637 15.5688C-0.0190245 15.6867 0.0156207 15.812 0.101663 15.8981C0.166765 15.9632 0.255472 15.9992 0.346209 15.9992C0.374002 15.9992 0.402428 15.9958 0.430094 15.9888L4.34665 15.0129C4.40769 14.9977 4.46315 14.9658 4.50744 14.9216L13.3116 6.11812L9.88087 2.68736Z",fill:"#006697"}),s.createElement("path",{d:"M15.4924 1.48697L14.5124 0.507003C13.8574 -0.147956 12.7159 -0.147321 12.0617 0.507003L10.8613 1.7074L14.292 5.13803L15.4924 3.93764C15.8195 3.6106 15.9997 3.17532 15.9997 2.71236C15.9997 2.24941 15.8195 1.81413 15.4924 1.48697Z",fill:"#006697"}))),l||(l=s.createElement("defs",null,s.createElement("clipPath",{id:"clip0_6073_113183"},s.createElement("rect",{width:16,height:16,fill:"white"})))))}const d=s.forwardRef(r);a.p},34409:(e,t,a)=>{a.d(t,{r:()=>d});var i,l,s=a(72791);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},n.apply(this,arguments)}function r(e,t){let{title:a,titleId:r,...d}=e;return s.createElement("svg",n({width:40,height:40,viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},d),a?s.createElement("title",{id:r},a):null,i||(i=s.createElement("g",{clipPath:"url(#clip0_2022_23567)"},s.createElement("g",{clipPath:"url(#clip1_2022_23567)"},s.createElement("path",{d:"M39.806 14.4304L36.177 11.3996L38.6261 7.25314C38.7116 7.10853 38.725 6.93252 38.6623 6.77666C38.5997 6.62111 38.4684 6.50322 38.3066 6.45783L20.4634 1.45854C20.2287 1.39135 19.9771 1.49299 19.8525 1.70416L17.4931 5.69807L13.9998 2.78096C13.8151 2.62721 13.5519 2.61346 13.353 2.7465L0.240466 11.5085C0.0986689 11.6031 0.00999701 11.759 0.00077826 11.929C-0.00836236 12.099 0.0634345 12.2637 0.193981 12.3728L3.82289 15.4038L1.37398 19.55C1.29023 19.6915 1.27547 19.8635 1.33422 20.0174C1.39265 20.1711 1.51828 20.2897 1.67523 20.3397L3.98164 21.0749V32.1622C3.98164 32.3976 4.13398 32.6056 4.3582 32.677L22.739 38.5364C22.7925 38.5537 22.848 38.5621 22.903 38.5621C23.0202 38.5621 23.1359 38.5238 23.2313 38.451L35.8062 28.8286C35.94 28.7262 36.0184 28.5675 36.0184 28.3993V18.1588L39.7878 15.2746C39.9184 15.1746 39.9965 15.0208 40 14.8568C40.0034 14.6925 39.9319 14.5356 39.806 14.4304ZM22.7984 20.5417L18.1753 19.0679V7.23369L34.2898 11.7485L22.7984 20.5417ZM17.0942 18.7235L5.75531 15.1089L17.0942 7.53213V18.7235ZM20.5719 2.61135L37.3377 7.309L35.2241 10.8876L18.4577 6.1901L20.5719 2.61135ZM13.6173 3.87018L16.7339 6.47283L4.55812 14.609L1.44148 12.0061L13.6173 3.87018ZM4.76812 15.9285L22.0926 21.4512L19.9736 25.0384L2.64961 19.5159L4.76812 15.9285ZM5.06273 21.4196L20.0559 26.1991C20.1102 26.2167 20.1654 26.2248 20.2199 26.2248C20.4071 26.2248 20.5859 26.1273 20.6852 25.9591L22.3623 23.1195V37.2818L5.06273 31.7674V21.4196ZM34.9373 28.1321L23.4434 36.9272V22.2985L26.5374 24.8825C26.6377 24.966 26.7609 25.0081 26.8841 25.0081C26.9998 25.0081 27.1152 24.9712 27.2124 24.897L34.9373 18.986V28.1321ZM26.8989 23.7758L23.7681 21.1609L35.463 12.212L38.5941 14.827L26.8989 23.7758Z",fill:"white"})))),l||(l=s.createElement("defs",null,s.createElement("clipPath",{id:"clip0_2022_23567"},s.createElement("rect",{width:40,height:40,fill:"white"})),s.createElement("clipPath",{id:"clip1_2022_23567"},s.createElement("rect",{width:40,height:40,fill:"white"})))))}const d=s.forwardRef(r);a.p},81160:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(94433),l=(a(72791),a(80184));const s=e=>{let{title:t,children:a,labelClass:s=!1,textClass:n,childClassName:r}=e;return(0,l.jsxs)("div",{className:"field-card-container ".concat(n),children:[(0,l.jsx)(i.Z.Text,{className:"field-card-title ".concat(s),children:t}),(0,l.jsx)("div",{className:"content ".concat(r),children:a})]})}},45712:(e,t,a)=>{a.d(t,{Z:()=>z});var i=a(72791),l=a(28478),s=a(22641),n=a(74155),r=a(39124),d=a(76349),o=a(10686),c=a(89041);a.p;var m=a(22258),u=a.n(m),h=a(67766),p=a(9425),v=a(66106),x=a(30914),y=(a(32311),a(59538),a(48490)),f=a(14692),j=a(87309),Z=a(95048),g=a(81160),b=a(75880),C=a(66319),S=a(99979),N=a(88858),D=a(79398),w=a(92679),T=a(93835),L=a(98580),k=a(72426),R=a.n(k),M=a(9835),E=a(62582),I=a(14626),A=a(16871),O=a(60914),P=a(39230),q=a(2083),F=a(99740),V=a(38416),_=a(80184);const H=e=>{var t,a,l,s,n,r,d,o,c,m,u,h,p,k,H,K,B,z,W,U,G,J,$,Y,Q;const[X]=y.Z.useForm(),ee=(0,Z.I0)(),[te,ae]=(0,i.useState)(!1),{shipmentExceptionTypes:ie,shipmentItrackStatus:le,shipmentItrackStatusTypes:se}=(0,Z.v9)((e=>e.lookups)),[ne,re]=(0,i.useState)([]),[de,oe]=(0,i.useState)([]),[ce,me]=(0,i.useState)([]),{updateShipmentTrackingDetailsData:ue}=(0,Z.v9)((e=>e.visibility)),{user:{data:he}}=(0,Z.v9)((e=>null===e||void 0===e?void 0:e.auth)),{pathname:pe}=(0,A.TH)(),ve=(0,i.useMemo)((()=>(0,O.F)(pe)),[pe]),{t:xe}=(0,P.$G)([ve,"translation"]),ye=y.Z.useWatch("shipmentCountry",X),fe=y.Z.useWatch("shipmentState",X);(0,i.useEffect)((()=>{if(ie.data&&ie.data.length>0){let e=[];ie.data.map((t=>{e.push({label:t.codeDesc,value:t.codeId})})),re(e)}}),[ie]),(0,i.useEffect)((()=>{if(le.data&&le.data.length>0){let e=[];le.data.map((t=>{e.push({label:t.codeDesc,value:t.codeId.replace(/ /g,"")})})),oe(e)}}),[le]),(0,i.useEffect)((()=>{if(se.data&&se.data.length>0){let e=[];se.data.map((t=>{e.push({label:t.codeDesc,value:t.codeId})})),me(e)}}),[se]);let je=de.filter((t=>t.label==e.data.status)),Ze=ce.filter((t=>t.label==e.data.statusType)),ge=ne.filter((t=>t.value==e.data.exceptionType));(0,i.useEffect)((()=>{e.data.isNew&&ae(!0)}),[e.data.isNew]);let be=null!==(t=e.data)&&void 0!==t&&t.transportationDeliveryDate?R()(null===(a=e.data)||void 0===a?void 0:a.transportationDeliveryDate):R()(),Ce=null!==(l=e.data)&&void 0!==l&&l.transportationShipDate?R()(null===(s=e.data)||void 0===s?void 0:s.transportationShipDate):R()();return(0,_.jsx)(C.Z,{className:"shipment-card border-muted auction-card-active opacity",children:(0,_.jsxs)(v.Z,{className:"px-15 py-14",gutter:15,children:[!0===te&&(0,_.jsx)(f.Z,{spinning:ue.progressing,delay:200,tip:xe("translation:default.loading"),children:(0,_.jsx)(x.Z,{sm:24,children:(0,_.jsxs)(y.Z,{onFinish:t=>{let a=t.shipDate.format(M.K_),i=R()(t.shipTime).format("HH:mm:ss"),l=t.deliveryDate.format(M.K_),s=R()(t.deliveryTime).format("HH:mm:ss"),n=t.actualShipDate.format(M.K_),r=R()(t.actualShipTime).format("HH:mm:ss"),d=t.actualDeliveryDate.format(M.K_),o=R()(t.actualDeliveryTime).format("HH:mm:ss"),c=t.timeAtStatusDate.format(M.K_),m=R()(t.timeAtStatusTime).format("HH:mm:ss"),u={clientTimeZone:"",clientDateTime:new Date,customerKey:e.visibilityRecord.customerKey,shipmentNo:e.visibilityRecord.shipmentNo,shipTime:new Date(a+" "+i).toString(),deliveryTime:new Date(l+" "+s).toString(),eventLocalTime:new Date(c+" "+m),locationCity:t.shipmentCity||"",locationCountry:t.shipmentCountry||"",locationState:t.shipmentState||"",actualShipDate:new Date(n+" "+r),actualDeliveryDate:new Date(d+" "+o),shipmentCurrentStatus:"",timeAtStatus:new Date,shipperReferenceNumber:"",consigneeReferenceNumber:"",shipperDockNo:"",consingneeDockNo:"",message:"",shipmentkey:e.visibilityRecord.shipmentkey,signature:(null===t||void 0===t?void 0:t.signature)||"",statusCode:null===t||void 0===t?void 0:t.statusCode,shipmentStatusType:(null===t||void 0===t?void 0:t.shipmentStatusType)||"",shipmentExceptionType:(null===t||void 0===t?void 0:t.shipmentExceptionType)||""};ee((0,E.Yx)(u))},form:X,initialValues:{statusCode:null===je||void 0===je||null===(n=je[0])||void 0===n?void 0:n.value,shipmentStatusType:(null===Ze||void 0===Ze||null===(r=Ze[0])||void 0===r?void 0:r.value)||"NS",shipmentExceptionType:null===ge||void 0===ge||null===(d=ge[0])||void 0===d?void 0:d.value,shipDate:Ce,shipTime:Ce,deliveryDate:be,deliveryTime:be,actualShipDate:null!==(o=e.data)&&void 0!==o&&o.shipperRequestedShipDate?R()(null===(c=e.data)||void 0===c?void 0:c.shipperRequestedShipDate):R()(),actualShipTime:null!==(m=e.data)&&void 0!==m&&m.shipperRequestedShipDate?R()(null===(u=e.data)||void 0===u?void 0:u.shipperRequestedShipDate):R()(),actualDeliveryDate:null!==(h=e.data)&&void 0!==h&&h.shipperRequestedDeliveryDate?R()(null===(p=e.data)||void 0===p?void 0:p.shipperRequestedDeliveryDate):R()(),actualDeliveryTime:null!==(k=e.data)&&void 0!==k&&k.shipperRequestedDeliveryDate?R()(null===(H=e.data)||void 0===H?void 0:H.shipperRequestedDeliveryDate):R()(),timeAtStatusDate:null!==(K=e.data)&&void 0!==K&&K.eventOccurrence?R()(null===(B=e.data)||void 0===B?void 0:B.eventOccurrence):R()(),timeAtStatusTime:null!==(z=e.data)&&void 0!==z&&z.eventOccurrence?R()(null===(W=e.data)||void 0===W?void 0:W.eventOccurrence):R()(),shipmentCity:null===e||void 0===e||null===(U=e.data)||void 0===U?void 0:U.locationCity,shipmentCountry:null===e||void 0===e||null===(G=e.data)||void 0===G?void 0:G.locationCountry,shipmentState:null===e||void 0===e?void 0:e.data.locationState},children:[(0,_.jsxs)(v.Z,{className:"mb-15 pt-15",children:[(0,_.jsx)(x.Z,{sm:14,children:(0,_.jsx)(N.Z,{loading:!1,options:de,singleLineMode:!0,placeholder:xe("translation:visibility.trackingStatusInfo.trackingStatus.placeholder"),label:"".concat(xe("translation:visibility.trackingStatusInfo.trackingStatus.label"),":"),rules:[{required:!0,message:xe("translation:visibility.trackingStatusInfo.trackingStatus.message")}],name:"statusCode",editMode:!0,margin:"mb-15"})}),(0,_.jsx)(x.Z,{sm:5,className:"d-flex justify-content-center",children:(0,_.jsx)(j.ZP,{type:"default",buttonType:"submit",onClick:()=>X.submit(),className:"bg-success white-font w-100 ml-5 mr-5 border-radion-5",children:e.data.isNew?xe("translation:default.buttons.save"):xe("translation:default.buttons.update")})}),(0,_.jsx)(x.Z,{sm:5,children:(0,_.jsx)(j.ZP,{type:"default",danger:!0,buttonType:"button",className:"border-radion-5 w-100 ml-5",onClick:()=>{ae(!te),ee((0,E.nU)(!1)),e.data.isNew&&e.removeNewRecord()},children:xe("translation:default.buttons.cancel")})})]}),(0,_.jsx)("hr",{}),(0,_.jsxs)(v.Z,{className:"pt-15",children:[(0,_.jsx)(x.Z,{sm:12,className:"pr-15",children:(0,_.jsx)(N.Z,{loading:!1,options:ce,placeholder:xe("translation:visibility.trackingStatusInfo.trackingStatusType.placeholder"),label:xe("translation:visibility.trackingStatusInfo.trackingStatusType.label"),rules:[],name:"shipmentStatusType",editMode:!0,margin:"mb-15"})}),(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(N.Z,{loading:!1,options:ne,placeholder:xe("translation:default.fields.exceptionType.placeholder"),label:xe("translation:default.fields.exceptionType.label"),rules:[],name:"shipmentExceptionType",editMode:!0,margin:"mb-15"})})]}),(0,_.jsxs)(v.Z,{children:[(0,_.jsx)(x.Z,{sm:8,className:"pr-15",children:(0,_.jsx)(q.Z,{label:xe("translation:default.fields.country.label"),editMode:!0,margin:"mb-15",name:"shipmentCountry",placeholder:xe("translation:default.fields.country.placeholder"),onChange:()=>{X.setFieldsValue({shipmentState:void 0,shipmentCity:void 0})}})}),(0,_.jsx)(x.Z,{sm:8,className:"pr-15",children:(0,_.jsx)(F.Z,{label:xe("translation:default.fields.selectState.label"),margin:"mb-15",name:"shipmentState",placeholder:xe("translation:default.fields.selectState.label"),countryCode:ye})}),(0,_.jsx)(x.Z,{sm:8,children:(0,_.jsx)(V.Z,{label:xe("translation:default.fields.city.label"),editMode:!0,margin:"mb-15",name:"shipmentCity",placeholder:xe("translation:default.fields.city.placeholder"),countryCode:ye,stateCode:fe})})]}),(0,_.jsxs)(v.Z,{className:"mb-15",children:[(0,_.jsxs)(x.Z,{sm:12,className:"pr-15",children:[(0,_.jsx)(T.Z,{className:"form-input-label",children:xe("translation:visibility.detailCard.generalTab.transporterPlannedShipDate")}),(0,_.jsxs)("div",{className:"d-flex gap-1",children:[(0,_.jsx)(w.Z,{placeholder:xe("translation:visibility.shipmentSearch.pickupDate.placeholder"),margin:"mb-0",name:"shipDate",disableFuture:!0,rules:[{required:!0,message:xe("translation:visibility.shipmentSearch.pickupDate.message")}]}),(0,_.jsx)(D.Z,{colon:!0,editMode:!0,singleLineMode:!1,name:"shipTime",margin:"m-0"})]})]}),(0,_.jsxs)(x.Z,{sm:12,children:[(0,_.jsx)(T.Z,{className:"form-input-label",children:xe("translation:visibility.detailCard.generalTab.transporterPlannedDeliveryDate")}),(0,_.jsxs)("div",{className:"d-flex gap-1",children:[(0,_.jsx)(w.Z,{placeholder:xe("translation:visibility.shipmentSearch.pickupDate.placeholder"),margin:"mb-0",name:"deliveryDate",disableFuture:!0,rules:[{required:!0,message:xe("translation:visibility.shipmentSearch.pickupDate.messageDelivery")}]}),(0,_.jsx)(D.Z,{colon:!0,editMode:!0,singleLineMode:!1,name:"deliveryTime",margin:"m-0"})]})]})]}),(0,_.jsxs)(v.Z,{className:"mb-15",children:[(0,_.jsxs)(x.Z,{sm:12,className:"pr-15",children:[(0,_.jsx)(T.Z,{className:"form-input-label",children:xe("translation:visibility.detailCard.generalTab.shipperRequstedShipDate")}),(0,_.jsxs)("div",{className:"d-flex gap-1",children:[(0,_.jsx)(w.Z,{placeholder:xe("translation:visibility.shipmentSearch.pickupDate.placeholder"),margin:"mb-0",name:"actualShipDate",disableFuture:!0,rules:[{required:!0,message:xe("translation:visibility.shipmentSearch.pickupDate.messageAcutal")}]}),(0,_.jsx)(D.Z,{colon:!0,editMode:!0,singleLineMode:!1,name:"actualShipTime",margin:"m-0"})]})]}),(0,_.jsxs)(x.Z,{sm:12,children:[(0,_.jsx)(T.Z,{className:"form-input-label",children:xe("translation:visibility.detailCard.generalTab.shipperRequstedDeliveryDate")}),(0,_.jsxs)("div",{className:"d-flex gap-1",children:[(0,_.jsx)(w.Z,{placeholder:xe("translation:visibility.shipmentSearch.pickupDate.placeholder"),margin:"mb-0",name:"actualDeliveryDate",rules:[{required:!0,message:xe("translation:visibility.shipmentSearch.pickupDate.messageAcutal")}],disableFuture:!0}),(0,_.jsx)(D.Z,{colon:!0,editMode:!0,singleLineMode:!1,name:"actualDeliveryTime",margin:"m-0"})]})]})]}),(0,_.jsxs)(v.Z,{className:"mb-15",children:[(0,_.jsxs)(x.Z,{sm:12,className:"pr-15",children:[(0,_.jsx)(T.Z,{className:"form-input-label",children:xe("translation:visibility.detailCard.generalTab.eventOccurrenceDate")}),(0,_.jsxs)("div",{className:"d-flex gap-1",children:[(0,_.jsx)(w.Z,{placeholder:xe("translation:visibility.shipmentSearch.pickupDate.placeholder"),margin:"mb-0",name:"timeAtStatusDate",disableFuture:!0,rules:[{required:!0,message:xe("translation:visibility.shipmentSearch.pickupDate.messageStatus")}]}),(0,_.jsx)(D.Z,{colon:!0,editMode:!0,singleLineMode:!1,name:"timeAtStatusTime",margin:"m-0"})]})]}),(0,_.jsx)(x.Z,{sm:12,className:"mt-15",children:(0,_.jsx)(g.Z,{title:xe("translation:default.fields.updateReceivedEST"),children:(0,_.jsx)(b.Z,{normal:!0,children:e.data.etaDate})})})]}),(0,_.jsxs)(v.Z,{className:"mb-15",children:[(0,_.jsx)(x.Z,{sm:12,className:"mt-15 pr-15",children:(0,_.jsx)(g.Z,{title:xe("translation:default.fields.submittedBy"),children:(0,_.jsx)(b.Z,{normal:!0,children:e.data.createdBy})})}),(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(L.Z,{placeholder:xe("translation:default.fields.signature"),label:xe("translation:default.fields.signature"),editMode:!0,name:"signature",rules:[],defaultValue:e.data.signature,maxLength:50})})]})]})})}),!1===te&&(0,_.jsxs)(x.Z,{sm:24,children:[(0,_.jsxs)(v.Z,{className:"mb-15 pt-15",children:[(0,_.jsx)(x.Z,{sm:22,children:(0,_.jsx)(g.Z,{title:"".concat(xe("translation:visibility.trackingStatusInfo.trackingStatus.label"),":"),textClass:"d-flex align-items-center gap-1 white-space-nowarp",children:(0,_.jsx)(b.Z,{className:"text-highlight font-weight-600",children:e.data.status})})}),(0,_.jsx)(x.Z,{sm:2,className:"d-flex justify-content-end",children:"CARR"===(null===he||void 0===he?void 0:he.userType)&&0==e.keyIndex&&(0,_.jsx)(S.r,{onClick:()=>ae(!te)})})]}),(0,_.jsx)("hr",{}),(0,_.jsxs)(v.Z,{className:"mb-15 pt-15",children:[(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(g.Z,{title:xe("translation:visibility.trackingStatusInfo.trackingStatusType.label"),children:(0,_.jsx)(b.Z,{normal:!0,children:e.data.statusType})})}),(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(g.Z,{title:xe("translation:default.fields.exceptionType.label"),children:(0,_.jsx)(b.Z,{normal:!0,children:(null===ge||void 0===ge||null===(J=ge[0])||void 0===J?void 0:J.label)||""})})})]}),(0,_.jsxs)(v.Z,{className:"mb-15",children:[(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(g.Z,{title:xe("translation:visibility.detailCard.generalTab.transporterPlannedShipDate"),children:(0,_.jsx)(b.Z,{normal:!0,children:(0,I.gA)(Ce)})})}),(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(g.Z,{title:xe("translation:visibility.detailCard.generalTab.transporterPlannedDeliveryDate"),children:(0,_.jsx)(b.Z,{normal:!0,children:(0,I.gA)(be)})})})]}),(0,_.jsxs)(v.Z,{className:"mb-15",children:[(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(g.Z,{title:xe("translation:visibility.detailCard.generalTab.shipperRequestedShipDate"),children:(0,_.jsx)(b.Z,{normal:!0,children:(0,I.gA)(e.data.shipperRequestedShipDate)})})}),(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(g.Z,{title:xe("translation:default.fields.shipperReqDeliveryDate"),children:(0,_.jsx)(b.Z,{normal:!0,children:(0,I.gA)(e.data.shipperRequestedDeliveryDate)})})})]}),(0,_.jsxs)(v.Z,{className:"mb-15",children:[(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(g.Z,{title:xe("translation:visibility.detailCard.generalTab.eventOccurrence"),children:(0,_.jsx)(b.Z,{normal:!0,children:(0,I.gA)(new Date(e.data.eventOccurrence))})})}),(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(g.Z,{title:xe("translation:default.fields.updateReceivedEST"),children:(0,_.jsx)(b.Z,{normal:!0,children:(0,I.gA)(new Date(e.data.dateTimeStamp))})})})]}),(0,_.jsxs)(v.Z,{className:"mb-15",children:[(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(g.Z,{title:xe("translation:default.fields.country.label"),children:(0,_.jsx)(b.Z,{normal:!0,children:null===($=e.data)||void 0===$?void 0:$.locationCountryName})})}),(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(g.Z,{title:xe("translation:default.fields.state.label"),children:(0,_.jsx)(b.Z,{normal:!0,children:null===(Y=e.data)||void 0===Y?void 0:Y.locationStateName})})})]}),(0,_.jsxs)(v.Z,{className:"mb-15",children:[(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(g.Z,{title:xe("translation:default.fields.city.label"),children:(0,_.jsx)(b.Z,{normal:!0,children:null===(Q=e.data)||void 0===Q?void 0:Q.locationCity})})}),(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(g.Z,{title:xe("translation:default.fields.submittedBy"),children:(0,_.jsx)(b.Z,{normal:!0,children:e.data.createdBy})})})]}),(0,_.jsx)(v.Z,{className:"mb-15",children:(0,_.jsx)(x.Z,{sm:12,children:(0,_.jsx)(g.Z,{title:xe("translation:default.fields.signature"),children:(0,_.jsx)(b.Z,{normal:!0,children:e.data.signature})})})})]})]})})};var K=a(54261),B=a(34356);u().APIKey="97E9F002F288BF458166B86DAC37E053";const z=(0,B.Z)((e=>{let{hasEnabledFullScreen:t=!1,handleFullScreenClick:a=(()=>{}),coordinates:m=[],transportationList:y,drawLineOnMap:f=!0,trackingStatusInfo:j=!1,trackingStatusData:Z=[],visibilityRecord:g={},mapId:b="shipment-trimble-map",removeNewRecord:C=(()=>{})}=e;const[S,N]=(0,i.useState)(2),[D,w]=(0,i.useState)(!0),[T,L]=(0,i.useState)(!1),[k,R]=(0,i.useState)(!1),[M,E]=(0,i.useState)(!1);(0,i.useEffect)((()=>{u()&&!1===k&&A()}),[u()]),(0,i.useEffect)((()=>{F()}),[t]);const I=(e,t)=>{try{let a=(0,K.Z)();e.forEach(((t,i)=>{let{lat:l,lng:s}=t;if(i+1!==e.length){var n,r,d={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:[[s,l],[null===e||void 0===e||null===(n=e[i+1])||void 0===n?void 0:n.lng,null===e||void 0===e||null===(r=e[i+1])||void 0===r?void 0:r.lat]]}}]};k.addSource("route-".concat(a),{type:"geojson",data:d}),k.addLayer({id:"route-".concat(a),source:"route-".concat(a),type:"line",paint:{"line-width":3,"line-color":"#005F9E"}})}})),t.setVisibility(!1),t.setVisibility(!0),k.jumpTo({center:[e[0].lng,e[0].lat],zoom:1})}catch(a){console.log(a)}};(0,i.useEffect)((()=>{k&&(k.on("load",(async function(){if(w(!1),F(),f)(async e=>{try{let t=await V(e,y);L(!0);const a=new(u().Route)({routeId:"myRoute",stops:t,showArrows:!1,frameRoute:!1});a.addTo(k),a.on("route",(e=>{L(!1),k.setZoom(1),k.setCenter([t[0].lng,t[0].lat])})),a.on("error",(e=>{var i;if(null!==e&&void 0!==e&&null!==(i=e.error)&&void 0!==i&&i.message){var l,s;const i=JSON.parse(null===e||void 0===e||null===(l=e.error)||void 0===l?void 0:l.message);(null===i||void 0===i?void 0:i.length)>0&&70===(null===(s=i[0])||void 0===s?void 0:s.Code)&&(f&&I(t,a),null===a||void 0===a||a.frame())}})),E(a)}catch(t){console.log(t)}})(m);else{let e=await V(m,y),t=[];for(let a=0;a<e.length;a+=2){let i={};a+1<e.length?(i.waypoints=[e[a],e[a+1]],t.push(i)):(i.waypoints=[e[a]],t.push(i))}t.map((e=>{const t=new(u().Route)({stops:e.waypoints});t.addTo(k),t.on("route",(e=>{L(!1)})),t.on("error",(a=>{var i;if(null!==a&&void 0!==a&&null!==(i=a.error)&&void 0!==i&&i.message){var l,s;const i=JSON.parse(null===a||void 0===a||null===(l=a.error)||void 0===l?void 0:l.message);(null===i||void 0===i?void 0:i.length)>0&&70===(null===(s=i[0])||void 0===s?void 0:s.Code)&&(I(e.waypoints,t),null===t||void 0===t||t.frame())}})),E(t)}))}})),k.on("zoom",(function(e,t){N(k.getZoom())})))}),[k]);const A=()=>{var e,t;const a=new(u().Map)({container:b,style:u().Common.Style.TRANSPORTATION,center:[(0,h.xe)(null===m||void 0===m||null===(e=m[0])||void 0===e?void 0:e.longitude),(0,h.xe)(null===m||void 0===m||null===(t=m[0])||void 0===t?void 0:t.latitude)],zoom:3,pixelRatio:window.devicePixelRatio||1});R(a)},O=e=>{e>=0&&e<=22&&(N(e),k.setZoom(e))},P=(0,i.useMemo)((()=>t?22:16),[t]),q=(0,i.useMemo)((()=>t?15:5),[t]),F=()=>{k&&k.resize(),M&&M.frame()},V=(e,t)=>(console.log(t),new Promise((async(a,i)=>{try{let i=e.map(((e,a)=>({Address:{City:t[a].city,Zip:t[a].zipCode,State:"NS"===t[a].stateCode||"UNITED STATES"!==t[a].countryName||"CANADA"!==t[a].countryName?"":t[a].stateCode,Country:t[a].countryName,AbbreviationFormat:1},Region:0,GeoList:!1,MaxResults:null,CitySearchFilter:0})));const{data:l}=await(0,p.yC)({Locations:i});a(l.filter((e=>null!=e.Coords&&""!=e.Coords)).map((e=>{let{Coords:{Lat:t,Lon:a}}=e;return{lat:t,lng:a}})))}catch(l){i(l)}})));return(0,_.jsxs)("div",{className:"google-maps-container",children:[!0===j&&(0,_.jsx)("div",{className:"mapoverlay",children:(0,_.jsx)(v.Z,{className:"h-100",children:(0,_.jsx)(x.Z,{sm:24,className:"h-100 pb-15 overflow-y-inherit d-flex flex-direction-column",children:(0,_.jsx)("div",{className:" h-100 overflow-y-inherit d-flex flex-direction-column",children:(0,_.jsx)("div",{className:"d-flex flex-direction-column overflow-hidden h-100 br-4",children:(0,_.jsx)("div",{className:"custom-scroll-bar overflow-x-hidden mb-15 flex-1",children:Z.map(((e,t)=>(0,_.jsx)(H,{visibilityRecord:g,data:e,keyIndex:t,selectedBidData:e=>{},selectedBidID:e=>{},removeNewRecord:()=>C()},t)))})})})})})}),(0,_.jsx)("div",{id:b,className:"w-100 h-100"}),D?(0,_.jsx)(c.Z,{}):(0,_.jsx)("div",{className:"maps-controls-container ".concat(t?"expanded":""),children:(0,_.jsxs)("div",{className:"d-flex flex-direction-column",children:[(0,_.jsx)("div",{className:"mb-".concat(q),children:(0,_.jsx)(o.Z,{className:"map-buttons-container",onClick:()=>O(S+1),children:(0,_.jsx)(l.Z,{Icon:r.r,color:"primary",width:P,height:P})})}),(0,_.jsx)("div",{className:"mb-".concat(q),children:(0,_.jsx)(o.Z,{className:"map-buttons-container",onClick:()=>O(S-1),children:(0,_.jsx)(l.Z,{Icon:d.r,color:"primary",width:P,height:P})})}),(0,_.jsx)("div",{children:(0,_.jsx)(o.Z,{className:"map-buttons-container",onClick:a,children:(0,_.jsx)(l.Z,{Icon:t?s.r:n.r,color:"primary",width:P,height:P})})})]})})]})}))},96942:(e,t,a)=>{a.d(t,{Z:()=>m});var i=a(72791),l=a(95048),s=a(46413),n=a(5814),r=a(47698),d=a(88858),o=a(68825),c=a(80184);const m=e=>{let{placeholder:t=o.ZP.t("translation:default.fields.customerName.placeholder"),label:a=o.ZP.t("translation:default.fields.customerName.label"),rules:m=[],name:u,editMode:h,margin:p,readOnly:v,disabled:x,mode:y="",form:f,id:j="",setDetafuleValue:Z=!1,callbackSetValue:g=(()=>{})}=e;const[b,C]=(0,i.useState)([]),[S,N]=(0,i.useState)(!1),[D,w]=(0,i.useState)({}),{selectedCompany:T}=(0,l.v9)((e=>e.auth)),{user:{data:L}}=(0,l.v9)((e=>null===e||void 0===e?void 0:e.auth));(0,i.useEffect)((()=>{T&&T.companyId&&k(T.companyId),"CUST"===(null===L||void 0===L?void 0:L.userType)&&(w({value:null===T||void 0===T?void 0:T.companyId,label:null===T||void 0===T?void 0:T.companyName}),f&&f.setFieldValue("customerKey",null===T||void 0===T?void 0:T.companyId))}),[T,f]);const k=async e=>{try{N(!0);let t={},a=[],i={};if(t="CARR"===(null===L||void 0===L?void 0:L.userType)?{carrierKey:e}:{VendorKey:e},"CARR"===(null===L||void 0===L?void 0:L.userType)){const{data:e}=await(0,s.fe)(t);a=e,i=a.map((e=>({label:e.customerName,value:e.customerKey})))}else if("CUST"===(null===L||void 0===L?void 0:L.userType)){const{data:e}=await(0,r.E9)();a=e,i=a.map((e=>({label:e.companyName,value:e.companyId})))}else{const{data:e}=await(0,n.k)(t);a=e,i=a.map((e=>({label:e.customerName,value:e.customerKey})))}C(i),!0===Z&&setTimeout((()=>{var e,t,a,l;f.setFieldValue("customerKey",null===(e=i)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.value),g(null===(a=i)||void 0===a||null===(l=a[0])||void 0===l?void 0:l.value)}),200),N(!1)}catch(t){console.log(t),C([]),N(!1)}};return(0,c.jsx)(d.Z,{loading:S,options:b,placeholder:t,label:a,rules:m,name:u,editMode:h,margin:p,readOnly:v,disabled:x,mode:y,defaultValue:null===D||void 0===D?void 0:D.label,id:j})}},59538:(e,t,a)=>{a.d(t,{Z:()=>p});var i=a(66106),l=a(30914),s=a(67766),n=a(81160),r=a(75880),d=a(66319),o=a(16871),c=a(72791),m=a(60914),u=a(39230),h=a(80184);const p=e=>{var t,a,p,v,x,y,f,j;const{pathname:Z}=(0,o.TH)(),g=(0,c.useMemo)((()=>(0,m.F)(Z)),[Z]),{t:b}=(0,u.$G)([g,"translation"]);return(0,h.jsx)(d.Z,{className:"shipment-card border-muted ".concat(e.data.shipmentkey===e.selectedShipmentKey?"visibility-card-active":""),children:(0,h.jsx)(i.Z,{className:"px-15 py-14",onClick:t=>e.handleSelectedItem(e.data),gutter:15,children:(0,h.jsxs)(l.Z,{sm:24,children:[(0,h.jsxs)(i.Z,{className:"mb-15",children:[(0,h.jsx)(l.Z,{sm:12,children:(0,h.jsx)(n.Z,{title:b("translation:default.fields.shipmentNumber.label"),children:(0,h.jsx)(r.Z,{className:"text-highlight font-weight-600",children:e.data.shipmentNo})})}),(0,h.jsx)(l.Z,{sm:12,children:(0,h.jsx)(n.Z,{title:b("translation:default.fields.customerName.label"),children:(0,h.jsx)(r.Z,{className:"text-highlight font-weight-600",children:e.data.customerName})})})]}),(0,h.jsxs)(i.Z,{className:"mb-15",children:[(0,h.jsx)(l.Z,{sm:12,children:(0,h.jsxs)(n.Z,{title:b("translation:default.fields.shipper"),children:[(0,h.jsx)(r.Z,{normal:!0,children:e.data.shipperName}),(0,h.jsxs)("p",{className:"m-0",children:[(0,h.jsx)("div",{children:(0,s.yM)(null===(t=e.data)||void 0===t?void 0:t.originCity,null===(a=e.data)||void 0===a?void 0:a.originPostal)}),(0,h.jsx)("div",{children:(0,s.yM)(null===(p=e.data)||void 0===p?void 0:p.originState,null===(v=e.data)||void 0===v?void 0:v.originCountry)})]})]})}),(0,h.jsx)(l.Z,{sm:12,children:(0,h.jsxs)(n.Z,{title:b("translation:default.fields.consignee"),children:[(0,h.jsx)(r.Z,{normal:!0,children:e.data.consigneeName}),(0,h.jsxs)("p",{className:"m-0",children:[(0,h.jsx)("div",{children:(0,s.yM)(null===(x=e.data)||void 0===x?void 0:x.destinationCity,null===(y=e.data)||void 0===y?void 0:y.destinationPostal)}),(0,h.jsx)("div",{children:(0,s.yM)(null===(f=e.data)||void 0===f?void 0:f.destinationState,null===(j=e.data)||void 0===j?void 0:j.destinationCountry)})]})]})})]}),(0,h.jsx)(i.Z,{className:"mb-15",children:(0,h.jsx)(l.Z,{sm:24,children:(0,h.jsx)(n.Z,{title:b("translation:default.fields.transportationProvider.label"),children:(0,h.jsx)(r.Z,{normal:!0,children:e.data.transportationProvider})})})}),(0,h.jsxs)(i.Z,{className:"mb-15",children:[(0,h.jsx)(l.Z,{sm:12,children:(0,h.jsx)(n.Z,{title:"".concat(b("translation:visibility.trackingStatusInfo.trackingStatus.label"),":"),children:(0,h.jsx)(r.Z,{normal:!0,className:"text-highlight",children:e.data.trackingStatus})})}),(0,h.jsx)(l.Z,{sm:12,children:(0,h.jsx)(n.Z,{title:b("translation:visibility.minCard.trackingStatusType"),children:(0,h.jsx)(r.Z,{normal:!0,children:e.data.status})})})]}),(0,h.jsxs)(i.Z,{className:"mb-15",children:[(0,h.jsx)(l.Z,{sm:12,children:(0,h.jsx)(n.Z,{title:b("translation:visibility.minCard.shipDate"),children:(0,h.jsx)(r.Z,{normal:!0,children:e.data.shipReqShipDate})})}),(0,h.jsx)(l.Z,{sm:12,children:(0,h.jsx)(n.Z,{title:b("translation:default.fields.shipperReqDeliveryDate"),children:(0,h.jsx)(r.Z,{normal:!0,children:e.data.shipReqDeliveryDate})})})]})]})})})}}}]);
//# sourceMappingURL=562.17e0e896.chunk.js.map