"use strict";(self.webpackChunknvision_TMS=self.webpackChunknvision_TMS||[]).push([[5515],{39362:(e,t,i)=>{i.d(t,{r:()=>o});var s,l=i(72791);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},n.apply(this,arguments)}function a(e,t){let{title:i,titleId:a,...o}=e;return l.createElement("svg",n({width:22,height:24,viewBox:"0 0 22 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),i?l.createElement("title",{id:a},i):null,s||(s=l.createElement("path",{d:"M14.478 11.1284C16.0137 10.0084 17.0137 8.19581 17.0137 6.15384C17.0137 2.76061 14.2531 0 10.8599 0C7.46665 0 4.70604 2.76061 4.70604 6.15384C4.70604 8.19581 5.70602 10.0084 7.24174 11.1284C3.42424 12.5892 0.706055 16.2905 0.706055 20.6154C0.706055 22.4817 2.22438 24 4.09066 24H17.6291C19.4954 24 21.0137 22.4817 21.0137 20.6154C21.0137 16.2905 18.2955 12.5892 14.478 11.1284ZM6.55221 6.15384C6.55221 3.77859 8.48463 1.84617 10.8599 1.84617C13.2351 1.84617 15.1676 3.77859 15.1676 6.15384C15.1676 8.52909 13.2351 10.4616 10.8599 10.4616C8.48463 10.4616 6.55221 8.52909 6.55221 6.15384ZM17.6291 22.1538H4.09066C3.24237 22.1538 2.55223 21.4637 2.55223 20.6153C2.55223 16.0344 6.27898 12.3076 10.8599 12.3076C15.4409 12.3076 19.1676 16.0344 19.1676 20.6153C19.1676 21.4637 18.4774 22.1538 17.6291 22.1538Z",fill:"black"})))}const o=l.forwardRef(a);i.p},75515:(e,t,i)=>{i.r(t),i.d(t,{default:()=>We});var s=i(72791),l=i(95048),n=i(29128),a=i(48490),o=i(66106),r=i(30914),d=i(763),c=i.n(d),u=i(16871),m=i(9835),h=i(48740),p=i(89017),v=i(39230),x=i(60914),f=i(67766),j=i(98580),g=i(66319),Z=i(28478),b=i(47970),y=i(93835),C=i(75880),S=i(76546),N=i(95003),w=i(56902),D=i(44259),I=i(77238),F=i(17446),M=i(57948),T=i(89041),k=i(84446),P=(i(88858),i(3074)),A=i(80184);const L=e=>{let{form:t,isPartialSave:i}=e;const n=a.Z.useWatch("status",t),{selectedCompany:d}=(0,l.v9)((e=>e.auth)),c=(0,M.Z)("PurchaseOrderNumber"),m=(0,M.Z)("SalesOrderNumber"),h=(0,M.Z)("PaidBy"),{pathname:p}=(0,u.TH)(),f=(0,s.useMemo)((()=>(0,x.F)(p)),[p]),{t:g}=(0,v.$G)([f,"translation"]);return(0,A.jsxs)(o.Z,{gutter:30,children:[(0,A.jsx)(r.Z,{sm:24,md:12,lg:6,children:(0,A.jsxs)(o.Z,{children:[(0,A.jsxs)(r.Z,{sm:24,className:"mb-20",children:[(0,A.jsx)(y.Z,{children:g("translation:default.fields.shipmentStatus")}),(0,A.jsx)("br",{}),(0,A.jsx)(C.Z,{className:"text-success f-14 fw-600",children:(0,A.jsx)("span",{style:{display:"inline-block",height:28},children:n})}),(0,A.jsx)(b.Z,{label:g("translation:default.fields.shipmentStatus"),name:"status",disabled:!0})]}),(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(S.Z,{margin:"mb-25",label:g("translation:default.fields.transportationProvider.label"),name:"carrierKey",disabled:!1,form:t,editMode:!1})}),(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(j.Z,{margin:!0===c?"mb-15":"mb-0",label:g("translation:shipmentAdd.shipmentDetails.freightBillProNumber.label"),name:"proNo",editMode:!0,maxLength:25})}),"PROGRESSING"===c&&(0,A.jsxs)(r.Z,{sm:24,className:"text-center mb-20",children:[(0,A.jsx)(T.Z,{}),(0,A.jsx)(k.Z,{className:"text-info f-16 ",children:g("translation:shipmentAdd.shipmentDetails.checking")})]}),!0===c&&(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(j.Z,{margin:"mb-15",label:g("translation:shipmentAdd.shipmentDetails.purchaseOrders.label"),name:"purchaseOrderNumber",editMode:!0,rules:[{required:!0,message:g("translation:shipmentAdd.shipmentDetails.purchaseOrders.message")}],maxLength:25})}),!0===m&&(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(j.Z,{margin:"mb-0",label:g("translation:shipmentAdd.productDetails.salesOrders.label"),name:"salesOrderNumber",editMode:!0})}),!0===h&&(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsxs)("div",{className:"mt-15",children:[(0,A.jsx)(y.Z,{children:g("translation:shipmentAdd.shipmentDetails.paidBy.label")}),(0,A.jsxs)(o.Z,{gutter:15,children:[(0,A.jsx)(r.Z,{sm:24,md:16,children:(0,A.jsx)(P.Z,{label:!1,name:"paymentTerms",placeholder:g("translation:shipmentAdd.shipmentDetails.paidBy.placeholder"),margin:"m-0",editMode:!0})}),(0,A.jsx)(r.Z,{sm:24,md:4,children:(0,A.jsx)(j.Z,{editMode:!1,label:!1,name:"currency",margin:"m-0",placeholder:g("translation:default.fields.currency.label")})}),(0,A.jsx)(r.Z,{sm:24,md:4,children:(0,A.jsx)(j.Z,{editMode:!0,label:!1,name:"paidAmount",margin:"m-0",placeholder:g("translation:shipmentAdd.shipmentDetails.amount.label")})})]})]})})]})}),(0,A.jsx)(r.Z,{sm:24,md:12,lg:6,children:(0,A.jsxs)(o.Z,{children:[(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(D.Z,{margin:"mb-15",label:g("translation:default.fields.branch.label"),name:"branchKey",editMode:!0,rules:[{required:!0,message:g("translation:default.fields.branch.message")}],customerId:null===d||void 0===d?void 0:d.companyId,disableValidation:i})}),(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(F.Z,{margin:"mb-15",label:g("translation:default.fields.shipmentType.label"),name:"shipmentType",editMode:!0,rules:[{required:!0,message:g("translation:default.fields.shipmentType.message")}],disableValidation:i})}),(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(I.Z,{margin:"mb-0",label:g("translation:default.fields.shipmentTerms.label"),name:"shipmentTerms",editMode:!0,rules:[{required:!0,message:g("translation:default.fields.shipmentTerms.message")}],disableValidation:i})}),!0===h&&(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsxs)("div",{className:"mt-15",children:[(0,A.jsx)(y.Z,{children:"".concat(g("translation:shipmentAdd.shipmentDetails.paidPercentage.label"),":")}),(0,A.jsxs)(o.Z,{gutter:15,children:[(0,A.jsx)(r.Z,{sm:24,md:16,children:(0,A.jsx)(j.Z,{inputType:"number",editMode:!0,label:!1,name:"paidPercentage",margin:"m-0",placeholder:g("translation:shipmentAdd.shipmentDetails.paidPercentage.placeholder")})}),(0,A.jsx)(r.Z,{sm:24,md:4,children:(0,A.jsx)(j.Z,{editMode:!1,label:!1,name:"percentOf",margin:"m-0",placeholder:g("translation:shipmentAdd.shipmentDetails.of.placeholder")})}),(0,A.jsx)(r.Z,{sm:24,md:4,children:(0,A.jsx)(j.Z,{editMode:!1,label:!1,name:"shipmentCost",margin:"m-0",placeholder:g("translation:default.fields.shipmentCost")})})]})]})})]})}),(0,A.jsx)(r.Z,{sm:24,md:12,lg:6,children:(0,A.jsxs)(o.Z,{children:[(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(N.Z,{margin:"mb-15",label:g("translation:shipmentAdd.shipmentDetails.freeOnBoard.label"),name:"fobCode",editMode:!0})}),(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(j.Z,{label:g("translation:shipmentAdd.shipmentDetails.customerAccountNumber.label"),editMode:!0,margin:"mb-0",name:"accountNumber",maxLength:12})})]})}),(0,A.jsx)(r.Z,{sm:24,md:12,lg:6,children:(0,A.jsxs)(o.Z,{children:[(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(w.Z,{margin:"mb-15",label:g("translation:default.fields.incoTerm.label"),name:"incoCode",editMode:!0})}),(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(j.Z,{margin:"mb-15",label:g("translation:shipmentAdd.shipmentDetails.incotermNamedPlace.label"),name:"incoPoint",editMode:!0,maxLength:30})}),(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(j.Z,{label:g("translation:default.fields.containerNumber.label"),editMode:!0,margin:"mb-10",name:"trailerNumber",maxLength:25})}),(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(j.Z,{margin:"mb-15",label:g("translation:shipmentAdd.shipmentDetails.masterBillOfLandingNumber.label"),name:"masterBolNumber",editMode:!0,maxLength:25})}),(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(j.Z,{margin:"mb-15",label:g("translation:default.fields.houseBillOfLandingNumber"),name:"bolNumber",editMode:!0,maxLength:25})})]})})]})};var O,B=i(20114),V=i(99678),R=i(63046),K=i(39362),E=i(88989);function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},q.apply(this,arguments)}function H(e,t){let{title:i,titleId:l,...n}=e;return s.createElement("svg",q({width:25,height:24,viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},n),i?s.createElement("title",{id:l},i):null,O||(O=s.createElement("path",{d:"M9.76923 0H3.30769C2.69588 0.000732857 2.10933 0.244099 1.67672 0.676717C1.2441 1.10933 1.00073 1.69588 1 2.30769V8.76923C1.00073 9.38104 1.2441 9.96759 1.67672 10.4002C2.10933 10.8328 2.69588 11.0762 3.30769 11.0769H9.76923C10.381 11.0762 10.9676 10.8328 11.4002 10.4002C11.8328 9.96759 12.0762 9.38104 12.0769 8.76923V2.30769C12.0762 1.69588 11.8328 1.10933 11.4002 0.676717C10.9676 0.244099 10.381 0.000732857 9.76923 0ZM11.1538 8.76923C11.1538 9.13645 11.008 9.48864 10.7483 9.7483C10.4886 10.008 10.1365 10.1538 9.76923 10.1538H3.30769C2.94047 10.1538 2.58829 10.008 2.32862 9.7483C2.06896 9.48864 1.92308 9.13645 1.92308 8.76923V2.30769C1.92308 1.94047 2.06896 1.58829 2.32862 1.32862C2.58829 1.06896 2.94047 0.923077 3.30769 0.923077H9.76923C10.1365 0.923077 10.4886 1.06896 10.7483 1.32862C11.008 1.58829 11.1538 1.94047 11.1538 2.30769V8.76923ZM22.6923 0H16.2308C15.619 0.000732857 15.0324 0.244099 14.5998 0.676717C14.1672 1.10933 13.9238 1.69588 13.9231 2.30769V8.76923C13.9238 9.38104 14.1672 9.96759 14.5998 10.4002C15.0324 10.8328 15.619 11.0762 16.2308 11.0769H22.6923C23.3041 11.0762 23.8907 10.8328 24.3233 10.4002C24.7559 9.96759 24.9993 9.38104 25 8.76923V2.30769C24.9993 1.69588 24.7559 1.10933 24.3233 0.676717C23.8907 0.244099 23.3041 0.000732857 22.6923 0ZM24.0769 8.76923C24.0769 9.13645 23.931 9.48864 23.6714 9.7483C23.4117 10.008 23.0595 10.1538 22.6923 10.1538H16.2308C15.8635 10.1538 15.5114 10.008 15.2517 9.7483C14.992 9.48864 14.8462 9.13645 14.8462 8.76923V2.30769C14.8462 1.94047 14.992 1.58829 15.2517 1.32862C15.5114 1.06896 15.8635 0.923077 16.2308 0.923077H22.6923C23.0595 0.923077 23.4117 1.06896 23.6714 1.32862C23.931 1.58829 24.0769 1.94047 24.0769 2.30769V8.76923ZM9.76923 12.9231H3.30769C2.69588 12.9238 2.10933 13.1672 1.67672 13.5998C1.2441 14.0324 1.00073 14.619 1 15.2308V21.6923C1.00073 22.3041 1.2441 22.8907 1.67672 23.3233C2.10933 23.7559 2.69588 23.9993 3.30769 24H9.76923C10.381 23.9993 10.9676 23.7559 11.4002 23.3233C11.8328 22.8907 12.0762 22.3041 12.0769 21.6923V15.2308C12.0762 14.619 11.8328 14.0324 11.4002 13.5998C10.9676 13.1672 10.381 12.9238 9.76923 12.9231ZM11.1538 21.6923C11.1538 22.0595 11.008 22.4117 10.7483 22.6714C10.4886 22.931 10.1365 23.0769 9.76923 23.0769H3.30769C2.94047 23.0769 2.58829 22.931 2.32862 22.6714C2.06896 22.4117 1.92308 22.0595 1.92308 21.6923V15.2308C1.92308 14.8635 2.06896 14.5114 2.32862 14.2517C2.58829 13.992 2.94047 13.8462 3.30769 13.8462H9.76923C10.1365 13.8462 10.4886 13.992 10.7483 14.2517C11.008 14.5114 11.1538 14.8635 11.1538 15.2308V21.6923ZM19.4615 12.9231C18.3661 12.9231 17.2953 13.2479 16.3845 13.8565C15.4737 14.465 14.7639 15.33 14.3447 16.3421C13.9255 17.3541 13.8158 18.4677 14.0295 19.542C14.2432 20.6164 14.7707 21.6033 15.5453 22.3778C16.3198 23.1524 17.3067 23.6799 18.381 23.8936C19.4554 24.1073 20.569 23.9976 21.581 23.5784C22.593 23.1592 23.458 22.4493 24.0666 21.5385C24.6752 20.6277 25 19.5569 25 18.4615C24.9984 16.9931 24.4144 15.5853 23.3761 14.547C22.3377 13.5087 20.9299 12.9247 19.4615 12.9231ZM19.4615 23.0769C18.5487 23.0769 17.6564 22.8062 16.8974 22.2991C16.1384 21.7919 15.5468 21.0711 15.1975 20.2278C14.8481 19.3844 14.7567 18.4564 14.9348 17.5611C15.1129 16.6658 15.5525 15.8434 16.198 15.198C16.8434 14.5525 17.6658 14.1129 18.5611 13.9348C19.4564 13.7567 20.3844 13.8481 21.2278 14.1975C22.0711 14.5468 22.7919 15.1384 23.2991 15.8974C23.8062 16.6564 24.0769 17.5487 24.0769 18.4615C24.0756 19.6852 23.5889 20.8584 22.7236 21.7236C21.8584 22.5889 20.6852 23.0756 19.4615 23.0769Z",fill:"black",stroke:"#131432",strokeWidth:.5})))}const U=s.forwardRef(H);i.p;var G=i(18632),W=i(42656),z=i(800),$=i(56262),Q=i(11786),Y=i(31648),_=i(30948),X=i(11499),J=i(46130),ee=i(30052),te=i(56696),ie=i(14626),se=i(19953),le=i(5045),ne=(i(57276),i(51582));const ae=[{isNew:!0,key:c().uniqueId(),gridOperation:1,stopType:"1",displaySequence:1},{isNew:!0,key:c().uniqueId(),gridOperation:1,stopType:"2",displaySequence:2}],oe=e=>{let{setShipmentDetails:t,shipmentDetailsForm:i,isPartialSave:n}=e;const m=(0,l.I0)(),{selectedCompany:f}=(0,l.v9)((e=>e.auth)),{getMilageByStops:j,branchAddress:g}=(0,l.v9)((e=>e.shipment)),[b,S]=(0,s.useState)(ae),{pathname:N}=(0,u.TH)(),w=(0,s.useMemo)((()=>(0,x.F)(N)),[N]),{t:D}=(0,v.$G)([w,"translation"]),[I,F]=(0,s.useState)(!1),[T,k]=(0,s.useState)(!1),[P,L]=(0,s.useState)(!1),O=async(e,i)=>{try{if(null!==e&&void 0!==e&&e.searchId){m((0,h.ef)(!0));const{data:t}=await(0,le.Yu)({searchId:null===e||void 0===e?void 0:e.searchId,customerKey:null===f||void 0===f?void 0:f.companyId});m((0,h.ef)(!1)),0===(null===t||void 0===t?void 0:t.length)&&(k(i),L(!0))}else k(i),L(!0);let s=c().cloneDeep(b);s[i]={...e,isNew:!0,transportationType:e.stopType},s[i].isNew=!1,s=(0,X.xE)(s,i),s=(0,X.wi)(s,i),S(s),t((e=>({...e,transportationList:s})))}catch(s){m((0,h.ef)(!1)),console.log(s)}},B=e=>{let i=c().cloneDeep(b);i.splice(e,1),(0,X.qj)(i),i=(0,X.xE)(i,e),S(i),t((e=>({...e,transportationList:i}))),m((0,p.sR3)(!1))},V=()=>{F(!1),k(!1)},R=e=>{k(e),F(!0)};(0,s.useEffect)((()=>()=>{m((0,p.$6Q)({totalMilageInMiles:0,totalMilageInKm:0}))}),[]);const K=a.Z.useWatch("branchKey",i),E=a.Z.useWatch("shipmentType",i),q=(0,M.Z)("IsBranchDetailsChange");(0,s.useEffect)((()=>{K&&!0===q&&m((0,p.MrM)({branchKey:K,handleSuccess:H}))}),[K,q]),(0,s.useEffect)((()=>{E&&!0===q&&H()}),[E,q]),(0,s.useEffect)((()=>{H(!1,!0)}),[f]);const H=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e||(null===g||void 0===g?void 0:g.data);if(i&&["I","O"].includes(E)&&!t){let e={key:c().uniqueId(),displaySequence:1,gridOperation:1,editMode:!0,isNew:!0,address1:"".concat(null===i||void 0===i?void 0:i.branchAddr1,", ").concat(null===i||void 0===i?void 0:i.branchAddr2),city:null===i||void 0===i?void 0:i.branchCity,stateCode:null===i||void 0===i?void 0:i.branchState,countryCode:null===i||void 0===i?void 0:i.countryCode,countryName:null===i||void 0===i?void 0:i.countryName,searchId:null===i||void 0===i?void 0:i.searchId,zipCode:null===i||void 0===i?void 0:i.branchZip,stopType:"I"===E?"2":"1"},t=(0,d.cloneDeep)(ae);t["I"===E?1:0]=e,S(t)}else S(ae)},U=(0,ne.Z)();return(0,A.jsxs)("div",{children:[(0,A.jsxs)(o.Z,{className:"align-items-center mb-15",justify:"space-between",children:[(0,A.jsx)(r.Z,{children:(0,A.jsxs)(o.Z,{gutter:30,className:"align-items-center",children:[(0,A.jsx)(r.Z,{children:(0,A.jsxs)(o.Z,{align:"middle",gutter:4,children:[(0,A.jsx)(r.Z,{className:"lh-0",children:(0,A.jsx)(Z.Z,{Icon:$.r})}),(0,A.jsx)(r.Z,{children:(0,A.jsxs)(o.Z,{children:[(0,A.jsx)(r.Z,{sm:24,className:"lh-12",children:(0,A.jsx)(y.Z,{className:"lh-12",children:D("translation:default.fields.pickUp")})}),(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(C.Z,{normal:!0,children:(0,A.jsx)(_.h3,{value:String("0"+(0,X.G$)("1",b)),displayType:"text",isNumericString:!0})})})]})})]})}),(0,A.jsx)(r.Z,{children:(0,A.jsxs)(o.Z,{align:"middle",gutter:4,children:[(0,A.jsx)(r.Z,{className:"lh-0",children:(0,A.jsx)(Z.Z,{Icon:Q.r})}),(0,A.jsx)(r.Z,{children:(0,A.jsxs)(o.Z,{children:[(0,A.jsx)(r.Z,{sm:24,className:"lh-12",children:(0,A.jsx)(y.Z,{className:"lh-12",children:D("translation:shipmentAdd.transportationDetails.delivery")})}),(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(C.Z,{normal:!0,children:(0,A.jsx)(_.h3,{value:String("0"+(0,X.G$)("2",b)),displayType:"text",isNumericString:!0})})})]})})]})}),(0,A.jsx)(r.Z,{children:(0,A.jsxs)(o.Z,{align:"middle",gutter:4,children:[(0,A.jsx)(r.Z,{className:"lh-0",children:(0,A.jsx)(Z.Z,{Icon:Y.r})}),(0,A.jsx)(r.Z,{children:(0,A.jsxs)(o.Z,{children:[(0,A.jsx)(r.Z,{sm:24,className:"lh-12",children:(0,A.jsx)(y.Z,{className:"lh-12",children:D("translation:shipmentAdd.transportationDetails.totalMiles")})}),(0,A.jsx)(r.Z,{sm:24,children:(0,A.jsx)(C.Z,{normal:!0,children:(0,A.jsx)(_.h3,{thousandSeparator:!0,thousandsGroupStyle:"lakh",value:String(null===j||void 0===j?void 0:j.totalMilageInMiles),displayType:"text",isNumericString:!0,decimalScale:2})})})]})})]})})]})}),(0,A.jsx)(r.Z,{children:(0,A.jsxs)(o.Z,{gutter:20,className:"align-items-center",children:[(0,A.jsx)(r.Z,{children:(0,A.jsx)(J.Z,{onClick:()=>{let e={Stops:(0,X.CP)(b)};m((0,p.QdK)(e))},disabled:(null===b||void 0===b?void 0:b.length)<2,loading:null===j||void 0===j?void 0:j.progressing,id:"mileage-calculator",children:D("translation:default.fields.milageCalculator")})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(J.Z,{id:"add-stops",onClick:()=>{let e=c().cloneDeep(b);e.push({isNew:!0,gridOperation:1,key:c().uniqueId(),displaySequence:(null===e||void 0===e?void 0:e.length)+1}),S(e)},disabled:!1,children:D("translation:shipmentAdd.transportationDetails.addStops")})})]})})]}),(0,A.jsx)(te.Z,{addressBookModal:I&&!1!==T,onSelectAddressBook:e=>{var t,i;let s=(0,d.cloneDeep)(b);const l=null===e||void 0===e||null===(t=e.daysOfWeek)||void 0===t?void 0:t.split("-"),n=null===e||void 0===e||null===(i=e.hoursOfOperation)||void 0===i?void 0:i.split("-");s[T]={...s[T],...e,address1:e.addr1,fromOperationDay:null===l||void 0===l?void 0:l[0],toOperationDay:null===l||void 0===l?void 0:l[1],fromOperationHours:(0,ie.RK)(null===n||void 0===n?void 0:n[0]),toOperationHours:(0,ie.RK)(null===n||void 0===n?void 0:n[1]),zipCode:null===e||void 0===e?void 0:e.zip,extension:null===e||void 0===e?void 0:e.phoneExt,stateCode:null===e||void 0===e?void 0:e.state,city:null===e||void 0===e?void 0:e.city,isNew:!0,isAddressBook:!0},S(s),V()},handleAddressBookModalClose:V}),b.map(((e,t)=>(0,A.jsx)(ee.Z,{transportationDetails:e,shadowVisible:!1,handleSubmit:O,index:t,transportationList:b,disableEditOnSubmit:!0,handleRemove:B,isLastItem:b.length===t+1,handleNewLocation:R,hideDelivery:1===(null===b||void 0===b?void 0:b.length),totalStops:null===b||void 0===b?void 0:b.length,isPartialSave:n,is12HoursFormat:U},"".concat(e.searchId,"-").concat(e.stopType)))),(0,A.jsx)(se.Z,{open:P,setOpen:L,locationData:b[T]})]})};var re=i(91082),de=(i(65634),i(6948)),ce=i(69213),ue=i(83057),me=i(8870),he=i(47766),pe=i(57114),ve=i(52425);const xe=e=>{var t;let{setShipmentDetails:i,isPartialSave:n,shipmentDetails:p}=e;const j=(0,l.I0)(),[Z]=a.Z.useForm(),{tmsSettings:b}=(0,l.v9)((e=>e.settings)),{generateShipmentNo:y}=(0,l.v9)((e=>e.shipment)),[C,S]=(0,s.useState)([]),[N,w]=(0,s.useState)(!1),{pathname:D}=(0,u.TH)(),I=(0,s.useMemo)((()=>(0,x.F)(D)),[D]),{t:F}=(0,v.$G)([I,"translation"]),[M,T]=(0,s.useState)(!1),[k,P]=(0,s.useState)(!1),[L,O]=(0,s.useState)(!1),B=(0,l.v9)((e=>e.common.notificationAPI)),V=(0,s.useMemo)((()=>{var e;let t={origin:{},destination:{}};if((null===p||void 0===p||null===(e=p.transportationList)||void 0===e?void 0:e.length)>1){let e=(0,d.filter)(p.transportationList,(e=>{let{stopType:t}=e;return 1==t}));e=(0,d.orderBy)(e,["displaySequence"],["asc"])[0];let i=(0,d.filter)(p.transportationList,(e=>{let{stopType:t}=e;return 2==t}));i=(0,d.orderBy)(i,["displaySequence"],["desc"])[0],t.origin=e,t.destination=i}return t}),[null===p||void 0===p?void 0:p.transportationList]),R=(0,s.useMemo)((()=>{var e,t,i,s;return!(null===V||void 0===V||null===(e=V.origin)||void 0===e||!e.countryCode||null===V||void 0===V||null===(t=V.destination)||void 0===t||!t.countryCode)&&("US"===(null===V||void 0===V||null===(i=V.origin)||void 0===i?void 0:i.countryCode)&&"US"===(null===V||void 0===V||null===(s=V.destination)||void 0===s?void 0:s.countryCode)?{weightUom:"LB",dimUom:"N"}:{weightUom:"KG",dimUom:"C"})}),[V]);(0,s.useEffect)((()=>{var e;if(R&&1===(null===C||void 0===C?void 0:C.length)&&null!==C&&void 0!==C&&null!==(e=C[0])&&void 0!==e&&e.isNew){let e=(0,d.cloneDeep)(C);e[0]={...e[0],...R},S(e)}}),[R]),(0,s.useEffect)((()=>{if(null!==b&&void 0!==b&&b.success){var e,t,i,s,l,n,a,o,r,u,m,h,p;const v={isNew:!0,key:c().uniqueId(),gridOperation:1,productCode:null===b||void 0===b||null===(e=b.data)||void 0===e||null===(t=e.shipmentSettings)||void 0===t?void 0:t.defaultProductCode,productDescription:null===b||void 0===b||null===(i=b.data)||void 0===i||null===(s=i.shipmentSettings)||void 0===s?void 0:s.defaultProdDesc,length:null===b||void 0===b||null===(l=b.data)||void 0===l||null===(n=l.shipmentSettings)||void 0===n?void 0:n.defaultLen,width:null===b||void 0===b||null===(a=b.data)||void 0===a||null===(o=a.shipmentSettings)||void 0===o?void 0:o.defaultWidth,height:null===b||void 0===b||null===(r=b.data)||void 0===r||null===(u=r.shipmentSettings)||void 0===u?void 0:u.defaultHeight,class:null===b||void 0===b||null===(m=b.data)||void 0===m||null===(h=m.shipmentSettings)||void 0===h?void 0:h.defaultFreightClass,palletLoadType:F("translation:default.fields.palletLoadType.optionNon"),...R||{}};if((null===C||void 0===C?void 0:C.length)>0&&null!==C&&void 0!==C&&null!==(p=C[0])&&void 0!==p&&p.isNew){let e=(0,d.cloneDeep)(C);e[0]=v,S(e)}else 0===(null===C||void 0===C?void 0:C.length)&&S([v])}}),[b]);const K=async(e,t,i)=>{try{if(e=(0,f.Hk)(e),i){var s,l,n;j((0,h.ef)(!0));let{data:i}=await(0,le.mA)({ProductCode:null===(s=e)||void 0===s?void 0:s.productCode});i=(0,f.Hk)(i),j((0,h.ef)(!1)),(null===(l=e)||void 0===l?void 0:l.productCode)===(null===(n=i)||void 0===n?void 0:n.productCode)?E(e,t):O({data:e,index:t})}else E(e,t)}catch(a){console.log(a),j((0,h.ef)(!1)),E(e,t)}},E=(e,t)=>{const s=c().cloneDeep(C);s[t]={...e,isNew:!1,key:c().uniqueId()},S(s),i((e=>({...e,productList:s})))},q=e=>{const t=c().cloneDeep(C);t.splice(e,1),S(t),i((e=>({...e,productList:t})))},H=()=>{T(!1),P(!1)},U=e=>{P(e),T(!0)},G=(0,ve.Z)("isMenuVisible");return(0,A.jsxs)(a.Z.Provider,{onFormFinish:(e,t)=>{let{forms:s}=t;if(s&&"classCalculatorForm"===e){let e=(0,d.cloneDeep)(C);for(const t in s)if(Object.hasOwnProperty.call(s,t)&&"classCalculatorForm"!==t){const i=s[t].getFieldsValue(),l=(0,d.findIndex)(e,{key:i.key});e[l]={...e[l],...i}}(async e=>{try{j((0,h.ef)(!0)),S(e.map((e=>({...e,class:"0"}))));const t=e[0];if(!t)throw"Failed to calculate freight class";await(0,f.XQ)([t]);let s=0;if(null!==t&&void 0!==t&&t.nmfcNumber){j((0,h.ef)(!0));let e={ShipmentKey:0,NMFCNumber:null===t||void 0===t?void 0:t.nmfcNumber,Weight:t.weight,Length:t.length,Width:t.width,Height:t.height,dimUOM:t.dimUom,WeightUOM:t.weightUom};const{data:i}=await(0,le.ib)(e);j((0,h.ef)(!1)),i?(s=i,(0,f.Nh)(B,{type:m.GT.SUCCESS,title:"NMFC Freight Class Calculated Successfully!"})):j((0,h.d7)({open:!0,description:"NMFC Number not found!"}))}let l=0;s>0?l=s:(l=(0,f.Ug)(t.length,t.width,t.height,t.weight,t.weightUom,t.billQty,t.billQtyUom,t.dimUom,t.cube),(0,f.Nh)(B,{type:m.GT.SUCCESS,title:F("translation:shipment.freightClassSuccessfully")}));let n=e.map((e=>({...e,class:l})));S(n),i((e=>({...e,productList:n}))),j((0,h.ef)(!1))}catch(l){var t,s;j((0,h.ef)(!1)),j((0,h.d7)({open:!0,description:"string"===typeof l?l:null!==l&&void 0!==l&&null!==(t=l.response)&&void 0!==t&&t.data?null===l||void 0===l||null===(s=l.response)||void 0===s?void 0:s.data:"Unknown error"}))}})(e)}},children:[(0,A.jsx)(a.Z,{form:Z,name:"classCalculatorForm"}),(0,A.jsxs)(o.Z,{className:"align-items-center mb-15",justify:"space-between",children:[(0,A.jsx)(r.Z,{}),(0,A.jsx)(r.Z,{children:(0,A.jsxs)(o.Z,{justify:"end",gutter:16,children:[(0,A.jsx)(r.Z,{children:(0,A.jsx)(J.Z,{onClick:()=>{var e,t,i,s,l,n,a,o,r,d,u,m;let h=c().cloneDeep(C);h=[{isNew:!0,key:c().uniqueId(),gridOperation:1,productCode:null===b||void 0===b||null===(e=b.data)||void 0===e||null===(t=e.shipmentSettings)||void 0===t?void 0:t.defaultProductCode,productDescription:null===b||void 0===b||null===(i=b.data)||void 0===i||null===(s=i.shipmentSettings)||void 0===s?void 0:s.defaultProdDesc,length:null===b||void 0===b||null===(l=b.data)||void 0===l||null===(n=l.shipmentSettings)||void 0===n?void 0:n.defaultLen,width:null===b||void 0===b||null===(a=b.data)||void 0===a||null===(o=a.shipmentSettings)||void 0===o?void 0:o.defaultWidth,height:null===b||void 0===b||null===(r=b.data)||void 0===r||null===(d=r.shipmentSettings)||void 0===d?void 0:d.defaultHeight,class:null===b||void 0===b||null===(u=b.data)||void 0===u||null===(m=u.shipmentSettings)||void 0===m?void 0:m.defaultFreightClass,palletLoadType:F("translation:default.fields.palletLoadType.optionNon"),...R||{}},...h],S(h)},id:"add-product",children:F("translation:default.buttons.addProduct")})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(J.Z,{onClick:()=>{let e=c().cloneDeep(C);e.length>0?(e=[...e,{...e[0],key:c().uniqueId()}],S(e),i((t=>({...t,productList:e})))):alert(F("translation:default.notification.emptyList"))},disabled:0===C.length,id:"copy-last-product",children:F("translation:shipmentAdd.productDetails.copyLastProduct")})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(re.Z,{placement:"bottomRight",title:F("translation:default.fields.popconfirmFreightClass"),onConfirm:()=>Z.submit(),okText:F("translation:default.options.yes"),cancelText:F("translation:default.options.no"),overlayClassName:"delete-popup-container w-auto",children:(0,A.jsx)(J.Z,{disabled:0===C.length,children:F("translation:shipment.freightClassCalculator")})})})]})})]}),(0,A.jsx)(de.Z,{addressBookModal:M&&!1!==k,onSelectAddressBook:e=>{let t=(0,d.cloneDeep)(C);t[k]={...t[k],productCode:e.productCode,productDescription:e.productDesc},S(t),H()},handleAddressBookModalClose:H}),(0,A.jsx)("div",{children:C.map(((e,t)=>(0,A.jsx)("div",{className:"mb-15",children:(0,A.jsx)(pe.Z,{index:t,productDetails:e,shadowVisible:!1,handleSubmit:K,remove:q,isNew:e.isNew,isLastItem:C.length===t+1,handleNewProductModal:U,setShipmentEditStatus:()=>{},setSelectedPackageId:w,showFreightClassCalculator:!0,isPartialSave:n,productFieldsVisibility:G})},e.key)))},JSON.stringify(R)),(0,A.jsx)("div",{className:"mt-15",children:(0,A.jsx)(g.Z,{className:"background-header px-16 py-5",children:(0,A.jsxs)(o.Z,{justify:"space-around",children:[(0,A.jsx)(r.Z,{children:(0,A.jsx)(me.Z,{reverse:!0,align:"middle",defaultValue:"0",count:(0,d.sumBy)(C,(e=>{let{weight:t}=e;return Number(t)})),label:F("translation:shipment.totalChargableWeight"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(he.Z,{})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(me.Z,{reverse:!0,align:"middle",count:(0,d.sortedUniq)(C.map((e=>{let{weightUOMDesc:t}=e;return t}))).join(", "),label:F("translation:shipment.weightUnitOfMeasure"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(he.Z,{})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(me.Z,{reverse:!0,align:"middle",defaultValue:"0",count:(0,d.sumBy)(C,(e=>{let{billQty:t}=e;return Number(t)})),label:F("translation:default.fields.billQty"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(he.Z,{})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(me.Z,{reverse:!0,align:"middle",count:(0,d.sortedUniq)(C.map((e=>{let{billQtyUOMDesc:t}=e;return t}))).join(", "),label:"Package/Billed Quantity Unit Of Measure",contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(he.Z,{})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(me.Z,{reverse:!0,align:"middle",defaultValue:"0",count:(0,d.sumBy)(C,(e=>{let{length:t}=e;return Number(t)})),label:F("translation:default.fields.length"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(he.Z,{})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(me.Z,{reverse:!0,align:"middle",defaultValue:"0",count:(0,d.sumBy)(C,(e=>{let{width:t}=e;return Number(t)})),label:F("translation:default.fields.width"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(he.Z,{})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(me.Z,{reverse:!0,align:"middle",defaultValue:"0",count:(0,d.sumBy)(C,(e=>{let{height:t}=e;return Number(t)})),label:F("translation:default.fields.height"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(he.Z,{})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(me.Z,{reverse:!0,align:"middle",count:(0,d.sortedUniq)(C.map((e=>{let{dimUOMDesc:t}=e;return t}))).join(", "),label:"DIM Unit Of Measure",contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(he.Z,{})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(me.Z,{reverse:!0,align:"middle",defaultValue:"0",count:(0,d.sumBy)(C,(e=>{let{cube:t}=e;return Number(t)})),label:F("translation:default.fields.cube.label"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})})]})})}),(0,A.jsx)(ce.Z,{packageId:N,setSelectedPackageId:w,shipmentNumber:null===y||void 0===y?void 0:y.shipmentNo}),(0,A.jsx)(ue.Z,{open:Boolean(null===L||void 0===L||null===(t=L.data)||void 0===t?void 0:t.productCode),setOpen:O,productData:null===L||void 0===L?void 0:L.data,index:null===L||void 0===L?void 0:L.index,handlePopupResponse:E})]})};var fe=i(37015),je=i(60277);const ge=e=>{let{setShipmentDetails:t,enableAutoFocus:i=!0}=e;const{pathname:n}=(0,u.TH)(),o=(0,s.useMemo)((()=>(0,x.F)(n)),[n]),{t:r}=(0,v.$G)([o,"translation"]),d=(0,l.I0)(),[c]=a.Z.useForm(),[m,p]=(0,s.useState)({shipmentNotes:"",detailNotes:""}),f=e=>{c.setFieldsValue({...m,[e]:m[e]})},j=(0,l.v9)(je.u);return(0,A.jsx)("div",{children:(0,A.jsxs)(a.Z,{form:c,onFinish:e=>{t((t=>({...t,...e}))),p(e)},onFieldsChange:()=>{j||d((0,h.Fd)(!0))},children:[(0,A.jsx)(fe.Z,{form:c,editModes:!0,title:r("translation:default.fields.shipmentNotes"),resetNote:f,inputName:"shipmentNotes",shadowVisible:!1,enableAutoFocus:i,hideEditButtons:!0,onBlur:()=>c.submit(),maxLength:"2000"}),(0,A.jsx)(fe.Z,{form:c,editModes:!0,title:r("translation:default.fields.internalNotes.label"),resetNote:f,inputName:"detailNotes",shadowVisible:!1,margin:"",enableAutoFocus:i,hideEditButtons:!0,onBlur:()=>c.submit(),maxLength:"2000"})]})})};var Ze=i(69466);const be=e=>{let{setShipmentDetails:t,isPartialSave:i}=e;const[l,n]=(0,s.useState)([{isNew:!0,key:(0,d.uniqueId)()}]),{pathname:a}=(0,u.TH)(),c=(0,s.useMemo)((()=>(0,x.F)(a)),[a]),{t:m}=(0,v.$G)([c,"translation"]),h=e=>{let i=(0,d.cloneDeep)(l);i.splice(e,1),n(i),t((e=>({...e,shipmentVendorList:i})))},p=(e,i)=>{let s=(0,d.cloneDeep)(l);s[i]={...e,isNew:!1,key:(0,d.uniqueId)()},n(s),t((e=>({...e,shipmentVendorList:s})))};return(0,A.jsxs)("div",{children:[(0,A.jsxs)(o.Z,{className:"align-items-center mb-15",justify:"space-between",children:[(0,A.jsx)(r.Z,{}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(J.Z,{onClick:()=>{n((e=>[{isNew:!0,key:(0,d.uniqueId)()},...e]))},id:"add-vendor",children:m("translation:shipmentAdd.vendorDetails.addNewVendor")})})]}),l.map(((e,t)=>(0,A.jsx)(Ze.Z,{index:t,vendorDetails:e,handleDelete:h,shadowVisible:!1,handleSubmit:p,isLastItem:l.length===t+1,isPartialSave:i},e.key)))]})};var ye=i(21325);const Ce=e=>{let{form:t}=e;const i=(0,l.I0)(),s=(0,l.v9)(je.u);return(0,A.jsx)(a.Z,{onFieldsChange:()=>{s||i((0,h.Fd)(!0))},form:t,name:"billingDetailsForm",children:(0,A.jsx)(ye.Z,{editMode:!0,form:t})})};var Se=i(74019);const Ne=e=>{let{setShipmentDetails:t,isPartialSave:i}=e;const[l,n]=(0,s.useState)([{isNew:!0,key:(0,d.uniqueId)(),gridOperation:1}]),{pathname:a}=(0,u.TH)(),c=(0,s.useMemo)((()=>(0,x.F)(a)),[a]),{t:m}=(0,v.$G)([c,"translation"]),h=e=>{let i=(0,d.cloneDeep)(l);i.splice(e,1),n(i),t((e=>({...e,shipmentCategoryInformation:i})))},p=(e,i)=>{let s=(0,d.cloneDeep)(l);s[i]={...e,isNew:!1,key:(0,d.uniqueId)()},n(s),t((e=>({...e,shipmentCategoryInformation:s})))};return(0,A.jsxs)("div",{children:[(0,A.jsxs)(o.Z,{justify:"space-between mb-15",gutter:16,align:"middle",children:[(0,A.jsx)(r.Z,{}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(J.Z,{onClick:()=>n((e=>[{isNew:!0,key:(0,d.uniqueId)(),gridOperation:1},...e])),children:m("translation:shipmentAdd.categoryDetails.addNewCategory")})})]}),l.map(((e,t)=>(0,A.jsx)(Se.Z,{categoryDetails:e,handleDelete:h,index:t,handleSubmit:p,isLastItem:l.length===t+1,isPartialSave:i},e.key)))]})};var we=i(15695),De=i(54750);const Ie=e=>{let{accountingForm:t}=e;const i=(0,l.I0)(),{selectedCompany:n}=(0,l.v9)((e=>e.auth)),{shipmentCustomerAccessorials:d}=(0,l.v9)((e=>e.shipment));(0,s.useEffect)((()=>{null!==n&&void 0!==n&&n.companyId&&i((0,p.p91)({shipmentKey:0,customerKey:null===n||void 0===n?void 0:n.companyId}))}),[n]);const c=(0,l.v9)(je.u);return(0,A.jsx)(a.Z,{name:"accountingForm",form:t,onFieldsChange:()=>{c||i((0,h.Fd)(!0))},children:(0,A.jsxs)(o.Z,{gutter:30,children:[(0,A.jsx)(r.Z,{sm:12,children:null!==d&&void 0!==d&&d.progressing?(0,A.jsx)(T.Z,{size:"large"}):(0,A.jsx)(we.Z,{form:t,accessorials:null===d||void 0===d?void 0:d.data,customHeight:"vh-40"})}),(0,A.jsx)(r.Z,{sm:12,children:(0,A.jsx)(De.Z,{form:t,customHeight:"vh-40"})})]})})};var Fe=i(77128),Me=i(40440),Te=i(56521),ke=i(82134),Pe=i(69142);const Ae=e=>{var t,i;let{shipmentTerms:n}=e;const c=(0,l.I0)(),[m]=a.Z.useForm(),{rateShopList:h}=(0,l.v9)((e=>e.shipment)),{pathname:f}=(0,u.TH)(),j=(0,s.useMemo)((()=>(0,x.F)(f)),[f]),{t:g}=(0,v.$G)([j,"translation"]),Z=e=>{let t=(0,d.cloneDeep)(h.data);t[e].isSelected=!0,c((0,p.qPx)({data:t,forceUpdate:!0}))};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(o.Z,{className:"flex-direction-column flex-nowrap",children:[(0,A.jsx)("div",{className:"w-100",children:(0,A.jsx)(Pe.Z,{cardLG:6,cardClassName:"w-18",formClassName:"",gutter:15,isAddShipment:!0,showSpotBidButton:!0,spotBidForm:m,shipmentTerms:n})}),(0,A.jsx)(Fe.Z,{className:"ml-n50 vw-100 my-16"}),(0,A.jsxs)(o.Z,{justify:"space-between",align:"middle",children:[(0,A.jsx)(r.Z,{children:(0,A.jsx)(C.Z,{className:"fw-700 f-18",children:g("translation:shipmentAdd.rateShopDetails.rateShopDetails")})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(J.Z,{onClick:()=>{var e;return(0,Me.SH)((null===h||void 0===h||null===(e=h.data)||void 0===e?void 0:e.length)>0?null===h||void 0===h?void 0:h.data:[])},children:g("translation:default.buttons.exportToExcel")})})]}),(0,A.jsx)(Fe.Z,{className:"ml-n50 vw-100 my-16"}),(0,A.jsx)("div",{children:h.progressing?(0,A.jsx)("div",{className:"py-40",children:(0,A.jsx)(T.Z,{size:"large"})}):(0,A.jsx)(A.Fragment,{children:(null===h||void 0===h||null===(t=h.data)||void 0===t?void 0:t.length)>0?(0,A.jsx)("div",{className:"overflow-hidden d-flex flex-direction-column",style:{maxHeight:"40vh",heigh:"100%"},children:(0,A.jsx)("div",{className:"flex-1 custom-scroll-bar",children:null===h||void 0===h||null===(i=h.data)||void 0===i?void 0:i.map(((e,t)=>{var i;return(0,A.jsx)(ke.Z,{rateShopDetails:e,handleRateShopSelection:Z,index:t,value:!(null===e||void 0===e||!e.isSelected)&&t,isRateShop:!0,isLast:(null===h||void 0===h||null===(i=h.data)||void 0===i?void 0:i.length)===t+1},t)}))})}):(0,A.jsx)(Te.Z,{descriptionTwo:g("translation:default.emptyRecords.descriptionTwo"),title:h.error?g("translation:shipmentAdd.rateShopDetails.emptyRecords.title"):void 0})})})]}),(0,A.jsx)(a.Z,{name:"spotBidForm",form:m})]})};var Le=i(74699),Oe=i(72330);const Be=e=>{let{setShipmentDetails:t,isPartialSave:i}=e;const[l,n]=(0,s.useState)([{renderKey:(0,d.uniqueId)(),isNew:!0}]),{pathname:a}=(0,u.TH)(),c=(0,s.useMemo)((()=>(0,x.F)(a)),[a]),{t:h}=(0,v.$G)([c,"translation"]),p=async e=>{let t=(0,d.cloneDeep)(l);t.splice(e,1),n(t)},f=(0,s.useMemo)((()=>(0,d.remove)(l.map((e=>{let{fileType:t}=e;return t||!1})),(e=>Boolean(e)))),[l]),j=(0,Oe.Z)(m.mS.SHIPMENT);(0,s.useEffect)((()=>{t&&t((e=>({...e,documentList:l})))}),[l,t]);const g=(e,t,i)=>{let s=(0,d.cloneDeep)(l);s[i]={...s[i],...e};const a=new FileReader;a.readAsDataURL(t),a.onload=()=>{s[i].fileBase64=a.result,n(s)}};return(0,A.jsxs)("div",{className:"d-flex h-100 flex-direction-column",style:{maxHeight:"40vh"},children:[(0,A.jsxs)(o.Z,{className:"mb-15",justify:"space-between",gutter:16,align:"middle",children:[(0,A.jsx)(r.Z,{}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(J.Z,{onClick:()=>{let e=(0,d.cloneDeep)(l);e=[{renderKey:(0,d.uniqueId)(),isNew:!0},...e],n(e)},children:h("translation:default.documentManager.addNewFile")})})]}),(0,A.jsx)("div",{className:"flex-1 custom-scroll-bar",children:l.map(((e,t)=>(0,A.jsx)(Le.Z,{fileDetails:e,handleDelete:p,handleSaveForAddNewScreen:g,isNew:e.isNew,index:t,uploadedDocumentTypes:f,allowedExtentions:j,isPartialSave:i},e.renderKey)))})]})},Ve=e=>{let{form:t,setShipmentDetails:i,shipmentDetailsForm:n,billingDetailsForm:d,activeKey:c,setActiveKey:m,accountingForm:p,isPartialSave:f,shipmentDetails:j}=e;const g=(0,l.I0)(),{tmsSettings:b}=(0,l.v9)((e=>e.settings)),{pathname:y}=(0,u.TH)(),C=(0,s.useMemo)((()=>(0,x.F)(y)),[y]),{t:S}=(0,v.$G)([C,"translation"]),N=(0,ve.Z)("isMenuVisible"),w=e=>{let{title:t,Icon:i,size:s=25}=e;return(0,A.jsxs)(o.Z,{gutter:10,align:"middle",children:[(0,A.jsx)(r.Z,{className:"lh-0",children:(0,A.jsx)(Z.Z,{width:s,height:s,Icon:i})}),(0,A.jsx)(r.Z,{className:"lh-0",children:(0,A.jsx)("label",{className:"lh-0 text-dark cursor-pointer",children:t})})]})};(0,s.useEffect)((()=>{var e,t,i,s,l,a,o,r,d,c;null!==b&&void 0!==b&&b.success&&n.setFieldsValue({branchKey:0==(null===b||void 0===b||null===(e=b.data)||void 0===e||null===(t=e.shipmentSettings)||void 0===t?void 0:t.defaultBranchKey)?void 0:Number(null===b||void 0===b||null===(i=b.data)||void 0===i||null===(s=i.shipmentSettings)||void 0===s?void 0:s.defaultBranchKey),shipmentType:null===b||void 0===b||null===(l=b.data)||void 0===l||null===(a=l.shipmentSettings)||void 0===a?void 0:a.defaultShipmentType,shipmentTerms:null===b||void 0===b||null===(o=b.data)||void 0===o||null===(r=o.shipmentSettings)||void 0===r?void 0:r.defaultShipmentTerms,incoCode:null===b||void 0===b||null===(d=b.data)||void 0===d||null===(c=d.shipmentSettings)||void 0===c?void 0:c.defaultIncoTerm})}),[b]);const D=(0,M.Z)("IsCategoryVisible"),I=(0,M.Z)("IsBillToVisible"),F=(0,M.Z)("IsVendorVisible"),T=(0,l.v9)(je.u),k=a.Z.useWatch("shipmentTerms",n);return(0,A.jsx)(z.Z,{forceRender:!0,handleTabClick:e=>m(e),activeKey:c,tabs:[{tabKey:"1",content:(0,A.jsx)(a.Z,{initialValues:{status:"New"},form:n,name:"shipmentDetailsForm",onFieldsChange:()=>{T||g((0,h.Fd)(!0))},children:(0,A.jsx)(L,{form:n,isPartialSave:f})}),header:(0,A.jsx)(w,{title:S("translation:shipmentAdd.titles.details"),Icon:B.r,size:25})},{tabKey:"2",content:(0,A.jsx)(oe,{form:t,setShipmentDetails:i,isPartialSave:f,shipmentDetailsForm:n,shipmentDetails:j}),header:(0,A.jsx)(w,{title:S("translation:shipmentAdd.titles.transportation"),Icon:V.r,size:25})},{tabKey:"3",content:(0,A.jsx)(xe,{setShipmentDetails:i,isPartialSave:f,shipmentDetails:j}),header:(0,A.jsx)(w,{title:S("translation:default.fields.productDetails"),Icon:R.r,size:25})},{tabKey:"4",content:(0,A.jsx)(Ae,{setShipmentDetails:i,shipmentTerms:k}),header:(0,A.jsx)(w,{title:S("translation:default.buttons.rateShop"),Icon:R.r,size:25})},{tabKey:"5",content:(0,A.jsx)(ge,{setShipmentDetails:i,enableAutoFocus:!1}),header:(0,A.jsx)(w,{title:S("translation:default.fields.notes"),Icon:E.r,size:25})},{tabKey:"11",content:(0,A.jsx)(Be,{setShipmentDetails:i,isPartialSave:f}),header:(0,A.jsx)(w,{title:S("translation:default.documentManager.title"),Icon:W.r,size:25})},...F?[{tabKey:"6",content:(0,A.jsx)(be,{setShipmentDetails:i,isPartialSave:f}),header:(0,A.jsx)(w,{title:S("translation:shipmentAdd.titles.vendor"),Icon:K.r,size:25})}]:[],...I?[{tabKey:"7",content:(0,A.jsx)(Ce,{form:d}),header:(0,A.jsx)(w,{title:S("translation:shipmentAdd.titles.bill"),Icon:G.r,size:25})}]:[],...D?[{tabKey:"8",content:(0,A.jsx)(Ne,{setShipmentDetails:i,isPartialSave:f}),header:(0,A.jsx)(w,{title:S("translation:shipmentAdd.titles.category"),Icon:U,size:25})}]:[],...N?[{tabKey:"10",content:(0,A.jsx)(Ie,{accountingForm:p}),header:(0,A.jsx)(w,{title:S("translation:shipmentAdd.titles.accounting"),Icon:G.r,size:25})}]:[]]})};var Re=i(38111),Ke=(i(75450),i(22370)),Ee=i(9682),qe=i(90165),He=(i(30822),i(99660)),Ue=i(97114);const Ge=()=>{const e=(0,s.useRef)(null),[t,i]=(0,s.useState)(["1","2","3","4","5","6","7","8","9","10","11"]),{generateShipmentNo:n,rateShopList:c,generateApprovalNo:j,createShipment:Z}=(0,l.v9)((e=>e.shipment)),[C,S]=(0,s.useState)(!1),{selectedCompany:N,user:w}=(0,l.v9)((e=>e.auth)),D=(0,l.v9)((e=>e.common.notificationAPI)),[I,F]=(0,s.useState)({}),[P,L]=(0,s.useState)(!1),[O]=a.Z.useForm(),[B]=a.Z.useForm(),[V]=a.Z.useForm(),[R]=a.Z.useForm(),K=(0,l.I0)(),E=(0,u.s0)(),{shipmentBranches:q}=(0,l.v9)((e=>e.lookups)),{pathname:H}=(0,u.TH)(),U=(0,s.useMemo)((()=>(0,x.F)(H)),[H]),{t:G}=(0,v.$G)([U,"translation"]),W=(0,M.Z)("ApprovalNumber"),z=(0,M.Z)("ShipmentNumber"),$=((0,M.Z)("IsCategoryVisible"),(0,M.Z)("IsBillToVisible")),Q=((0,M.Z)("IsVendorVisible"),(0,M.Z)("IsPartialSave")),Y=a.Z.useWatch("isPartialSave",O),[_,J]=(0,s.useState)(!1),[ee,te]=(0,s.useState)({});(0,s.useEffect)((()=>{K((0,p.mkX)())}),[]),(0,s.useEffect)((()=>{null!==e&&void 0!==e&&e.current&&setTimeout((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.current)&&void 0!==t&&t.scrollTo&&e.current.scrollTo(0,0)}),500)}),[e]);const ie=()=>{var e;K((0,h.Fd)(!1)),L(!1),"SP"===(null===(e=(0,d.find)(null===c||void 0===c?void 0:c.data,{isSelected:!0}))||void 0===e?void 0:e.cargoType)&&2===I.transportationList.length?S(!0):setTimeout((()=>{E(He.QY.SHIPMENT)}),500)},se=async function(){var e,t;let s=arguments.length>0&&void 0!==arguments[0]&&arguments[0],l=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,o=(0,d.cloneDeep)(I);o.masterShipment=a.initialForm.getFieldValue("masterShipment"),o.action="1",o.shipmentKey=0,o.shipmentNo=n.shipmentNo,o.approvalNumber=j.approvalNo,o.customerKey=N.companyId,o.accessorials=[],o.taxes=[];if(!await ne(B)&&!Y)return i("1"),!1;if(o.additionalDetails={...B.getFieldsValue(),shipmentNotes:o.shipmentNotes,detailNotes:o.detailNotes},(null===I||void 0===I||!I.transportationList||(null===I||void 0===I||null===(e=I.transportationList)||void 0===e?void 0:e.length)<2)&&!Y)return i("2"),(0,f.Nh)(D,{type:m.GT.ERROR,title:G("translation:shipmentAdd.notifications.pickupDeliveryLocations")}),!1;if(0===(0,d.filter)(null===I||void 0===I?void 0:I.transportationList,{stopType:"1"}).length&&!Y)return i("2"),(0,f.Nh)(D,{type:m.GT.ERROR,title:G("translation:shipmentAdd.notifications.pickupLocation")}),!1;if(0===(0,d.filter)(null===I||void 0===I?void 0:I.transportationList,{stopType:"2"}).length&&!Y)return i("2"),(0,f.Nh)(D,{type:m.GT.ERROR,title:G("translation:shipmentAdd.notifications.minimumDeliveryLocation")}),!1;if((null===I||void 0===I||!I.productList||0===(null===I||void 0===I||null===(t=I.productList)||void 0===t?void 0:t.length))&&!Y)return i("3"),(0,f.Nh)(D,{type:m.GT.ERROR,title:G("translation:shipmentAdd.notifications.productRequired")}),!1;if(!1===s){if(!await ne(V))return i("7"),!1;o.shipmentBillToInfo=$?{...V.getFieldsValue()}:{}}if(!await ne(R)&&!Y)return i("10"),(0,f.Nh)(D,{type:m.GT.ERROR,title:G("translation:shipmentAdd.notifications.fixAccountingSection")}),!1;{var r,u;let e=null===(r=R.getFieldsValue())||void 0===r?void 0:r.accessorials;o.accessorials=(0,d.filter)(e,{isChecked:!0}),o.taxes=null===(u=R.getFieldsValue())||void 0===u?void 0:u.taxes}if(!1!==s)return o;{var v,x,g;o.shipmentRateShopInformation=(0,X.KK)(null===c||void 0===c?void 0:c.data,null===I||void 0===I||null===(v=I.data)||void 0===v?void 0:v.customerKey,null===(x=(0,d.find)(null===c||void 0===c?void 0:c.data,{isSelected:!0}))||void 0===x?void 0:x.carrierKey),o.documentList&&(o.documentList=(0,d.filter)(o.documentList,(e=>{let{fileBase64:t}=e;return t})));let e=(0,X.gi)(o);K((0,h.ef)(!0)),e.handleSuccess="spotBidForm"===l?()=>{L(!0)}:ie,e.isPartialSave=Boolean(Y);const t=null===a||void 0===a||null===(g=a.rateShopFilterForm)||void 0===g?void 0:g.getFieldsValue();e.shipmentInformationRequest.carrierRequirements=t.carrierRequirements,e.shipmentInformationRequest.requiredCarrierKey=t.requiredCarrierKey,e.shipmentInformationRequest.trailerKey=t.trailerKey,e.shipmentInformationRequest.serviceKey=t.serviceKey,"saveButtonForm"===l&&!Y&&"C"===String(e.shipmentInformationRequest.shipmentTerms).trim()&&t.collectShipmentCarrier?(e.collectShipmentCarrier=t.collectShipmentCarrier,K((0,h.ef)(!1)),te(e),J(!0)):K((0,p.j6l)(e))}},le=e=>()=>{K((0,h.ef)(!0)),ee.isCollectBol=e,e&&(ee.shipmentInformationRequest.requiredCarrierKey=ee.collectShipmentCarrier,ee.shipmentInformationRequest.carrierKey=ee.collectShipmentCarrier),delete ee.collectShipmentCarrier,K((0,p.j6l)(ee))},ne=async e=>{try{return await e.validateFields(),!0}catch(t){return!1}},ae=()=>{S(!1),E(He.QY.SHIPMENT)};(0,s.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("userInfo"));if(N&&e){if(!0===z){let t={CustomerKey:N.companyId,UserId:e.id};K((0,h.ef)(!0)),K((0,p.Tu1)(t))}if(!0===W){let t={UserId:e.id};K((0,h.ef)(!0)),K((0,p.Lyr)(t))}}return()=>{K((0,p.PsD)({shipmentNo:!1,error:!1,success:!1})),K((0,p.eS0)({approvalNo:!1,error:!1,success:!1}))}}),[N,W,z]),(0,s.useEffect)((()=>{!(null!==n&&void 0!==n&&n.success||null!==n&&void 0!==n&&n.error)||null!==n&&void 0!==n&&n.progressing||K((0,h.ef)(!1))}),[n]),(0,s.useEffect)((()=>{!(null!==j&&void 0!==j&&j.success||null!==j&&void 0!==j&&j.error)||null!==j&&void 0!==j&&j.progressing||K((0,h.ef)(!1))}),[j]),(0,s.useEffect)((()=>{!(null!==n&&void 0!==n&&n.success||null!==n&&void 0!==n&&n.error)||null!==n&&void 0!==n&&n.progressing||n.shipmentNo&&O&&(O.setFieldsValue({shipmentNo:n.shipmentNo}),F({...I,shipmentNo:n.shipmentNo}))}),[n,O]),(0,s.useEffect)((()=>{!(null!==j&&void 0!==j&&j.success||null!==j&&void 0!==j&&j.error)||null!==j&&void 0!==j&&j.progressing||j.approvalNo&&O&&(O.setFieldsValue({approvalNumber:j.approvalNo}),F({...I,approvalNumber:j.approvalNo}))}),[j,O]);const oe=(0,M.Z)("IsMasterShipmentCheckbox"),re=a.Z.useWatch("masterShipment",O),de=a.Z.useWatch("shipmentNo",O),ce=a.Z.useWatch("approvalNumber",O);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(a.Z.Provider,{className:"overflow-hidden h-100",onFormFinish:async(e,t)=>{let{values:s,forms:l}=t;try{if("rateShopFilterForm"===e){var n;s.cargoType=null===s||void 0===s||null===(n=s.cargoType)||void 0===n?void 0:n.join(",");const e=l.rateShopFilterForm.getFieldsValue();let t=await se(!0,"rateShopFilterForm",l);if(t){let l=null!==t&&void 0!==t&&t.accessorials?null===t||void 0===t?void 0:t.accessorials:[];const n=(0,d.find)(q.data,{branchKey:t.additionalDetails.branchKey}),a=(0,X.Tg)(l,{...t,...t.additionalDetails},s,null!==n&&void 0!==n&&n.currencyCode?null===n||void 0===n?void 0:n.currencyCode:"**",e.isAPIRateShop);a.isAPIRateShop=e.isAPIRateShop,K((0,p.yHj)(a)),i("4")}}else"saveButtonForm"!==e&&"spotBidForm"!==e||se(!1,e,l)}catch(a){console.log(a)}},children:(0,A.jsxs)(o.Z,{className:"flex-direction-column flex-nowrap overflow-hidden h-100",children:[(0,A.jsx)(r.Z,{className:"mb-15",children:(0,A.jsx)(g.Z,{className:"p-15 border-radius-bottom-none",children:(0,A.jsxs)(o.Z,{align:"middle",justify:"space-between",children:[(0,A.jsx)(r.Z,{children:(0,A.jsxs)(a.Z,{name:"initialForm",form:O,children:[(0,A.jsxs)(o.Z,{gutter:15,children:[(0,A.jsxs)(r.Z,{children:["PROGRESSING"===W?(0,A.jsx)(r.Z,{sm:24,className:"text-center",children:(0,A.jsx)(T.Z,{})}):(0,A.jsxs)(A.Fragment,{children:[z&&(0,A.jsxs)(r.Z,{children:[(0,A.jsxs)(y.Z,{children:[G("translation:default.fields.shipmentNo")," "]}),(0,A.jsx)(k.Z,{className:"f-14 fw-600",children:de})]}),W&&(0,A.jsxs)(r.Z,{children:[(0,A.jsxs)(y.Z,{children:[G("translation:shipmentAdd.shipmentScreen.approvalNumber")," "]}),(0,A.jsx)(k.Z,{className:"f-14 fw-600",children:ce})]})]}),(0,A.jsx)(b.Z,{name:"shipmentNo"}),(0,A.jsx)(b.Z,{name:"approvalNumber"})]}),!0===oe&&(0,A.jsxs)(r.Z,{children:[(0,A.jsx)(y.Z,{className:"mr-5",children:G("translation:shipmentAdd.shipmentScreen.masterShipment")}),(0,A.jsx)(qe.Z,{checked:re,checkedChildren:G("translation:default.options.yes"),unCheckedChildren:G("translation:default.options.no"),onClick:()=>O.setFieldValue("masterShipment",!re)}),(0,A.jsx)(b.Z,{name:"masterShipment"})]})]}),(0,A.jsx)(b.Z,{name:"isPartialSave"})]})}),(0,A.jsx)(r.Z,{children:(0,A.jsxs)(o.Z,{align:"middle",gutter:15,children:["PROGRESSING"===Q?(0,A.jsx)(r.Z,{children:(0,A.jsx)(T.Z,{})}):(0,A.jsx)(A.Fragment,{children:Q?(0,A.jsxs)(r.Z,{children:[(0,A.jsx)(y.Z,{className:"mr-5",children:"".concat(G("translation:shipment.saveAsPartial"),":")}),(0,A.jsx)(qe.Z,{checked:Y,checkedChildren:G("translation:default.options.yes"),unCheckedChildren:G("translation:default.options.no"),onClick:()=>O.setFieldValue("isPartialSave",!Y)})]}):(0,A.jsx)(A.Fragment,{})}),(0,A.jsx)(r.Z,{children:(0,A.jsx)(a.Z,{name:"saveButtonForm",children:(0,A.jsx)(Re.Z,{onCancel:()=>E(-1),idSuffix:"shipment"})})})]})})]})})}),(0,A.jsx)(r.Z,{className:"flex-1 custom-scroll-bar",ref:e,children:(0,A.jsx)(Ve,{form:O,setShipmentDetails:F,shipmentDetailsForm:B,billingDetailsForm:V,activeKey:t,setActiveKey:i,accountingForm:R,isPartialSave:Boolean(Y),shipmentDetails:I})})]})}),(0,A.jsx)(Ee.Z,{title:(0,A.jsx)("span",{className:"ml-10",children:G("translation:default.fields.spotBid")}),open:P,className:"w-80",contentClassName:"p-30",customFooter:(0,A.jsx)(A.Fragment,{}),onClose:()=>L(!1),children:(0,A.jsx)(Ke.Z,{handleSpotBidSuccess:ie,submitSpotBidButtonContainerClassName:"pb-15"})}),(0,A.jsx)(Ue.Z,{onOk:le(1),onCancel:le(0),onClose:()=>J(!1),open:_,description:"You have been selected Collect shipment terms for a Carrier without any cost! Would you like to proceed with closing this shipment?",title:G("translation:default.fields.alert"),okText:"Yes",cancelText:"No"}),(0,A.jsx)(Ee.Z,{className:"w-auto h-auto",open:C,title:"Parcel API Rate",okText:"Yes",cancelText:"No",onCancel:ae,onClose:ae,onOk:()=>{S(!1),K((0,h.Ll)(!1)),E("".concat(He.QY.SHIPMENT_PARCEL_EXPRESS,"/").concat(null===Z||void 0===Z?void 0:Z.data))},contentClassName:"py-10 px-20",children:(0,A.jsxs)(k.Z,{className:"f-18 ",children:["You have selected a parcel transportation provider. ",(0,A.jsx)("br",{}),"Do you want to rate this shipment against the provider's API?"]})})]})},We=()=>{const{pathname:e}=(0,u.TH)(),t=(0,s.useMemo)((()=>(0,x.F)(e)),[e]),{t:i}=(0,v.$G)([t,"translation"]),{auth:{},shipment:{}}=(0,l.v9)((e=>e));return(0,A.jsx)(n.Z,{contentElement:(0,A.jsx)(Ge,{})})}}}]);
//# sourceMappingURL=5515.e6c186e5.chunk.js.map