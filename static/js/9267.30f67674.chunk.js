"use strict";(self.webpackChunknvision_TMS=self.webpackChunknvision_TMS||[]).push([[9267],{11984:(e,t,l)=>{l.d(t,{r:()=>s});var a,o,n=l(72791);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},i.apply(this,arguments)}function r(e,t){let{title:l,titleId:r,...s}=e;return n.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},s),l?n.createElement("title",{id:r},l):null,a||(a=n.createElement("path",{d:"M7.41417 12.4472C7.49102 12.5241 7.58226 12.5851 7.68267 12.6266C7.78308 12.6682 7.8907 12.6897 7.99938 12.6897C8.10806 12.6897 8.21568 12.6682 8.31609 12.6266C8.4165 12.5851 8.50774 12.5241 8.58459 12.4472L11.7056 9.32624C11.8608 9.17104 11.948 8.96054 11.948 8.74105C11.948 8.52156 11.8608 8.31106 11.7056 8.15586C11.5504 8.00066 11.3399 7.91347 11.1204 7.91347C10.9009 7.91347 10.6904 8.00066 10.5352 8.15586L8.82697 9.8641V0.827586C8.82697 0.608097 8.73977 0.397597 8.58457 0.242394C8.42937 0.0871919 8.21887 0 7.99938 0C7.77989 0 7.56939 0.0871919 7.41419 0.242394C7.25899 0.397597 7.17179 0.608097 7.17179 0.827586V9.8641L5.46355 8.15586C5.30835 8.00066 5.09785 7.91347 4.87836 7.91347C4.65887 7.91347 4.44838 8.00066 4.29317 8.15586C4.13797 8.31106 4.05078 8.52156 4.05078 8.74105C4.05078 8.96054 4.13797 9.17104 4.29317 9.32624L7.41417 12.4472Z",fill:"#006697"})),o||(o=n.createElement("path",{d:"M15.1724 7.17241C14.9529 7.17241 14.7424 7.2596 14.5872 7.4148C14.432 7.57001 14.3448 7.78051 14.3448 8V14.3448H1.65517V8C1.65517 7.78051 1.56798 7.57001 1.41278 7.4148C1.25758 7.2596 1.04708 7.17241 0.827586 7.17241C0.608097 7.17241 0.397597 7.2596 0.242394 7.4148C0.0871919 7.57001 0 7.78051 0 8V14.6207C0 14.9865 0.14532 15.3373 0.403991 15.596C0.662661 15.8547 1.01349 16 1.37931 16H14.6207C14.9865 16 15.3373 15.8547 15.596 15.596C15.8547 15.3373 16 14.9865 16 14.6207V8C16 7.78051 15.9128 7.57001 15.7576 7.4148C15.6024 7.2596 15.3919 7.17241 15.1724 7.17241Z",fill:"#006697"})))}const s=n.forwardRef(r);l.p},99979:(e,t,l)=>{l.d(t,{r:()=>s});var a,o,n=l(72791);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},i.apply(this,arguments)}function r(e,t){let{title:l,titleId:r,...s}=e;return n.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},s),l?n.createElement("title",{id:r},l):null,a||(a=n.createElement("g",{clipPath:"url(#clip0_6073_113183)"},n.createElement("path",{d:"M9.88087 2.68736L1.07744 11.4914C1.03315 11.5358 1.00117 11.5919 0.985939 11.6522L0.0101637 15.5688C-0.0190245 15.6867 0.0156207 15.812 0.101663 15.8981C0.166765 15.9632 0.255472 15.9992 0.346209 15.9992C0.374002 15.9992 0.402428 15.9958 0.430094 15.9888L4.34665 15.0129C4.40769 14.9977 4.46315 14.9658 4.50744 14.9216L13.3116 6.11812L9.88087 2.68736Z",fill:"#006697"}),n.createElement("path",{d:"M15.4924 1.48697L14.5124 0.507003C13.8574 -0.147956 12.7159 -0.147321 12.0617 0.507003L10.8613 1.7074L14.292 5.13803L15.4924 3.93764C15.8195 3.6106 15.9997 3.17532 15.9997 2.71236C15.9997 2.24941 15.8195 1.81413 15.4924 1.48697Z",fill:"#006697"}))),o||(o=n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_6073_113183"},n.createElement("rect",{width:16,height:16,fill:"white"})))))}const s=n.forwardRef(r);l.p},81160:(e,t,l)=>{l.d(t,{Z:()=>n});var a=l(94433),o=(l(72791),l(80184));const n=e=>{let{title:t,children:l,labelClass:n=!1,textClass:i,childClassName:r}=e;return(0,o.jsxs)("div",{className:"field-card-container ".concat(i),children:[(0,o.jsx)(a.Z.Text,{className:"field-card-title ".concat(n),children:t}),(0,o.jsx)("div",{className:"content ".concat(r),children:l})]})}},82166:(e,t,l)=>{l.r(t),l.d(t,{default:()=>k});var a=l(72791),o=l(29128),n=l(48490),i=l(66106),r=l(30914),s=l(95048),d=l(16871),c=l(9835),m=l(51708),u=l(14626),p=l(67766),v=l(81160),j=l(66319),h=l(38111),f=l(28478),x=l(20114),g=l(99678),b=l(63046),Z=l(800),D=l(14611),T=l(98580),C=l(88858),F=l(76174),N=l(39230),y=l(60914),S=l(38841),w=l(47970),P=l(80184);function M(e){let{form:t}=e;const l=(0,s.I0)(),[o,n]=(0,a.useState)([]),[c,u]=(0,a.useState)([]),[p,v]=(0,a.useState)([]),{pathname:j}=(0,d.TH)(),h=(0,a.useMemo)((()=>(0,y.F)(j)),[j]),{t:f}=(0,N.$G)([h,"translation"]),{selectedCompany:x,user:{data:g}}=(0,s.v9)((e=>e.auth)),[b,Z]=(0,a.useState)(!1),{userProcurement:D,checkProjectName:M,projectCopy:L}=(0,s.v9)((e=>e.procurementProject));(0,a.useEffect)((()=>{t.setFieldsValue({projectID:0})}),[]),(0,a.useEffect)((()=>{const e=null===L||void 0===L?void 0:L.data;var l,a,o,n,i,r;e&&Object.keys(e).length&&(t.setFieldsValue({...e,projectID:0,projectTechnicalSupportList:null!==(l=null===(a=e.projectTechnicalSupportList)||void 0===a?void 0:a.map((e=>e.value)))&&void 0!==l?l:[],projectSupportList:null!==(o=null===(n=e.projectSupportList)||void 0===n?void 0:n.map((e=>e.value)))&&void 0!==o?o:[],projectLeadList:null!==(i=null===(r=e.projectLeadList)||void 0===r?void 0:r.map((e=>e.value)))&&void 0!==i?i:[]}),Z(!0))}),[L]),(0,a.useEffect)((()=>{null!==D&&void 0!==D&&D.success||l((0,m.Rq)({userType:null===g||void 0===g?void 0:g.userType}))}),[]),(0,a.useEffect)((()=>{const e=e=>{var t,l;return null===D||void 0===D||null===(t=D.data)||void 0===t||null===(l=t[e])||void 0===l?void 0:l.map((e=>{let{userName:t,email:l,userId:a}=e;return{label:"".concat(t," (").concat(l,")"),value:a+""}}))};n(e("22")),u(e("23")),v(e("21")),t.setFieldsValue({isActive:!0}),t.setFieldsValue({isApproved:!1})}),[null===D||void 0===D?void 0:D.success]);return(0,P.jsx)(i.Z,{children:(0,P.jsxs)(r.Z,{sm:24,children:[(0,P.jsxs)(i.Z,{className:"mb-15",children:[(0,P.jsxs)(r.Z,{sm:6,className:"pr-15",children:[(0,P.jsx)(w.Z,{name:"projectID"}),(0,P.jsx)(T.Z,{editMode:!0,label:f("translation:default.fields.projectName.label"),placeholder:f("translation:default.fields.projectName.label"),name:"projectName",validateTrigger:"onBlur",rules:[{required:!0,message:f("translation:procurement.projectCard.message")},{validator:async(e,l)=>{const a=l;if(!a)return;const o=new Date,n=o.getFullYear(),i=o.getMonth()+1,r=null===x||void 0===x?void 0:x.companyId;try{const e=await(0,S.tE)({ProjectName:a});if(null!==e&&void 0!==e&&e.data){const e="".concat(a,"/").concat(r,"/").concat(n,"/").concat(i);return t.setFieldsValue({actualProjectName:e}),Promise.resolve()}throw t.setFieldsValue({actualProjectName:""}),new Error(f("translation:default.fields.projectName.messageExist"))}catch(s){return Promise.reject(s)}}}]})]}),(0,P.jsx)(r.Z,{sm:6,className:"pr-15",children:(0,P.jsx)(C.Z,{loading:!1,options:[{label:f("translation:procurement.fields.projectStatus.true"),value:!0},{label:f("translation:procurement.fields.projectStatus.false"),value:!1}],placeholder:f("translation:default.buttons.select"),label:f("translation:procurement.fields.projectStatus.label"),rules:[{required:!0,message:f("translation:procurement.fields.projectStatus.message")}],name:"isActive",editMode:!1,disabled:b})}),(0,P.jsx)(r.Z,{sm:6,children:(0,P.jsx)(C.Z,{loading:!1,options:p,placeholder:f("translation:default.buttons.select"),label:f("translation:procurement.fields.projectLead.label"),rules:[{required:!0,message:f("translation:procurement.fields.projectLead.message")}],name:"projectLeadList",editMode:!0,className:"pr-15",mode:"multiple"})}),(0,P.jsx)(r.Z,{sm:6,children:(0,P.jsx)(C.Z,{loading:!1,options:c,placeholder:f("translation:default.buttons.select"),label:f("translation:procurement.fields.tecLead.label"),rules:[{required:!0,message:f("translation:procurement.fields.tecLead.message")}],name:"projectTechnicalSupportList",editMode:!0,mode:"multiple"})})]}),(0,P.jsxs)(i.Z,{className:"mb-15",children:[(0,P.jsx)(r.Z,{sm:6,children:(0,P.jsx)(T.Z,{loading:!1,placeholder:f("translation:default.fields.projectName.label"),label:f("translation:procurement.fields.actualName.label"),rules:[],name:"actualProjectName",editMode:!0,className:"pr-15",disabled:!0})}),(0,P.jsx)(r.Z,{sm:6,children:(0,P.jsx)(C.Z,{loading:!1,options:[{label:f("translation:default.options.yes"),value:!0},{label:f("translation:default.options.no"),value:!1}],placeholder:f("translation:procurement.fields.projectApproved.label"),label:f("translation:procurement.fields.projectApproved.label"),rules:[{required:!0,message:f("translation:procurement.fields.projectApproved.message")}],name:"isApproved",editMode:!1,className:"pr-15",disabled:b})}),(0,P.jsx)(r.Z,{sm:6,children:(0,P.jsx)(C.Z,{loading:!1,options:o,placeholder:f("translation:default.buttons.select"),label:f("translation:procurement.fields.projectSupport.label"),rules:[{required:!0,message:f("translation:procurement.fields.projectSupport.message")}],name:"projectSupportList",editMode:!0,className:"pr-15",mode:"multiple"})})]}),(0,P.jsx)(i.Z,{className:"mb-15",children:(0,P.jsx)(r.Z,{sm:6,children:(0,P.jsx)(F.Z,{name:"description",label:f("translation:default.fields.description"),placeholder:f("translation:default.buttons.select"),editMode:!0,rows:2,enableAutoFocus:!1,fillHeight:!0,className:"pr-15",rules:[{required:!0,message:f("translation:procurement.fields.description.message")}]})})})]})})}var L=l(92679),I=l(79398),E=l(93835),q=l(72426),A=l.n(q);function R(e){let{form:t}=e;const{projectCopy:l}=(0,s.v9)((e=>e.procurementProject)),o=n.Z.useWatch("startDate",t),c=n.Z.useWatch("preparationFromDate",t),m=n.Z.useWatch("preparationToDate",t),p=n.Z.useWatch("bidCollcetionFromDate",t),j=n.Z.useWatch("bidcollectionToDate",t),h=n.Z.useWatch("selectionFromDate",t),f=n.Z.useWatch("selectionToDate",t),{pathname:x}=(0,d.TH)(),g=(0,a.useMemo)((()=>(0,y.F)(x)),[x]),{t:b}=(0,N.$G)([g,"translation"]);return(0,a.useEffect)((()=>{t.setFieldsValue({startDate:A()(),preparationFromDate:A()().add(1,"days"),preparationToDate:A()().add(10,"days"),bidCollcetionFromDate:A()().add(11,"days"),bidcollectionToDate:A()().add(21,"days"),selectionFromDate:A()().add(22,"days"),selectionToDate:A()().add(32,"days"),endDate:A()().add(42,"days")})}),[]),(0,a.useEffect)((()=>{var e,a,o,n,i,r,s,d,c,m,p,v,j,h,f,x;null!==l&&void 0!==l&&l.data&&Object.keys(null===l||void 0===l?void 0:l.data).length>0&&t.setFieldsValue({startDate:(0,u.vw)(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.startDate),startTime:(0,u.vw)(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.startDate),endDate:(0,u.vw)(null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.endDate),endTime:(0,u.RK)(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.endTime),preparationFromDate:(0,u.vw)(null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.preparationFrom),preparationToDate:(0,u.vw)(null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.preparationTo),bidCollcetionFromDate:(0,u.vw)(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.bidCollcetionFrom),bidcollectionToDate:(0,u.vw)(null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.bidcollectionTo),selectionFromDate:(0,u.vw)(null===l||void 0===l||null===(c=l.data)||void 0===c?void 0:c.selectionFrom),selectionFromTime:(0,u.RK)(null===l||void 0===l||null===(m=l.data)||void 0===m?void 0:m.selectionFrom),selectionToTime:(0,u.RK)(null===l||void 0===l||null===(p=l.data)||void 0===p?void 0:p.selectionTo),selectionToDate:(0,u.vw)(null===l||void 0===l||null===(v=l.data)||void 0===v?void 0:v.selectionTo),preparationFromTime:(0,u.RK)(null===l||void 0===l||null===(j=l.data)||void 0===j?void 0:j.preparationFrom),bidcollectionToTime:(0,u.RK)(null===l||void 0===l||null===(h=l.data)||void 0===h?void 0:h.bidcollectionTo),bidCollcetionFromTime:(0,u.RK)(null===l||void 0===l||null===(f=l.data)||void 0===f?void 0:f.bidCollcetionFrom),preparationToTime:(0,u.RK)(null===l||void 0===l||null===(x=l.data)||void 0===x?void 0:x.preparationTo)})}),[l]),(0,P.jsx)(i.Z,{children:(0,P.jsxs)(r.Z,{sm:24,children:[(0,P.jsxs)(i.Z,{children:[(0,P.jsx)(r.Z,{sm:5,children:(0,P.jsx)(v.Z,{title:b("translation:procurement.fields.projectLead.label"),labelClass:"project-milestone-label"})}),(0,P.jsx)(r.Z,{sm:5,children:(0,P.jsx)(v.Z,{title:b("translation:procurement.projectCard.preparationFiles"),labelClass:"project-milestone-label"})}),(0,P.jsx)(r.Z,{sm:5,children:(0,P.jsx)(v.Z,{title:b("translation:procurement.projectCard.bidCollectionPhase"),labelClass:"project-milestone-label"})}),(0,P.jsx)(r.Z,{sm:5,children:(0,P.jsx)(v.Z,{title:b("translation:procurement.projectCard.selectionPhase"),labelClass:"project-milestone-label"})}),(0,P.jsx)(r.Z,{sm:4,children:(0,P.jsx)(v.Z,{title:b("translation:procurement.fields.date.endDate"),labelClass:"project-milestone-label"})})]}),(0,P.jsxs)(i.Z,{className:"mt-15",children:[(0,P.jsxs)(r.Z,{sm:5,children:[(0,P.jsx)(E.Z,{className:"form-input-label",children:b("translation:procurement.fields.date.startDateTime")}),(0,P.jsxs)("div",{className:"d-flex gap-1",children:[(0,P.jsx)(L.Z,{placeholder:b("translation:procurement.fields.date.placeholder"),margin:"mb-0",name:"startDate",disabledTargetDate:c,rules:[{required:!0,message:"Please enter the Start Date"}]}),(0,P.jsx)(I.Z,{colon:!0,editMode:!0,singleLineMode:!1,name:"startDate",margin:"m-0",rules:[{required:!0,message:"Please enter the Start Time"}]})]})]}),(0,P.jsxs)(r.Z,{sm:5,children:[(0,P.jsx)(E.Z,{className:"form-input-label",children:b("translation:procurement.fields.date.startDateTime")}),(0,P.jsxs)("div",{className:"d-flex gap-1",children:[(0,P.jsx)(L.Z,{placeholder:b("translation:procurement.fields.date.placeholder"),margin:"mb-0",name:"preparationFromDate",disabledTargetDate:o,rules:[{required:!0,message:"Please enter the Preparation From Date"}]}),(0,P.jsx)(I.Z,{colon:!0,editMode:!0,singleLineMode:!1,name:"preparationFromDate",margin:"m-0",rules:[{required:!0,message:"Please enter the Preparation From Time"}]})]})]}),(0,P.jsxs)(r.Z,{sm:5,children:[(0,P.jsx)(E.Z,{className:"form-input-label",children:b("translation:procurement.fields.date.startDateTime")}),(0,P.jsxs)("div",{className:"d-flex gap-1",children:[(0,P.jsx)(L.Z,{placeholder:b("translation:procurement.fields.date.placeholder"),margin:"mb-0",name:"bidCollcetionFromDate",disabledTargetDate:m,rules:[{required:!0,message:"Please enter the Start Date Time"}]}),(0,P.jsx)(I.Z,{colon:!0,editMode:!0,singleLineMode:!1,name:"bidCollcetionFromDate",margin:"m-0",rules:[{required:!0,message:"Please enter the Start Date Time"}]})]})]}),(0,P.jsxs)(r.Z,{sm:5,children:[(0,P.jsx)(E.Z,{className:"form-input-label",children:b("translation:procurement.fields.date.startDateTime")}),(0,P.jsxs)("div",{className:"d-flex gap-1",children:[(0,P.jsx)(L.Z,{placeholder:b("translation:procurement.fields.date.placeholder"),margin:"mb-0",name:"selectionFromDate",disabledTargetDate:j,rules:[{required:!0,message:"Please enter the Start Date Time"}]}),(0,P.jsx)(I.Z,{colon:!0,editMode:!0,singleLineMode:!1,name:"selectionFromDate",margin:"m-0",rules:[{required:!0,message:"Please enter the Start Date Time"}]})]})]}),(0,P.jsxs)(r.Z,{sm:4,children:[(0,P.jsx)(E.Z,{className:"form-input-label",children:b("translation:procurement.fields.date.endDateAndTime")}),(0,P.jsxs)("div",{className:"d-flex gap-1",children:[(0,P.jsx)(L.Z,{placeholder:b("translation:procurement.fields.date.placeholder"),margin:"mb-0",name:"endDate",disabledTargetDate:f,rules:[{required:!0,message:"Please enter the Start Date Time"}]}),(0,P.jsx)(I.Z,{colon:!0,editMode:!0,singleLineMode:!1,name:"endDate",margin:"m-0",rules:[{required:!0,message:"Please enter the Start Date Time"}]})]})]})]}),(0,P.jsxs)(i.Z,{className:"mt-15",children:[(0,P.jsx)(r.Z,{sm:5}),(0,P.jsxs)(r.Z,{sm:5,children:[(0,P.jsx)(E.Z,{className:"form-input-label",children:b("translation:procurement.fields.date.endDateAndTime")}),(0,P.jsxs)("div",{className:"d-flex gap-1",children:[(0,P.jsx)(L.Z,{placeholder:b("translation:procurement.fields.date.placeholder"),margin:"mb-0",name:"preparationToDate",disabledTargetDate:c,rules:[{required:!0,message:"Please enter the Start Date Time"}]}),(0,P.jsx)(I.Z,{colon:!0,editMode:!0,singleLineMode:!1,name:"preparationToDate",margin:"m-0",rules:[{required:!0,message:"Please enter the Start Date Time"}]})]})]}),(0,P.jsxs)(r.Z,{sm:5,children:[(0,P.jsx)(E.Z,{className:"form-input-label",children:b("translation:procurement.fields.date.endDateAndTime")}),(0,P.jsxs)("div",{className:"d-flex gap-1",children:[(0,P.jsx)(L.Z,{placeholder:b("translation:procurement.fields.date.placeholder"),margin:"mb-0",name:"bidcollectionToDate",disabledTargetDate:p,rules:[{required:!0,message:"Please enter the Start Date Time"}]}),(0,P.jsx)(I.Z,{colon:!0,editMode:!0,singleLineMode:!1,name:"bidcollectionToDate",margin:"m-0",rules:[{required:!0,message:"Please enter the Start Date Time"}]})]})]}),(0,P.jsxs)(r.Z,{sm:5,children:[(0,P.jsx)(E.Z,{className:"form-input-label",children:b("translation:procurement.fields.date.endDateAndTime")}),(0,P.jsxs)("div",{className:"d-flex gap-1",children:[(0,P.jsx)(L.Z,{placeholder:b("translation:procurement.fields.date.placeholder"),margin:"mb-0",name:"selectionToDate",disabledTargetDate:h,rules:[{required:!0,message:"Please enter the Start Date Time"}]}),(0,P.jsx)(I.Z,{colon:!0,editMode:!0,singleLineMode:!1,name:"selectionToDate",margin:"m-0",rules:[{required:!0,message:"Please enter the Start Date Time"}]})]})]}),(0,P.jsx)(r.Z,{sm:4})]})]})})}const V=e=>{let{projectDetailsForm:t,mileStoneForm:l,documentForm:o,activeKey:s,setActiveKey:c}=e;const{pathname:m}=(0,d.TH)(),u=(0,a.useMemo)((()=>(0,y.F)(m)),[m]),{t:p}=(0,N.$G)([u,"translation"]),v=e=>{let{title:t,Icon:l,size:a=25}=e;return(0,P.jsxs)(i.Z,{gutter:10,align:"middle",children:[(0,P.jsx)(r.Z,{className:"lh-0",children:(0,P.jsx)(f.Z,{width:a,height:a,Icon:l})}),(0,P.jsx)(r.Z,{className:"lh-0",children:(0,P.jsx)("label",{className:"lh-0 text-dark cursor-pointer",children:t})})]})};return(0,P.jsx)(Z.Z,{forceRender:!0,handleTabClick:e=>c(e),activeKey:s,tabs:[{content:(0,P.jsx)(n.Z,{form:t,name:"projectDetailsForm",children:(0,P.jsx)(M,{form:t})}),header:(0,P.jsx)(v,{title:p("translation:procurement.projectTabs.projectDetails"),Icon:x.r,size:25})},{content:(0,P.jsx)(n.Z,{form:l,name:"mileStoneForm",children:(0,P.jsx)(R,{form:l})}),header:(0,P.jsx)(v,{title:p("translation:procurement.projectCard.mileStones"),Icon:g.r,size:25})},{content:(0,P.jsx)(n.Z,{form:o,name:"documentForm",children:(0,P.jsx)(D.Z,{form:o})}),header:(0,P.jsx)(v,{title:p("translation:default.documentManager.title"),Icon:b.r,size:25})}]})};var K=l(48740);const O=function(){const[e]=n.Z.useForm(),[t]=n.Z.useForm(),[l]=n.Z.useForm(),[o]=n.Z.useForm(),f=(0,s.I0)(),x=(0,d.s0)(),{projectCopy:g,userProcurement:b,createUpdateProject:Z}=(0,s.v9)((e=>e.procurementProject)),[D,T]=(0,a.useState)(["1","2","3"]),C=(0,s.v9)((e=>e.common.notificationAPI)),{pathname:F}=(0,d.TH)(),S=(0,a.useMemo)((()=>(0,y.F)(F)),[F]),{t:w}=(0,N.$G)([S,"translation"]);return(0,a.useEffect)((()=>{var e,t;"Failed"===(null===Z||void 0===Z||null===(e=Z.data)||void 0===e?void 0:e.result)?(f((0,K.ef)(!1)),(0,p.Nh)(C,{type:c.GT.ERROR,title:null===Z||void 0===Z||null===(t=Z.data)||void 0===t?void 0:t.message})):!0===Z.success&&(f((0,K.ef)(!1)),(0,p.Nh)(C,{type:c.GT.SUCCESS,title:w("translation:procurement.projectCard.notificationSuccess")}),f((0,m.c0)()),x(-1));!0===(null===Z||void 0===Z?void 0:Z.error)&&(f((0,K.ef)(!1)),(0,p.Nh)(C,{type:c.GT.ERROR,title:w("translation:procurement.projectCard.notificationError")}),f((0,m.c0)()))}),[Z]),(0,P.jsx)(n.Z.Provider,{className:"overflow-hidden h-100",onFormFinish:async(e,a)=>{let{forms:n}=a;if("saveButtonForm"===e){var i,r,s,d,c,v;try{const e=[(0,p.np)(n.projectDetailsForm,"projectDetailsForm"),(0,p.np)(n.mileStoneForm,"mileStoneForm")];await Promise.all(e)}catch(j){return void console.log(j)}const e={...t.getFieldValue()},a={...o.getFieldValue()},h={...l.getFieldValue()},x=null===e||void 0===e||null===(i=e.projectLeadList)||void 0===i||null===(r=i.toString())||void 0===r?void 0:r.split(","),g=null===e||void 0===e||null===(s=e.projectSupportList)||void 0===s||null===(d=s.toString())||void 0===d?void 0:d.split(","),b=null===e||void 0===e||null===(c=e.projectTechnicalSupportList)||void 0===c||null===(v=c.toString())||void 0===v?void 0:v.split(","),Z=e=>(0,u.Ol)(h[e]),D={projectID:(null===e||void 0===e?void 0:e.projectID)||0,projectName:(null===e||void 0===e?void 0:e.projectName)||"",description:(null===e||void 0===e?void 0:e.description)||"",isActive:(null===e||void 0===e?void 0:e.isActive)||!1,isApproved:(null===e||void 0===e?void 0:e.isApproved)||!1,projectLeadList:x,projectSupportList:g,projectTechnicalSupportList:b,startDate:Z("startDate"),preparationFrom:Z("preparationFromDate"),preparationTo:Z("preparationToDate"),bidCollcetionFrom:Z("bidCollcetionFromDate"),bidcollectionTo:Z("bidcollectionToDate"),selectionFrom:Z("selectionFromDate"),selectionTo:Z("selectionToDate"),endDate:Z("endDate"),projectDocumentInformation:[...null===a||void 0===a?void 0:a.documents]};f((0,K.ef)(!0)),f((0,m.mW)(D))}},children:(0,P.jsxs)(i.Z,{className:"flex-direction-column flex-nowrap overflow-hidden h-100",children:[(0,P.jsx)(r.Z,{className:"mb-15",children:(0,P.jsx)(j.Z,{className:"p-15 border-radius-bottom-none",children:(0,P.jsxs)(i.Z,{align:"middle",justify:"space-between",children:[(0,P.jsx)(r.Z,{children:(0,P.jsx)(n.Z,{form:e,children:(0,P.jsx)(v.Z,{title:"Create Project"})})}),(0,P.jsx)(r.Z,{children:(0,P.jsx)(n.Z,{name:"saveButtonForm",children:(0,P.jsx)(h.Z,{onSave:()=>{},onCancel:()=>x(-1)})})})]})})}),(0,P.jsx)(r.Z,{className:"flex-1 custom-scroll-bar",children:(0,P.jsx)(V,{form:e,projectDetailsForm:t,mileStoneForm:l,documentForm:o,activeKey:D,setActiveKey:T})})]})})};const k=function(){return(0,P.jsx)(o.Z,{contentElement:(0,P.jsx)(O,{})})}},48673:(e,t,l)=>{l.d(t,{Z:()=>F});var a=l(72791),o=(l(98580),l(11984)),n=l(99979),i=l(9135),r=l(48490),s=l(36473),d=l(87309),c=l(91082),m=l(66106),u=l(30914),p=l(81160),v=l(37859),j=l.n(v),h=l(47970),f=l(3223),x=l(9835),g=l(76174),b=l(74028),Z=l(16871),D=l(39230),T=l(60914),C=l(80184);function F(e){let{props:t,isNew:l,fileDetails:v,handleSave:F,handleDelete:N,index:y,allowedExtentions:S,editRecord:w,handleResetValueAction:P=(()=>{}),isProjectUpload:M=!1,renderKey:L=null}=e;const[I]=r.Z.useForm(),[E,q]=(0,a.useState)(!1),A=r.Z.useWatch("file",I),{pathname:R}=(0,Z.TH)(),V=(0,a.useMemo)((()=>(0,T.F)(R)),[R]),{t:K}=(0,D.$G)([V,"translation"]),[O,k]=(0,a.useState)(Boolean(v.isNew));(0,a.useEffect)((()=>{k(Boolean(v.isNew))}),[v.isNew]);return(0,C.jsxs)(r.Z,{form:I,name:"fileupdate",onFinish:e=>{const t=new FormData;if(t.append("ProjectID",v.projectID),t.append("TenderID",(null===v||void 0===v?void 0:v.tenderID)||""),t.append("DocType",e.docTypeCode?e.docTypeCode:""),t.append("FileComment",e.documentTitle?e.documentTitle:""),E&&t.append("File",E),!1===l&&t.append("DocumentID",null===v||void 0===v?void 0:v.documentID),M)if(E){let a=new FileReader;a.readAsDataURL(E),a.onload=function(o){let n={documentID:(null===v||void 0===v?void 0:v.documentID)||0,projectID:v.projectID||0,tenderID:(null===v||void 0===v?void 0:v.tenderID)||0,documentPath:a.result.substr(o.target.result.indexOf(",")+1),documentName:E.name||"",docType:e.docTypeCode?e.docTypeCode:"",comments:e.documentTitle?e.documentTitle:"",fileExtension:(null===E||void 0===E?void 0:E.extension)||"",renderKey:L};F(t,l,n)}}else{let a={documentID:(null===v||void 0===v?void 0:v.documentID)||0,projectID:v.projectID||0,tenderID:(null===v||void 0===v?void 0:v.tenderID)||0,documentPath:(null===v||void 0===v?void 0:v.documentPath)||"",documentName:v.documentName||"",docType:e.docTypeCode?e.docTypeCode:"",comments:e.documentTitle?e.documentTitle:"",renderKey:L};F(t,l,a)}else F(t,l,y)},initialValues:v,initialValues:null!==v&&void 0!==v&&v.fileGuid?{docTypeCode:null===v||void 0===v?void 0:v.docType,documentTitle:null===v||void 0===v?void 0:v.comments,documentDesc:null===v||void 0===v?void 0:v.fileDescription,file:null===v||void 0===v?void 0:v.file}:{},children:[(0,C.jsx)(s.Z,{title:(0,C.jsxs)("div",{className:"d-flex gap-1 ".concat(!1===(null===v||void 0===v?void 0:v.isUpdate)?"align-items-center":""),children:[!1===(null===v||void 0===v?void 0:v.isUpdate)&&(0,C.jsx)(a.Fragment,{children:(0,C.jsxs)(p.Z,{title:K("translation:default.fields.fileName"),textClass:"d-flex align-items-center gap-1 justify-content-center",childClassName:"d-flex align-item-start",children:[(0,C.jsx)(h.Z,{name:"file",rules:[{required:!0,message:K("translation:default.documentManager.chooseFileMessage")}]}),(0,C.jsx)("label",{className:"f-14 fw-600",children:A})]})}),(null===v||void 0===v?void 0:v.isUpdate)&&S&&(0,C.jsxs)(a.Fragment,{children:[(0,C.jsxs)(p.Z,{title:K("translation:default.fields.fileName"),textClass:"d-flex align-items-center gap-1",children:[(0,C.jsx)(j(),{className:"files-dropzone",onChange:e=>{try{e.length>0&&(q(e[0]),I.setFieldsValue({file:e[0].name}))}catch(t){console.log(t)}},onError:e=>{try{e&&I.setFields([{name:"file",errors:[e.message]}])}catch(e){console.log(e)}},accepts:S,multiple:!1,minFileSize:0,clickable:!0,children:(0,C.jsx)(d.ZP,{className:"auction-btn w-100 border-radion-5 white-font",children:K("translation:default.documentManager.chooseFile")})}),(0,C.jsx)(h.Z,{name:"file",rules:[{required:!0,message:K("translation:default.documentManager.chooseFileMessage")},()=>({validator(e,t){if(!t)return Promise.resolve();let l=t.match(/\.([^.]+)$/)[1];return l=".".concat(l),S.includes(l)?Promise.resolve():S.includes(l)?void 0:Promise.reject(new Error("".concat(K("translation:default.documentManager.only")," ").concat(S.join(",")," ").concat(K("translation:default.documentManager.filesAreAllowed")," ")))}})]})]}),(0,C.jsx)("label",{className:"f-14 fw-600",children:A})]})]}),className:"mb-15 paper-container visibility-file-card procurement-file-upload",extra:(0,C.jsxs)("div",{className:"d-flex gap-1",children:[(null===v||void 0===v?void 0:v.isUpdate)&&(0,C.jsx)(a.Fragment,{children:(0,C.jsx)(b.Z,{primaryBtnType:"button",setEditMode:k,editMode:O,onSave:()=>I.submit(),onCancel:()=>{P(y,v.isNew)}})}),!(null!==v&&void 0!==v&&v.isUpdate)&&(0,C.jsxs)(a.Fragment,{children:[!1===M&&(0,C.jsx)(o.r,{className:"cursor-pointer",onClick:()=>{var e;return window.location.assign(null===v||void 0===v||null===(e=v.cloudUrl)||void 0===e?void 0:e[0])}}),(0,C.jsx)(n.r,{onClick:()=>w(y),className:"cursor-pointer"}),(0,C.jsx)(c.Z,{placement:"topRight",title:"Are you sure to delete?",onConfirm:()=>N(v,y),okText:"Yes",cancelText:"Cancel",overlayClassName:"",children:(0,C.jsx)(i.r,{className:"cursor-pointer"})})]})]}),children:(0,C.jsxs)(m.Z,{children:[(0,C.jsx)(u.Z,{sm:8,className:"pr-15",children:(0,C.jsx)(f.Z,{editMode:(null===v||void 0===v?void 0:v.isUpdate)||!1,margin:"mb-16",name:"docTypeCode",moduleId:x.mS.SHIPMENT,onChange:e=>{let{label:t}=e;return I.setFieldsValue({documentDesc:t})}})}),(0,C.jsx)(u.Z,{sm:16,className:"pr-15",children:(0,C.jsx)(g.Z,{label:K("translation:default.documentManager.fileComments.label"),editMode:null===v||void 0===v?void 0:v.isUpdate,margin:"mb-0",name:"documentTitle",placeholder:"Description",enableAutoFocus:!1,rows:null!==v&&void 0!==v&&v.isUpdate?4:1,maxLength:500})})]})}),(0,C.jsx)(h.Z,{name:"documentDesc"})]})}}}]);
//# sourceMappingURL=9267.30f67674.chunk.js.map