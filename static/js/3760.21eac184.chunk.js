"use strict";(self.webpackChunknvision_TMS=self.webpackChunknvision_TMS||[]).push([[3760],{99979:(e,t,l)=>{l.d(t,{r:()=>d});var a,i,n=l(72791);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},s.apply(this,arguments)}function o(e,t){let{title:l,titleId:o,...d}=e;return n.createElement("svg",s({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},d),l?n.createElement("title",{id:o},l):null,a||(a=n.createElement("g",{clipPath:"url(#clip0_6073_113183)"},n.createElement("path",{d:"M9.88087 2.68736L1.07744 11.4914C1.03315 11.5358 1.00117 11.5919 0.985939 11.6522L0.0101637 15.5688C-0.0190245 15.6867 0.0156207 15.812 0.101663 15.8981C0.166765 15.9632 0.255472 15.9992 0.346209 15.9992C0.374002 15.9992 0.402428 15.9958 0.430094 15.9888L4.34665 15.0129C4.40769 14.9977 4.46315 14.9658 4.50744 14.9216L13.3116 6.11812L9.88087 2.68736Z",fill:"#006697"}),n.createElement("path",{d:"M15.4924 1.48697L14.5124 0.507003C13.8574 -0.147956 12.7159 -0.147321 12.0617 0.507003L10.8613 1.7074L14.292 5.13803L15.4924 3.93764C15.8195 3.6106 15.9997 3.17532 15.9997 2.71236C15.9997 2.24941 15.8195 1.81413 15.4924 1.48697Z",fill:"#006697"}))),i||(i=n.createElement("defs",null,n.createElement("clipPath",{id:"clip0_6073_113183"},n.createElement("rect",{width:16,height:16,fill:"white"})))))}const d=n.forwardRef(o);l.p},74219:(e,t,l)=>{l.d(t,{Z:()=>d});var a=l(72791),i=l(5045),n=l(88858),s=l(68825),o=l(80184);const d=e=>{let{placeholder:t=s.ZP.t("translation:default.fields.appointmentType.placeholder"),label:l=s.ZP.t("translation:default.fields.appointmentType.label"),rules:d=[],name:r,editMode:c}=e;const[u,m]=(0,a.useState)([]),[p,h]=(0,a.useState)(!1);(0,a.useEffect)((()=>{v()}),[]);const v=async()=>{try{h(!0);const{data:e}=await(0,i.ek)();let t=e.map((e=>({label:e.text,value:e.value})));m(t),h(!1)}catch(e){console.log(e),m([]),h(!1)}};return(0,o.jsx)(n.Z,{loading:p,options:u,placeholder:t,label:l,margin:"mb-0",rules:d,name:r,editMode:c})}},84832:(e,t,l)=>{l.d(t,{Z:()=>s});l(72791),l(95048),l(53298),l(5814);var a=l(88858),i=l(68825),n=l(80184);const s=e=>{let{placeholder:t=i.ZP.t("translation:default.fields.shipperName.placeholder"),label:l=i.ZP.t("translation:default.fields.shipperName.label"),rules:s=[],name:o,editMode:d,margin:r,singleLineMode:c,loading:u,options:m,onChange:p}=e,h=[];const v=m||[];return h="consigneeName"===o?v.map((e=>({label:e.consigneeName,value:e.consigneeZip,data:e,address:e.consigneeAddr1}))):v.map((e=>({label:e.name,value:e.vendorAddressKey,data:e,address:e.address}))),(0,n.jsx)(a.Z,{placeholder:t,loading:u,options:h,label:l,rules:s,name:o,editMode:d,margin:r,singleLineMode:c,onChange:p})}},13760:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Re});var a,i,n,s,o,d,r,c=l(72791),u=l(48490),m=l(66106),p=l(30914),h=l(95048),v=l(98580),f=l(66319),g=l(93835),x=l(84446),y=l(46130),j=l(35762);function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},Z.apply(this,arguments)}function b(e,t){let{title:l,titleId:u,...m}=e;return c.createElement("svg",Z({width:24,height:23,viewBox:"0 0 24 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":u},m),l?c.createElement("title",{id:u},l):null,a||(a=c.createElement("path",{d:"M12.5505 10.8916L12.2692 10.6455C12.2589 10.6363 12.2441 10.6341 12.2315 10.6399C12.219 10.6456 12.2109 10.6581 12.2109 10.6719V10.7774H12.1901C11.9641 10.7774 11.7697 10.946 11.7377 11.1698L11.7191 11.2998C11.7168 11.3162 11.7262 11.3321 11.7419 11.3378C11.7458 11.3392 11.7499 11.3399 11.7539 11.3399C11.7657 11.3399 11.7772 11.3339 11.7837 11.3233L11.8355 11.2404C11.9067 11.1266 12.0293 11.0586 12.1635 11.0586H12.2109V11.1641C12.2109 11.1779 12.219 11.1904 12.2315 11.1961C12.244 11.2018 12.2588 11.1997 12.2692 11.1905L12.5505 10.9444C12.5581 10.9377 12.5625 10.9282 12.5625 10.918C12.5625 10.9078 12.5581 10.8982 12.5505 10.8916ZM12.2812 11.0866V11.0235C12.2812 11.0041 12.2655 10.9883 12.2461 10.9883H12.1635C12.0257 10.9883 11.8983 11.0489 11.8121 11.153C11.85 10.9772 12.008 10.8477 12.1901 10.8477H12.2461C12.2655 10.8477 12.2812 10.8319 12.2812 10.8125V10.7494L12.474 10.918L12.2812 11.0866Z",fill:"black"})),i||(i=c.createElement("path",{d:"M1.84615 0C1.62175 2.24149e-05 1.40654 0.0891777 1.24786 0.247858C1.08918 0.406537 1.00002 0.621747 1 0.846154V19.4615C1.00002 19.6859 1.08918 19.9012 1.24786 20.0598C1.40654 20.2185 1.62175 20.3077 1.84615 20.3077H7.40073C7.51286 20.3093 7.62418 20.2886 7.72823 20.2468C7.83228 20.2049 7.92698 20.1429 8.00683 20.0641C8.08668 19.9854 8.15009 19.8916 8.19337 19.7881C8.23664 19.6847 8.25893 19.5737 8.25893 19.4615C8.25893 19.3494 8.23664 19.2384 8.19337 19.1349C8.15009 19.0315 8.08668 18.9377 8.00683 18.8589C7.92698 18.7802 7.83228 18.7181 7.72823 18.6763C7.62418 18.6345 7.51286 18.6138 7.40073 18.6154H2.69231V1.69231H19.6154V6.89813C19.6138 7.01026 19.6345 7.12158 19.6763 7.22563C19.7181 7.32968 19.7802 7.42438 19.8589 7.50423C19.9377 7.58408 20.0315 7.64749 20.1349 7.69077C20.2384 7.73405 20.3494 7.75633 20.4615 7.75633C20.5737 7.75633 20.6847 7.73405 20.7881 7.69077C20.8916 7.64749 20.9854 7.58408 21.0641 7.50423C21.1429 7.42438 21.2049 7.32968 21.2468 7.22563C21.2886 7.12158 21.3093 7.01026 21.3077 6.89813V0.846154C21.3077 0.621747 21.2185 0.406537 21.0598 0.247858C20.9012 0.0891777 20.6859 2.24149e-05 20.4615 0H1.84615Z",fill:"black"})),n||(n=c.createElement("path",{d:"M18.5504 8.93912C18.3306 8.94263 18.1208 9.03154 17.9653 9.18702L10.1863 16.966C10.0277 17.1247 9.9385 17.3399 9.93848 17.5643V21.1538C9.9385 21.3782 10.0277 21.5934 10.1863 21.7521C10.345 21.9108 10.5602 22 10.7846 22H14.3758C14.6002 21.9999 14.8154 21.9108 14.974 21.7521L22.7514 13.9747C22.8302 13.8961 22.8927 13.8027 22.9353 13.6999C22.978 13.5971 22.9999 13.4869 22.9999 13.3756C22.9999 13.2644 22.978 13.1541 22.9353 13.0513C22.8927 12.9485 22.8302 12.8552 22.7514 12.7766L19.1618 9.18702C19.0817 9.10686 18.9863 9.04361 18.8812 9.00103C18.7762 8.95845 18.6637 8.9374 18.5504 8.93912V8.93912ZM18.5639 10.9818L20.9569 13.3748L14.0241 20.3077H11.6311V17.9146L18.5639 10.9818Z",fill:"black"})),s||(s=c.createElement("path",{d:"M8.62696 5.92307H17.065C18.2092 5.93923 18.2092 4.21457 17.065 4.23077H8.62696C8.14998 4.224 7.76176 4.61312 7.76921 5.08496C7.77767 5.55681 8.1603 5.92946 8.62696 5.92307V5.92307Z",fill:"black"})),o||(o=c.createElement("path",{d:"M8.62696 11H13.2573C14.4016 11.0162 14.4016 9.29154 13.2573 9.30773H8.62696C8.14998 9.30096 7.76176 9.69008 7.76921 10.1619C7.77767 10.6338 8.1603 11.0064 8.62696 11V11Z",fill:"black"})),d||(d=c.createElement("path",{d:"M6.07695 5.07691C6.07695 5.18803 6.05507 5.29806 6.01255 5.40072C5.97003 5.50339 5.9077 5.59667 5.82913 5.67524C5.75055 5.75382 5.65727 5.81615 5.55461 5.85867C5.45195 5.90119 5.34192 5.92308 5.2308 5.92308C5.11968 5.92308 5.00965 5.90119 4.90698 5.85867C4.80432 5.81615 4.71104 5.75382 4.63247 5.67524C4.5539 5.59667 4.49157 5.50339 4.44905 5.40072C4.40653 5.29806 4.38464 5.18803 4.38464 5.07691C4.38465 4.8525 4.4738 4.63728 4.63248 4.4786C4.79117 4.31992 5.00639 4.23077 5.2308 4.23077C5.45521 4.23077 5.67043 4.31992 5.82911 4.4786C5.9878 4.63728 6.07695 4.8525 6.07695 5.07691V5.07691Z",fill:"black"})),r||(r=c.createElement("path",{d:"M6.07695 10.1538C6.07695 10.265 6.05507 10.375 6.01255 10.4777C5.97003 10.5803 5.9077 10.6736 5.82913 10.7522C5.75055 10.8308 5.65727 10.8931 5.55461 10.9356C5.45195 10.9781 5.34192 11 5.2308 11C5.11968 11 5.00965 10.9781 4.90698 10.9356C4.80432 10.8931 4.71104 10.8308 4.63247 10.7522C4.5539 10.6736 4.49157 10.5803 4.44905 10.4777C4.40653 10.375 4.38464 10.265 4.38464 10.1538C4.38465 9.92944 4.4738 9.71422 4.63248 9.55554C4.79117 9.39685 5.00639 9.30771 5.2308 9.30771C5.45521 9.30771 5.67043 9.39685 5.82911 9.55554C5.9878 9.71422 6.07695 9.92944 6.07695 10.1538V10.1538Z",fill:"black"})))}const C=c.forwardRef(b);l.p;var N=l(99361),F=l(99678),S=l(47766),w=l(8870),T=l(53298),D=l(16871),M=l(39230),V=l(60914),I=l(80184);const O=e=>{var t,l,a,i,n,s,o,d,r,u;let{shipmentKey:v}=e;const f=(0,h.I0)(),{vendorShipmentItemDetailList:g,vendorShipmentSummaryList:x,selectedShipmentSummary:y,selectedShipper:j,selectedConsignee:Z}=(0,h.v9)((e=>e.poVendor)),{selectedCompany:b}=(0,h.v9)((e=>e.auth));(0,c.useEffect)((()=>{O()}),[b,v]);const{pathname:C}=(0,D.TH)(),N=(0,c.useMemo)((()=>(0,V.F)(C)),[C]),{t:F}=(0,M.$G)([N,"translation"]),O=()=>{let e=JSON.parse(localStorage.getItem("userInfo"));try{const t={shipmentKey:v?parseInt(v):0,shipmentType:v?"Draft":"",userGuid:e.userGuid};f((0,T.l_)(t))}catch(t){}};null===y||void 0===y||y.reduce(((e,t)=>t.quantity?e+Number(t.quantity):e),0);let L=null===y||void 0===y?void 0:y.reduce(((e,t)=>t.cube?e+Number(t.cube):e),0),k=null===y||void 0===y?void 0:y.reduce(((e,t)=>{var l;return"pound"===(null===(l=t.weightUom)||void 0===l?void 0:l.toLowerCase())?e+Number(t.totalWeight):e}),0),E=null===y||void 0===y?void 0:y.reduce(((e,t)=>{var l;return"kilogram"===(null===(l=t.weightUom)||void 0===l?void 0:l.toLowerCase())?e+Number(t.totalWeight):e}),0),P=y.filter((e=>{var t;return"pound"===(null===(t=e.weightUom)||void 0===t?void 0:t.toLowerCase())})),K=y.filter((e=>{var t;return"kilogram"===(null===(t=e.weightUom)||void 0===t?void 0:t.toLowerCase())})),U=0,q="";P.length&&K.length?(q="Kilogram | Pound",U="".concat(E," | ").concat(k)):P.length?(q="Pound",U=k):K.length&&(q="Kilogram",U=E);let A=null===y||void 0===y?void 0:y.reduce(((e,t)=>{var l;return(t.quantity||t.puomTotalQuantity)&&"stackable"===(null===(l=t.packageTypeCode)||void 0===l?void 0:l.toLowerCase())?e+Number(t.quantity||t.puomTotalQuantity):e}),0),W=null===y||void 0===y?void 0:y.reduce(((e,t)=>{var l;return(t.quantity||t.puomTotalQuantity)&&"non stackable"===(null===(l=t.packageTypeCode)||void 0===l?void 0:l.toLowerCase())?e+Number(t.quantity||t.puomTotalQuantity):e}),0),R=y.filter((e=>{var t;return"stackable"===(null===(t=e.packageTypeCode)||void 0===t?void 0:t.toLowerCase())})),G=y.filter((e=>{var t;return"non stackable"===(null===(t=e.packageTypeCode)||void 0===t?void 0:t.toLowerCase())})),H=0,Q="";return R.length&&G.length?(Q="Stackable | Non Stackable",H="".concat(A," | ").concat(W)):R.length?(Q="Stackable",H=A):G.length&&(Q="Non Stackable",H=W),(0,I.jsx)("div",{className:"",children:(0,I.jsxs)(m.Z,{justify:"space-around",className:"footer-container background-header px-20  py-12",children:[(0,I.jsx)(p.Z,{children:(0,I.jsx)(w.Z,{reverse:!0,align:"middle",count:U,label:F("translation:purchase-order-view.fields.packageWeigh.label"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(S.Z,{})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(w.Z,{reverse:!0,align:"middle",count:(null!==j&&void 0!==j&&j.country||null!==j&&void 0!==j&&j.countryCode)&&null!==Z&&void 0!==Z&&Z.countryCode&&""!=q?q:0,label:F("translation:purchase-order-view.fields.weightUnitOfMeasure.label"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(S.Z,{})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(w.Z,{reverse:!0,align:"middle",count:H,label:F("translation:default.fields.billQty"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(S.Z,{})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(w.Z,{reverse:!0,align:"middle",count:""!=Q?Q:0,label:F("translation:default.fields.packageLoadType.label"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(S.Z,{})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(w.Z,{reverse:!0,align:"middle",count:null!==(t=y[0])&&void 0!==t&&t.length?null===(l=y[0])||void 0===l?void 0:l.length:0,label:F("translation:default.fields.length"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(S.Z,{})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(w.Z,{reverse:!0,align:"middle",count:null!==(a=y[0])&&void 0!==a&&a.width?null===(i=y[0])||void 0===i?void 0:i.width:0,label:F("translation:default.fields.width"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(S.Z,{})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(w.Z,{reverse:!0,align:"middle",count:null!==(n=y[0])&&void 0!==n&&n.height?null===(s=y[0])||void 0===s?void 0:s.height:0,label:F("translation:default.fields.height"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(S.Z,{})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(w.Z,{reverse:!0,align:"middle",count:(null!==j&&void 0!==j&&j.country||null!==j&&void 0!==j&&j.countryCode)&&null!==Z&&void 0!==Z&&Z.countryCode&&null!==(o=y[0])&&void 0!==o&&o.dimensionsUom?"c"===(null===(d=y[0])||void 0===d?void 0:d.dimensionsUom).toLowerCase()?"cms":"n"===(null===(r=y[0])||void 0===r?void 0:r.dimensionsUom).toLowerCase()?"inches":null===(u=y[0])||void 0===u?void 0:u.dimensionsUom:0,label:F("translation:default.fields.dimUnitOfMeasure.label"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(S.Z,{})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(w.Z,{reverse:!0,align:"middle",count:L,label:F("translation:default.fields.cube.label"),contentClass:"text-white f-16 fw-600",labelClass:"text-light f-14"})})]})})};var L=l(28478),k=l(20114),E=l(88989),P=l(63046),K=l(800),U=l(40440),q=l(97114),A=l(89041),W=l(91082),R=l(47970),G=(l(56301),l(10686)),H=l(63521),Q=l(9682),B=l(2083),Y=l(72426),z=l.n(Y),$=l(92679);const _=e=>{var t,l,a;let{poShipmentItems:i,index:n,shipmentForm:s,shipmentKey:o,deleteItemDetails:d,noOfItem:r}=e;const{pathname:u}=(0,D.TH)(),g=(0,c.useMemo)((()=>(0,V.F)(u)),[u]),{t:x}=(0,M.$G)([g,"translation"]),[y,j]=(0,c.useState)(!1),[Z,b]=(0,c.useState)(!1),C=(0,h.I0)(),{selectedShipper:N,customerRouterSetting:F,getBarCodeData:S}=(0,h.v9)((e=>e.poVendor)),[w,O]=(0,c.useState)([]);(0,c.useEffect)((()=>{var e,t;"Y"===(null===F||void 0===F||null===(e=F.data[0])||void 0===e?void 0:e.isPoItemLocation)&&(s.setFieldValue("htcCode".concat(n),null===i||void 0===i?void 0:i.hts),s.setFieldValue("eccn".concat(n),null===i||void 0===i?void 0:i.eccn)),"Y"===(null===F||void 0===F||null===(t=F.data[0])||void 0===t?void 0:t.isCatchDate)&&null!==i&&void 0!==i&&i.catchDate&&s.setFieldValue("catchDate".concat(n),z()(null===i||void 0===i?void 0:i.catchDate)),s.setFieldValue("PoQuantityShipped".concat(n),null===i||void 0===i?void 0:i.quantityShipped),null!==i&&void 0!==i&&i.countryOfOrigin&&s.setFieldValue("countryOfOrigin".concat(n),null===i||void 0===i?void 0:i.countryOfOrigin)}),[i,F]),(0,c.useEffect)((()=>{null!==N&&void 0!==N&&N.country&&s.setFieldValue("countryOfOrigin".concat(n),null===N||void 0===N?void 0:N.country)}),[N]),(0,c.useEffect)((()=>{null!==F&&void 0!==F&&F.data&&null!==F&&void 0!==F&&F.data.length&&"Y"==(null===F||void 0===F?void 0:F.data[0].isAirApprover)&&"Y"==(null===F||void 0===F?void 0:F.data[0].isRegionalUnit)&&(O([{required:!0,message:x("translation:purchase-order-view.fields.countryOfOrigin.message")}]),s.validateFields(["countryOfOrigin".concat(n)]))}),[F]);return(0,c.useEffect)((()=>{s.setFieldValue("po-shipment-items-poNumber".concat(n),i.poNumber),s.setFieldValue("po-shipment-items-productCode".concat(n),i.productCode),s.setFieldValue("po-shipment-items-reference1".concat(n),o?i.reference1:i.lineNum),s.setFieldValue("po-shipment-items-poQuantity".concat(n),i.poQuantity),s.setFieldValue("po-shipment-items-poQuantityLeft".concat(n),i.poQuantityLeft),s.setFieldValue("po-shipment-items-poPrice".concat(n),i.poPrice),s.setFieldValue("po-shipment-items-orderShipDate".concat(n),o?i.createdOn?z()(i.createdOn).format("MM/DD/YYYY"):"":i.orderShipDate?z()(i.orderShipDate).format("MM/DD/YYYY"):""),s.setFieldValue("po-shipment-items-description".concat(n),o?i.productDescription:i.productDesc),s.setFieldValue("nmfcNumber".concat(n),(null===i||void 0===i?void 0:i.nmfcItemNumber)||"")}),[i]),(0,I.jsxs)(f.Z,{className:'border-muted mb-5 shadow-none"}',children:[(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{id:n,className:"border-bottom-muted pt-8 pb-10 px-16",children:(0,I.jsxs)(m.Z,{justify:"space-between align-items-center",children:[(0,I.jsx)(p.Z,{sm:6,children:(0,I.jsx)(v.Z,{singleLineMode:!0,editMode:!1,label:"".concat(x("translation:default.fields.orderNumber"),": "),name:"po-shipment-items-poNumber".concat(n)})}),(0,I.jsx)(p.Z,{sm:10}),(0,I.jsx)(p.Z,{sm:7}),(0,I.jsx)(p.Z,{sm:1,children:r>1&&(0,I.jsx)(m.Z,{align:"end",children:(0,I.jsx)(W.Z,{title:x("translation:purchase-order-view.sureToReset"),onConfirm:()=>d(i,n),children:(0,I.jsx)(G.Z,{children:(0,I.jsx)(L.Z,{Icon:H.r,color:"header"})})})})})]})}),(0,I.jsx)(m.Z,{className:"p-16",gutter:16,children:(0,I.jsxs)(p.Z,{sm:24,children:[(0,I.jsxs)(m.Z,{gutter:24,children:[(0,I.jsx)(p.Z,{sm:3,children:(0,I.jsx)(v.Z,{editMode:!1,label:x("translation:default.fields.partNumber"),name:"po-shipment-items-productCode".concat(n)})}),(0,I.jsx)(p.Z,{sm:3,children:(0,I.jsx)(v.Z,{editMode:!1,label:x("translation:default.fields.lineNumber.label"),name:"po-shipment-items-reference1".concat(n)})}),(0,I.jsx)(p.Z,{sm:3,children:(0,I.jsx)(v.Z,{editMode:!1,label:x("translation:default.fields.totalQuantity"),name:"po-shipment-items-poQuantity".concat(n)})}),(0,I.jsx)(p.Z,{sm:3,children:(0,I.jsx)(v.Z,{editMode:!1,label:x("translation:purchase-order-view.quanityLeft"),name:"po-shipment-items-poQuantityLeft".concat(n)})}),(0,I.jsx)(p.Z,{sm:3,children:(0,I.jsx)(v.Z,{editMode:!1,label:x("translation:default.fields.unitPrice"),name:"po-shipment-items-poPrice".concat(n)})}),(0,I.jsx)(p.Z,{sm:3,children:(0,I.jsx)(v.Z,{editMode:!1,label:x("translation:default.fields.orderShipDate"),name:"po-shipment-items-orderShipDate".concat(n)})}),(0,I.jsx)(p.Z,{sm:6,children:(0,I.jsxs)(m.Z,{gutter:12,children:[(0,I.jsxs)(p.Z,{sm:7,children:[(0,I.jsx)("label",{children:x("translation:default.fields.packageID.label")}),(0,I.jsx)("p",{children:(0,I.jsx)("b",{children:(0,I.jsx)("a",{onClick:()=>(e=>{const t={shipmentKey:o?parseInt(o):0,crateNo:e};C((0,T.JC)(t)),j(!0),b(e)})(i.crateNo),children:i.crateNo})})})]}),(0,I.jsx)(p.Z,{sm:11,children:(0,I.jsx)(v.Z,{editMode:!1,name:"nmfcNumber".concat(n),label:"NMFC Number"})}),"Y"===(null===F||void 0===F||null===(t=F.data[0])||void 0===t?void 0:t.isCatchDate)&&(0,I.jsx)(p.Z,{sm:6,children:(0,I.jsx)($.Z,{label:"Catch Date",name:"catchDate"+n,placeholder:x("translation:default.date"),margin:"mb-0",rules:[]})})]})})]}),(0,I.jsxs)(m.Z,{gutter:24,children:[(0,I.jsx)(p.Z,{sm:6,children:(0,I.jsx)(v.Z,{editMode:!1,label:x("translation:default.fields.description"),name:"po-shipment-items-description".concat(n)})}),(0,I.jsx)(p.Z,{sm:3,children:(0,I.jsx)(v.Z,{margin:"mb-30",label:x("translation:default.fields.quantityShipped"),name:"PoQuantityShipped"+n,editMode:!0,defaultValue:i.quantityShipped,rules:[{required:!0,message:x("translation:purchase-order-view.fields.quantityShipped.message")},()=>({validator:(e,t)=>parseInt(t)>0&&parseInt(i.poQuantityLeft)>=parseInt(t)?Promise.resolve():Promise.reject(new Error(x("translation:purchase-order-view.quantityShippeError")))})]})}),"Y"===(null===F||void 0===F||null===(l=F.data[0])||void 0===l?void 0:l.isPoItemLocation)&&(0,I.jsx)(p.Z,{sm:3,children:(0,I.jsx)(v.Z,{margin:"mb-30",label:x("translation:purchase-order-view.htsCode"),name:"htcCode"+n,editMode:!0,rules:[]})}),"Y"===(null===F||void 0===F||null===(a=F.data[0])||void 0===a?void 0:a.isPoItemLocation)&&(0,I.jsx)(p.Z,{sm:6,children:(0,I.jsx)(v.Z,{margin:"mb-30",label:x("translation:default.fields.eccnNumber"),name:"eccn"+n,editMode:!0,defaultValue:i.eccn,rules:[],maxLength:"50"})}),(0,I.jsx)(p.Z,{sm:6,children:(0,I.jsx)(B.Z,{label:x("translation:default.fields.countryOfOrigin"),margin:"mb-15",name:"countryOfOrigin"+n,placeholder:x("translation:purchase-order-view.fields.countryOfOrigin.placeholder"),value:i.countryOfOrigin,rules:w})})]})]})})]}),(0,I.jsx)(R.Z,{name:"shipmentDetailsID"}),(0,I.jsx)(R.Z,{name:"gridOperation"}),(0,I.jsx)(Q.Z,{className:"h-auto w-auto",descriptionClassName:"m-0",customFooter:(0,I.jsx)(I.Fragment,{}),onClose:()=>j(!1),destroyOnClose:!0,maskClosable:!0,open:y,customHeader:(0,I.jsx)(m.Z,{className:"flex-1",gutter:5,justify:"space-between",align:"middle",children:(0,I.jsx)(p.Z,{className:"flex-1",children:(0,I.jsxs)("label",{className:"title",children:[x("translation:default.fields.packageID.label")," -"," ",Z]})})}),contentClassName:"p-0",children:(0,I.jsx)("div",{children:(0,I.jsx)("img",{src:"data:image/png;base64, ".concat(null===S||void 0===S?void 0:S.data)})})})]})},J=e=>{var t;let{selectedTabKey:l,shipmentKey:a=0}=e;const{selectedCompany:i}=(0,h.v9)((e=>e.auth)),[n,s]=(0,c.useState)(!1),[o,d]=(0,c.useState)(!1),{vendorShipmentItemDetailList:r,getBarCodeData:v,selectedShipmentItemDetail:f,customerRouterSetting:g,removedShipmentItemDetail:x,selectedShipmentSummary:j,vendorShipmentSummaryList:Z}=(0,h.v9)((e=>e.poVendor)),{purchaseOrderFilters:b}=(0,h.v9)((e=>e.purchaseOrder)),{pathname:C}=(0,D.TH)(),N=(0,c.useMemo)((()=>(0,V.F)(C)),[C]),{t:F}=(0,M.$G)([N,"translation"]);let S=(0,D.s0)();const w=(0,h.I0)(),[O]=u.Z.useForm(),L=()=>{s(!1)};(0,c.useEffect)((()=>{E();const e={shipmentKey:a?parseInt(a):0,shipmentType:a?"Draft":""};w((0,T.S6)(e))}),[i,a]);let k=JSON.parse(localStorage.getItem("userInfo"));const E=async()=>{try{d(!0);const e={customerKey:null===b||void 0===b?void 0:b.customerKey,vendorKey:null===i||void 0===i?void 0:i.companyId,shipmentKey:a?parseInt(a):0,shipmentType:a?"Draft":"",userGuid:k.userGuid,vendorLogonID:null===k||void 0===k?void 0:k.email};w((0,T.m1)(e)),d(!1)}catch(e){d(!1)}};(0,c.useEffect)((()=>{var e,t;null!==r&&void 0!==r&&null!==(e=r.data)&&void 0!==e&&e.shipmentDetails?w((0,T.KT)(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.shipmentDetails)):w((0,T.KT)(null===r||void 0===r?void 0:r.data))}),[r]);const P=(e,t)=>{let l=f.filter(((e,l)=>{if(l!==t)return!0}));w((0,T.KT)(l));let a=j.filter(((t,l)=>{if(e.crateNo!=t.crateNo)return t}));w((0,T.fj)(a)),w((0,T.lv)(a))};return(0,I.jsxs)("div",{children:[(0,I.jsxs)(u.Z,{form:O,name:"shipmentItemDetail",children:[(0,I.jsxs)(m.Z,{className:"align-items-center mb-15",justify:"space-between",children:[(0,I.jsx)(p.Z,{}),(0,I.jsx)(p.Z,{children:(0,I.jsxs)(m.Z,{justify:"end",gutter:16,children:[(0,I.jsx)(p.Z,{children:(0,I.jsx)(y.Z,{onClick:()=>(0,U.LQ)(f&&f,O.getFieldsValue()),children:F("translation:default.buttons.exportToExcel")})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(y.Z,{onClick:()=>{a?S("./../../purchase-order-management/"+a):s(!0)},children:F("translation:default.buttons.addPO")})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(y.Z,{onClick:()=>(()=>{var e;let t=O.getFieldValue("countryOfOrigin0");null===r||void 0===r||null===(e=r.data)||void 0===e||e.forEach(((e,l)=>{O.setFieldValue("countryOfOrigin".concat(l),t)}))})(),children:F("translation:purchase-order-view.applyCountryButton")})}),"Y"===(null===g||void 0===g||null===(t=g.data[0])||void 0===t?void 0:t.isCatchDate)&&(0,I.jsx)(p.Z,{children:(0,I.jsx)(y.Z,{onClick:()=>(()=>{var e;let t=O.getFieldValue("catchDate0");const l=Array.isArray(null===r||void 0===r?void 0:r.data)?null===r||void 0===r?void 0:r.data:null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.shipmentDetails;null===l||void 0===l||l.forEach(((e,l)=>{O.setFieldValue("catchDate".concat(l),t)}))})(),children:"Apply Catch Date to all the PO lines"})})]})})]}),r&&r.progressing?(0,I.jsx)(A.Z,{}):f&&(null===f||void 0===f?void 0:f.length)>0?null===f||void 0===f?void 0:f.map(((e,t)=>(0,I.jsx)(_,{selectedTabKey:l,poShipmentItems:e,index:t,shipmentForm:O,shipmentKey:a,deleteItemDetails:P,noOfItem:null===f||void 0===f?void 0:f.length},t))):(0,I.jsx)("p",{className:"text-center",children:F("translation:default.documentManager.noFoundText")})]}),(0,I.jsx)(q.Z,{onOk:L,onCancel:()=>L,onClose:()=>s(!1),open:n,cancelButton:!0,description:F("translation:purchase-order-view.addingPO.description"),title:F("translation:default.fields.alert"),okText:F("translation:purchase-order-view.addingPO.okText")})]})};var X=l(84832),ee=l(99740),te=l(38416),le=l(5814),ae=l(88858),ie=l(68825);var ne=l(73054),se=l(74219),oe=l(9835),de=l(79398),re=l(48740),ce=l(85757),ue=l(11864),me=l(67766),pe=l(14626);const he=e=>{var t;let{shipmentKey:l}=e;const[a,i]=(0,c.useState)(!1),{selectedCompany:n,user:s}=(0,h.v9)((e=>e.auth)),{pathname:o}=((0,h.v9)((e=>e)),(0,D.TH)()),d=(0,c.useMemo)((()=>(0,V.F)(o)),[o]),{t:r}=(0,M.$G)([d,"translation"]),{purchaseOrderFilters:g}=(0,h.v9)((e=>e.purchaseOrder)),{vendorShipperList:x,vendorConsigneeList:j,saveShipper:Z,vendorShipmentDetailList:b,customerRouterSetting:C}=(0,h.v9)((e=>e.poVendor)),[N]=u.Z.useForm(),[F]=u.Z.useForm(),S=((0,D.UO)(),u.Z.useWatch("countryCode",N),u.Z.useWatch("shipperCountryCode",N),u.Z.useWatch("shipperStateCode",N),u.Z.useWatch("stateCode",N),u.Z.useWatch("addShipperCountryCode",F)),w=(u.Z.useWatch("shipperName",F),u.Z.useWatch("portCode",N)),O=u.Z.useWatch("portName",N),L=u.Z.useWatch("conPortCode",N),k=u.Z.useWatch("conPortName",N),E=u.Z.useWatch("addShipperStateCode",F),P=u.Z.useWatch("portType",N),K=u.Z.useWatch("conPortType",N),[U,q]=(0,c.useState)(!1),[W,G]=(0,c.useState)([]),[H,Y]=(0,c.useState)([]),z=(0,h.I0)(),[$,_]=(0,c.useState)(!0),[J,le]=(0,c.useState)([]);(0,c.useEffect)((()=>{ie(),he()}),[n]),(0,c.useEffect)((()=>{var e,t,l,a,i,n,s,o,d,c,u,m,p,h;N.setFieldValue("consigneeName",null===j||void 0===j||null===(e=j.data[0])||void 0===e?void 0:e.consigneeName),N.setFieldValue("conPortType",null===j||void 0===j||null===(t=j.data[0])||void 0===t?void 0:t.consigneePortType),N.setFieldValue("conPortName",null===j||void 0===j||null===(l=j.data[0])||void 0===l?void 0:l.consigneePortName),N.setFieldValue("conPortCode",null===j||void 0===j||null===(a=j.data[0])||void 0===a?void 0:a.consigneePortCode),G(null===j||void 0===j?void 0:j.data[0]),z((0,T.Bv)(null===j||void 0===j?void 0:j.data[0])),N.setFieldValue("vendor-value-consigneeAddr1",null===j||void 0===j||null===(i=j.data[0])||void 0===i?void 0:i.consigneeAddr1),N.setFieldValue("vendor-value-countryName",null===j||void 0===j||null===(n=j.data[0])||void 0===n?void 0:n.countryName),N.setFieldValue("vendor-value-consigneeZip",null===j||void 0===j||null===(s=j.data[0])||void 0===s?void 0:s.consigneeZip),N.setFieldValue("vendor-value-consigneeCity",null===j||void 0===j||null===(o=j.data[0])||void 0===o?void 0:o.consigneeCity),N.setFieldValue("vendor-value-consigneeStatename",null===j||void 0===j||null===(d=j.data[0])||void 0===d?void 0:d.consigneeStatename),N.setFieldValue("vendor-value-contactName",null===j||void 0===j||null===(c=j.data[0])||void 0===c?void 0:c.conContactName),N.setFieldValue("vendor-value-businessPhone",null===j||void 0===j||null===(u=j.data[0])||void 0===u?void 0:u.conBusinessPhone),N.setFieldValue("vendor-value-email",null===j||void 0===j||null===(m=j.data[0])||void 0===m?void 0:m.conEmail),N.setFieldValue("vendor-value-appointmentType","AR"===(null===j||void 0===j||null===(p=j.data[0])||void 0===p?void 0:p.conAppointmentType)?r("translation:purchase-order-view.appointmentIsRequired"):""),N.setFieldValue("vendor-value-hoursOfOperation",null===j||void 0===j||null===(h=j.data[0])||void 0===h?void 0:h.conHoursOfOperation),console.log("====> vendorConsigneeList",j)}),[j]),(0,c.useEffect)((()=>{var e,t,a;const i=l&&(null===b||void 0===b||null===(e=b.data)||void 0===e||null===(t=e.shipmentOriginDetails)||void 0===t?void 0:t[0])||(null===x||void 0===x||null===(a=x.data)||void 0===a?void 0:a[0]);N.setFieldValue("shipperName",null===i||void 0===i?void 0:i.name),ve({data:i}),N.setFieldValue("portType",null===i||void 0===i?void 0:i.portType),N.setFieldValue("portName",null===i||void 0===i?void 0:i.portName),N.setFieldValue("portCode",null===i||void 0===i?void 0:i.portCode)}),[z,N,b,x]),(0,c.useEffect)((()=>{N.setFieldValue("shipper-value-address",(null===H||void 0===H?void 0:H.address)||(null===H||void 0===H?void 0:H.addr1)),N.setFieldValue("shipper-value-countryName",null===H||void 0===H?void 0:H.countryName),N.setFieldValue("shipper-value-zip",null===H||void 0===H?void 0:H.zip),N.setFieldValue("shipper-value-city",null===H||void 0===H?void 0:H.city),N.setFieldValue("shipper-value-stateDesc",null===H||void 0===H?void 0:H.stateDesc),N.setFieldValue("shipper-value-contactName",null===H||void 0===H?void 0:H.contactName),N.setFieldValue("shipper-value-businessPhone",null===H||void 0===H?void 0:H.businessPhone),N.setFieldValue("shipper-value-email",null===H||void 0===H?void 0:H.email),N.setFieldValue("shipper-value-appointmentType","AR"===(null===H||void 0===H?void 0:H.appointmentType)?r("translation:purchase-order-view.appointmentIsRequired"):""),N.setFieldValue("shipper-value-daysOfWeek",null===H||void 0===H?void 0:H.daysOfWeek),N.setFieldValue("shipper-value-hoursOfOperation",null===H||void 0===H?void 0:H.hoursOfOperation)}),[H]),(0,c.useEffect)((()=>{var e,t,l,a;null!==Z&&void 0!==Z&&Z.success&&(ie(),i(!1),z((0,re.ef)(!1)),N.setFieldValue("shipperName",null===x||void 0===x||null===(e=x.data)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.name),Y(null===x||void 0===x||null===(l=x.data)||void 0===l?void 0:l[0]),z((0,T.o0)(null===x||void 0===x||null===(a=x.data)||void 0===a?void 0:a[0])))}),[Z]);const ie=async()=>{try{if(q(!0),null!==n&&void 0!==n&&n.companyId){const e={vendorKey:n?n.companyId:""};z((0,T.xK)(e))}const e={shipmentKey:l?parseInt(l):0,shipmentType:l?"Draft":""};z((0,T.a$)(e)),q(!1)}catch(e){q(!1)}},he=async()=>{try{var e;q(!0);const a={customerKey:null===g||void 0===g?void 0:g.customerKey,vendorKey:n?n.companyId:"",shipmentKey:l?parseInt(l):0,shipmentType:l?"Draft":"",vendorLogonID:s?null===(e=s.data)||void 0===e?void 0:e.email:""};var t;if(null!==n&&void 0!==n&&n.companyId)z((0,T.rD)(a)).then(N.setFieldValue("consigneeName",null===j||void 0===j||null===(t=j.data[0])||void 0===t?void 0:t.consigneeName));q(!1)}catch(a){q(!1)}},ve=e=>{Y(null===e||void 0===e?void 0:e.data),z((0,T.o0)(null===e||void 0===e?void 0:e.data))};(0,c.useEffect)((()=>{F.validateFields(["shipperPostalCode"])}),[$]),(0,c.useEffect)((()=>{null!==C&&void 0!==C&&C.data&&null!==C&&void 0!==C&&C.data.length&&"Y"==(null===C||void 0===C?void 0:C.data[0].isAirApprover)&&"Y"==(null===C||void 0===C?void 0:C.data[0].isRegionalUnit)&&(le([{required:!0,message:r("translation:default.fields.portType.message")}]),F.validateFields(["portType"]),F.validateFields(["conPortType"]))}),[C]);return(0,I.jsx)(I.Fragment,{children:b.progressing?(0,I.jsx)("div",{className:"p-30 ",children:(0,I.jsx)(A.Z,{})}):(0,I.jsxs)("div",{children:[(0,I.jsxs)(u.Z,{form:N,name:"shipmentEntry",children:[(0,I.jsxs)(f.Z,{className:'border-muted mb-5 shadow-none"}',children:[(0,I.jsx)("div",{className:"border-bottom-muted pt-5 px-10",children:(0,I.jsx)(m.Z,{className:"align-items-center m-0 p-10 ",children:(0,I.jsx)(p.Z,{className:"flex-1",children:(0,I.jsxs)(m.Z,{gutter:16,children:[(0,I.jsx)(p.Z,{sm:24,lg:6,children:(0,I.jsx)(X.Z,{margin:"mb-5",editMode:!0,name:"shipperName",singleLineMode:!0,options:x?x.data:[],loading:U,onChange:ve,rules:[{required:!0,message:r("translation:default.fields.shipperName.message")}]})}),(0,I.jsx)(p.Z,{sm:24,lg:6,children:(0,I.jsx)(y.Z,{onClick:()=>{F.resetFields(),i(!0)},children:r("translation:default.buttons.addShipper")})})]})})})}),(0,I.jsx)(m.Z,{className:"p-16",gutter:16,children:(0,I.jsxs)(p.Z,{sm:24,children:[(0,I.jsxs)(m.Z,{gutter:24,children:[(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.shipperAddress"),placeholder:r("translation:default.fields.shipperAddress"),name:"shipper-value-address"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.shipperCountry.label"),placeholder:r("translation:default.fields.shipperCountry.label"),name:"shipper-value-countryName"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.shipperPostalCode"),placeholder:r("translation:default.fields.shipperPostalCode"),name:"shipper-value-zip"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.shipperCity.label"),placeholder:r("translation:default.fields.shipperCity.label"),name:"shipper-value-city"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(ne.Z,{margin:"mb-5",label:r("translation:default.fields.portType.label"),placeholder:r("translation:default.fields.portType.search"),name:"portType",singleLineMode:!1,editMode:!0,rules:J})}),(0,I.jsxs)(p.Z,{sm:4,children:[(0,I.jsx)(ue.Z,{label:r("translation:default.fields.portName.label"),editMode:!0,name:"portName",countryCode:null===H||void 0===H?void 0:H.country,cityCode:null===H||void 0===H?void 0:H.city,stateCode:null===H||void 0===H?void 0:H.state,zipCode:null===H||void 0===H?void 0:H.zip,portType:P,portCode:w,portName:O,handlePortDetails:e=>{Y({...H,countryName:null===e||void 0===e?void 0:e.countryName,country:null===e||void 0===e?void 0:e.portCountryCode,state:null===e||void 0===e?void 0:e.portStateCode,stateDesc:null===e||void 0===e?void 0:e.stateDesc,city:null===e||void 0===e?void 0:e.portCity,zip:null===e||void 0===e?void 0:e.portZip}),N.setFieldsValue({portName:null===e||void 0===e?void 0:e.portName,portCode:null===e||void 0===e?void 0:e.portCode,portType:null===e||void 0===e?void 0:e.portType})},rules:[]}),(0,I.jsx)(R.Z,{name:"portCode"})]})]}),(0,I.jsx)(m.Z,{gutter:24,children:(0,I.jsx)(p.Z,{sm:8,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.shipperStateProvince.label"),placeholder:r("translation:default.fields.shipperStateProvince.label"),name:"shipper-value-stateDesc"})})}),(0,I.jsx)(m.Z,{gutter:24,children:(0,I.jsx)(p.Z,{className:"fw-800",children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:purchase-order-view.warehouseContactInfoDetails"),margin:"mb-0"})})}),(0,I.jsxs)(m.Z,{gutter:24,children:[(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.warehouseContact"),placeholder:r("translation:default.fields.warehouseContact"),name:"shipper-value-contactName"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.warehouseTelephone"),placeholder:r("translation:default.fields.warehouseTelephone"),name:"shipper-value-businessPhone"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.warehouseEmail"),placeholder:r("translation:default.fields.warehouseEmail"),name:"shipper-value-email",defaultValue:null===H||void 0===H?void 0:H.email})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.appointmentType.label"),placeholder:r("translation:default.fields.appointmentType.label"),name:"shipper-value-appointmentType"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.daysOfWeek"),placeholder:r("translation:default.fields.daysOfWeek"),name:"shipper-value-daysOfWeek"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.hoursOfOperations"),placeholder:r("translation:default.fields.hoursOfOperations"),name:"shipper-value-hoursOfOperation"})})]})]})})]}),(0,I.jsxs)(f.Z,{className:'border-muted mb-5 mt-20 shadow-none"}',children:[(0,I.jsx)("div",{className:"border-bottom-muted pt-5 px-10",children:(0,I.jsx)(m.Z,{className:"align-items-center m-0 p-10 ",children:(0,I.jsx)(p.Z,{className:"flex-1",children:(0,I.jsx)(m.Z,{gutter:16,children:(0,I.jsx)(p.Z,{sm:24,lg:6,children:(0,I.jsx)(X.Z,{margin:"mb-5",label:r("translation:default.fields.consigneeName.label"),placeholder:r("translation:default.fields.consigneeName.placeholder"),name:"consigneeName",singleLineMode:!0,editMode:!0,options:j?j.data:[],loading:U,onChange:e=>{G(e.data),z((0,T.Bv)(e.data));const t=e.data;N.setFieldsValue({consigneeAddress:null===e||void 0===e?void 0:e.address}),N.setFieldsValue({consigneePostalCode:null===t||void 0===t?void 0:t.consigneeZip}),N.setFieldsValue({conWarehouseContact:null===t||void 0===t?void 0:t.conContactName}),N.setFieldsValue({conAppointmentType:null===t||void 0===t?void 0:t.appointmentType}),N.setFieldsValue({conWarehouseEmailAddress:null===t||void 0===t?void 0:t.conEmail}),N.setFieldsValue({extension:null===t||void 0===t?void 0:t.conPhoneExt}),N.setFieldsValue({countryCode:null===t||void 0===t?void 0:t.countryCode}),N.setFieldsValue({stateCode:null===t||void 0===t?void 0:t.consigneeState}),N.setFieldsValue({city:null===t||void 0===t?void 0:t.consigneeCity}),N.setFieldsValue({conFrom:null===t||void 0===t?void 0:t.conFromDay}),N.setFieldsValue({conTo:null===t||void 0===t?void 0:t.conToDay}),N.setFieldsValue({conHoursFrom:null===t||void 0===t?void 0:t.conFromTime}),N.setFieldsValue({conHoursTo:null===t||void 0===t?void 0:t.conToTime})},rules:[{required:!0,message:r("translation:default.fields.consigneeName.message")}]})})})})})}),(0,I.jsx)(m.Z,{className:"p-16",gutter:16,children:(0,I.jsxs)(p.Z,{sm:24,children:[(0,I.jsxs)(m.Z,{gutter:24,children:[(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.consigneeAddress"),name:"vendor-value-consigneeAddr1"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.consigneeCountry.label"),name:"vendor-value-countryName"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.consigneeZip"),name:"vendor-value-consigneeZip"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.consigneeCity.label"),name:"vendor-value-consigneeCity"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(ne.Z,{margin:"mb-5",label:r("translation:default.fields.portType.label"),placeholder:r("translation:default.fields.portType.search"),name:"conPortType",singleLineMode:!1,editMode:!0,rules:J})}),(0,I.jsxs)(p.Z,{sm:4,children:[(0,I.jsx)(ue.Z,{label:r("translation:default.fields.portName.label"),editMode:!0,name:"conPortName",countryCode:null===W||void 0===W?void 0:W.countryCode,cityCode:null===W||void 0===W?void 0:W.consigneeCity,stateCode:null===W||void 0===W?void 0:W.consigneeState,zipCode:null===W||void 0===W?void 0:W.consigneeZip,portType:K,portCode:L,portName:k,handlePortDetails:e=>{G({...W,countryName:null===e||void 0===e?void 0:e.countryName,countryCode:null===e||void 0===e?void 0:e.portCountryCode,consigneeState:null===e||void 0===e?void 0:e.portStateCode,consigneeStatename:null===e||void 0===e?void 0:e.stateDesc,consigneeCity:null===e||void 0===e?void 0:e.portCity,consigneeZip:null===e||void 0===e?void 0:e.portZip}),N.setFieldsValue({conPortName:null===e||void 0===e?void 0:e.portName,conPortCode:null===e||void 0===e?void 0:e.portCode,conPortType:null===e||void 0===e?void 0:e.portType})},rules:[]}),(0,I.jsx)(R.Z,{name:"conPortCode"})]})]}),(0,I.jsx)(m.Z,{gutter:24,children:(0,I.jsx)(p.Z,{sm:8,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.shipperStateProvince.label"),placeholder:r("translation:default.fields.shipperStateProvince.label"),name:"vendor-value-consigneeStatename"})})}),(0,I.jsx)(m.Z,{gutter:24,children:(0,I.jsx)(p.Z,{className:"fw-800",children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:purchase-order-view.warehouseContactInfoDetails"),margin:"mb-0"})})}),(0,I.jsxs)(m.Z,{gutter:24,children:[(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.warehouseContact"),placeholder:r("translation:default.fields.warehouseContact"),name:"vendor-value-contactName"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.warehouseTelephone"),placeholder:r("translation:default.fields.warehouseTelephone"),name:"vendor-value-businessPhone"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.warehouseEmail"),placeholder:r("translation:default.fields.warehouseEmail"),name:"vendor-value-email",defaultValue:(null===j||void 0===j||null===(t=j.data[0])||void 0===t?void 0:t.conEmail)||""})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.appointmentType.label"),placeholder:r("translation:default.fields.appointmentType.label"),name:"vendor-value-appointmentType"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.daysOfWeek"),placeholder:r("translation:default.fields.daysOfWeek"),name:"vendor-value-daysOfWeek"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(v.Z,{editMode:!1,label:r("translation:default.fields.hoursOfOperations"),placeholder:r("translation:default.fields.hoursOfOperations"),name:"vendor-value-hoursOfOperation"})})]})]})})]}),(0,I.jsx)(R.Z,{name:"shipmentDetailsID"}),(0,I.jsx)(R.Z,{name:"gridOperation"})]}),(0,I.jsx)(Q.Z,{title:r("translation:default.buttons.addShipper"),open:a,className:"h-auto",okText:r("translation:default.buttons.save"),cancelText:r("translation:default.buttons.cancel"),onClose:()=>{i(!1)},onOk:()=>{F.submit()},onCancel:()=>{i(!1)},children:(0,I.jsxs)(u.Z,{form:F,name:"saveShipperForm",onFinish:e=>{const t={vendorAddressKey:0,vendorKey:null===n||void 0===n?void 0:n.companyId,name:e.shipperName,addressConcat:e.shipperAddress,address:e.shipperAddress,city:e.city,state:e.addShipperStateCode,zip:e.shipperPostalCode,country:e.addShipperCountryCode,contactName:e.warehouseContact,businessPhone:e.warehouseTelephone,phoneExt:e.warehouseTelephone,phoneCountry:"",daysOfWeek:"".concat((0,me.Fx)(null===e||void 0===e?void 0:e.fromWeekDay),"-").concat((0,me.Fx)(null===e||void 0===e?void 0:e.toWeekDay)),hoursOfOperation:"".concat((0,pe.GW)(null===e||void 0===e?void 0:e.fromOperationDay,"hh:mm A"),"-").concat((0,pe.GW)(null===e||void 0===e?void 0:e.toOperationDay,"hh:mm A")),appointmentType:e.appointmentType,email:e.warehouseEmail};z((0,T.Mv)(t))},children:[(0,I.jsxs)(m.Z,{gutter:24,children:[(0,I.jsx)(p.Z,{sm:12,children:(0,I.jsx)(v.Z,{margin:"mb-30",label:r("translation:default.fields.shipperName.label"),name:"shipperName",placeholder:r("translation:default.fields.shipperName.placeholder"),editMode:!0,rules:[{required:!0,message:r("translation:default.fields.shipperName.message")}]})}),(0,I.jsx)(p.Z,{sm:12,children:(0,I.jsx)(v.Z,{margin:"mb-30",label:r("translation:default.fields.warehouseContact"),name:"warehouseContact",placeholder:r("translation:default.fields.warehouseContact"),editMode:!0,rules:[{required:!0,message:r("translation:purchase-order-view.warehouseContactMsg")}]})})]}),(0,I.jsxs)(m.Z,{gutter:24,children:[(0,I.jsx)(p.Z,{sm:12,children:(0,I.jsx)(v.Z,{margin:"mb-30",label:r("translation:default.fields.shipperAddress"),name:"shipperAddress",placeholder:r("translation:default.fields.shipperAddress"),editMode:!0,rules:[{required:!0,message:r("translation:purchase-order-view.shipperAddressMsg")}]})}),(0,I.jsx)(p.Z,{sm:12,children:(0,I.jsx)(v.Z,{margin:"mb-30",label:r("translation:default.fields.warehouseTelephone"),name:"warehouseTelephone",placeholder:r("translation:default.fields.warehouseTelephone"),editMode:!0,rules:[{required:!0,message:r("translation:default.fields.warehouseTelephone")}]})})]}),(0,I.jsxs)(m.Z,{gutter:24,children:[(0,I.jsx)(p.Z,{sm:12,children:(0,I.jsx)(B.Z,{label:r("translation:default.fields.shipperCountry.label"),margin:"mb-15",name:"addShipperCountryCode",placeholder:r("translation:default.fields.shipperCountry.placeholder"),rules:[{required:!0,message:r("translation:default.fields.shipperCountry.message")}],onChange:e=>{F.setFieldsValue({addShipperStateCode:void 0,city:void 0,shipperPostalCode:void 0,countryName:void 0})}})}),(0,I.jsx)(p.Z,{sm:12,children:(0,I.jsx)(v.Z,{margin:"mb-30",label:r("translation:purchase-order-view.warehouseEmailAddress"),name:"warehouseEmail",placeholder:r("translation:purchase-order-view.warehouseEmailAddress"),editMode:!0,rules:[{required:!0,message:r("translation:purchase-order-view.emailMsg")},{type:"email",message:r("translation:default.notification.email")}]})})]}),(0,I.jsxs)(m.Z,{gutter:24,children:[(0,I.jsx)(p.Z,{sm:12,children:(0,I.jsx)(ce.Z,{name:"shipperPostalCode",label:r("translation:default.fields.shipperPostalCode"),placeholder:r("translation:default.fields.shipperPostalCode"),editMode:!0,handleZipDetails:e=>{e?(_(!0),F.setFieldsValue({addShipperStateCode:null===e||void 0===e?void 0:e.state,city:null===e||void 0===e?void 0:e.city,shipperPostalCode:null===e||void 0===e?void 0:e.zip,addShipperCountryCode:null===e||void 0===e?void 0:e.countryCode})):_(!1)},countryCode:S,rules:[{required:!0,message:r("translation:default.fields.postalCode.message")},()=>({validator:()=>$?Promise.resolve():Promise.reject(new Error(r("translation:default.fields.postalCode.error")))})]})}),(0,I.jsxs)(p.Z,{sm:12,children:[(0,I.jsx)("label",{children:r("translation:default.fields.daysOfWeek")}),(0,I.jsxs)(m.Z,{children:[(0,I.jsx)(p.Z,{sm:12,children:(0,I.jsx)(ae.Z,{options:oe.DQ,editMode:!0,singleLineMode:!0,label:r("translation:default.fields.from.label"),colon:!0,name:"fromWeekDay",placeholder:r("translation:default.fields.from.placeholder")})}),(0,I.jsx)(p.Z,{sm:12,className:"pl-10",children:(0,I.jsx)(ae.Z,{options:oe.DQ,editMode:!0,singleLineMode:!0,label:r("translation:default.fields.to.label"),colon:!0,name:"toWeekDay",placeholder:r("translation:default.fields.to.placeholder")})})]})]})]}),(0,I.jsxs)(m.Z,{gutter:24,children:[(0,I.jsx)(p.Z,{sm:12,children:(0,I.jsx)(ee.Z,{label:r("translation:default.fields.shipperStateProvince.label"),margin:"mb-15",name:"addShipperStateCode",placeholder:r("translation:default.fields.shipperStateProvince.placeholder"),screen:"CreateShipment",countryCode:S,rules:[{required:!0,message:r("translation:default.fields.stateProvince.message")}]})}),(0,I.jsxs)(p.Z,{sm:12,children:[(0,I.jsx)("label",{children:r("translation:default.fields.hoursOfOperations")}),(0,I.jsxs)(m.Z,{children:[(0,I.jsx)(p.Z,{sm:3,children:r("translation:default.fields.from.label")}),(0,I.jsx)(p.Z,{sm:9,children:(0,I.jsx)(de.Z,{name:"fromOperationDay",editMode:!0,margin:"mb-10",placeholder:r("translation:default.fields.from.placeholder"),inputLabelClasss:"f-14 text-highlight"})}),(0,I.jsx)(p.Z,{sm:2,className:"pl-10",children:r("translation:default.fields.to.label")}),(0,I.jsx)(p.Z,{sm:10,children:(0,I.jsx)(de.Z,{name:"toOperationDay",editMode:!0,margin:"mb-10",inputLabelClasss:"f-14 text-highlight"})})]})]})]}),(0,I.jsxs)(m.Z,{gutter:24,children:[(0,I.jsx)(p.Z,{sm:12,children:(0,I.jsx)(te.Z,{label:r("translation:default.fields.shipperCity.label"),editMode:!0,margin:"mb-15",name:"city",placeholder:r("translation:default.fields.shipperCity.placeholder"),countryCode:S,stateCode:E,rules:[{required:!0,message:r("translation:default.fields.shipperCity.message")}],maxLength:"50"})}),(0,I.jsx)(p.Z,{sm:12,children:(0,I.jsx)(se.Z,{margin:"mb-30",label:r("translation:default.fields.appointmentType.label"),name:"appointmentType",placeholder:r("translation:default.fields.appointmentType.label"),editMode:!0,rules:[{required:!0,message:r("translation:default.fields.appointmentType.message")}]})})]})]})})]})})},ve=e=>{let{shipmentKey:t=0}=e;return(0,I.jsx)("div",{children:(0,I.jsx)(he,{shipmentKey:t})})};var fe=l(68329);const ge=e=>{let{placeholder:t=ie.ZP.t("translation:default.fields.packageLoadType.placeholder"),label:l=ie.ZP.t("translation:default.fields.packageLoadType.label"),rules:a=[],name:i,editMode:n,accessors:s={label:"text",value:"value"},...o}=e;const[d,r]=(0,c.useState)([]),[u,m]=(0,c.useState)(!1);(0,c.useEffect)((()=>{p()}),[]);const p=async()=>{try{m(!0);const{data:e}=await(0,le.G_)();let t=e.map((e=>({label:e[s.label],value:e[s.value]})));r(t),m(!1)}catch(e){console.log(e),r([]),m(!1)}};return(0,I.jsx)(ae.Z,{loading:u,options:d,placeholder:t,label:l,margin:"mb-0",rules:a,name:i,editMode:n,...o})},xe=c.memo(ge);var ye=l(87381),je=l(79795),Ze=l(6506);const be=e=>{let{data:t,onChangeHandles:l,index:a=null,form:i,onSelect:n=(()=>{}),updateValues:s,update:o,isSelected:d}=e;const{pathname:r}=(0,D.TH)(),g=(0,c.useMemo)((()=>(0,V.F)(r)),[r]),{t:x}=(0,M.$G)([g,"translation"]),{selectedShipper:y,selectedConsignee:j}=(0,h.v9)((e=>e.poVendor)),[Z,b]=(0,c.useState)(!1),C=u.Z.useWatch("length".concat(a),i),N=u.Z.useWatch("width".concat(a),i),F=u.Z.useWatch("height".concat(a),i),S=u.Z.useWatch("billedQuantity".concat(a),i);let w=u.Z.useWatch("dimensionsUom".concat(a),i),T=u.Z.useWatch("unitOfMeasure".concat(a),i),{shipmentKey:O}=(0,D.UO)();const L=(0,c.useCallback)((()=>{var e;const t=null===(e=w)||void 0===e?void 0:e.toLowerCase();return w=["inches","inch","n"].includes(t)?"N":"C",(0,me.l5)(C,N,F,S,w)}),[C,N,F,S,w]),k=function(e,t){l(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a)};return(0,c.useEffect)((()=>{let e=L(C,N,F,S,w);i.setFieldValue("cube".concat(a),e),k({target:{value:e}},"cube",0,a)}),[C,N,F,S,w,T,L]),(0,c.useEffect)((()=>{var e;const l=t;i.setFieldValue("crateNo".concat(a),null===l||void 0===l?void 0:l.crateNo),i.setFieldValue("packageType".concat(a),null===l||void 0===l?void 0:l.packageUom),i.setFieldValue("packageLoadType".concat(a),null===l||void 0===l?void 0:l.packageTypeCode),i.setFieldValue("packageWeight".concat(a),null===l||void 0===l?void 0:l.totalWeight),i.setFieldValue("billedQuantity".concat(a),null===l||void 0===l?void 0:l.puomTotalQuantity),i.setFieldValue("unitOfMeasure".concat(a),null===l||void 0===l?void 0:l.weightUomCode),i.setFieldValue("dimensionsUom".concat(a),"cm"===(null===l||void 0===l||null===(e=l.unitMeasureCode)||void 0===e?void 0:e.toLowerCase())?"cms":"inch");["length","width","weightUomCode","cube","height"].forEach((e=>{i.setFieldValue("".concat(e).concat(a),(null===l||void 0===l?void 0:l[e])||"")}))}),[t]),(0,c.useEffect)((()=>{if("undefined"===typeof O){var e,t;let l="2",n="2",o="cms",d="Kilogram";const r=["US","CA"],c=null===(e=(null===y||void 0===y?void 0:y.country)||(null===y||void 0===y?void 0:y.countryCode))||void 0===e?void 0:e.toUpperCase(),u=null===j||void 0===j||null===(t=j.countryCode)||void 0===t?void 0:t.toUpperCase();if(r.includes(c)||r.includes(u)?(l=1,n=1,o="Inches",d="Pound",i.setFieldValue("dimensionsUom".concat(a),"INCH"),i.setFieldValue("unitOfMeasure".concat(a),"LB")):(i.setFieldValue("dimensionsUom".concat(a),"CMS"),i.setFieldValue("unitOfMeasure".concat(a),"KG")),""!=l&&""!=n){s({dimensionsUom:o,weightUom:d,index:a})}}}),[y,j]),(0,I.jsx)(f.Z,{className:'border-muted mb-5 mt-10 shadow-none"}',children:(0,I.jsx)("div",{className:"border-bottom-muted pt-5 px-10",children:(0,I.jsx)(m.Z,{className:"p-16",gutter:5,children:(0,I.jsxs)(p.Z,{sm:24,children:[(0,I.jsxs)(m.Z,{gutter:24,children:[!o&&(0,I.jsx)(p.Z,{sm:1,children:(0,I.jsx)(fe.Z,{name:"selectSummary"+a,onClick:e=>{(e=>{e.stopPropagation(),n(t,d)})(e)},checked:d})}),!o&&(null===t||void 0===t?void 0:t.crateNo)&&(0,I.jsx)(p.Z,{sm:3,children:(0,I.jsx)(v.Z,{label:x("translation:default.fields.packageID.label"),name:"crateNo"+a,editMode:!0,disabled:!0,maxLength:"25"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(je.Z,{margin:"mb-30",label:x("translation:default.fields.packageType.label"),placeholder:"",name:"packageType"+a,editMode:!0,rules:[{required:!1,message:x("translation:default.fields.packageType.message")}]})}),(0,I.jsx)(p.Z,{sm:o?5:4,children:(0,I.jsx)(v.Z,{inputType:"number",margin:"mb-30",label:x("translation:default.fields.packageWeight"),name:"packageWeight"+a,editMode:!0,rules:[{required:!0,message:x("translation:default.fields.pleaseEnterPackageWeight")}],onChange:e=>k(e,"totalWeight")})}),(0,I.jsx)(p.Z,{sm:o?5:4,children:(0,I.jsx)(Ze.Z,{label:x("translation:shipment.weightUnitOfMeasure"),placeholder:x("translation:shipment.weightUnitOfMeasure"),editMode:!0,margin:"mb-30",name:"unitOfMeasure"+a,rules:[{required:!0,message:x("translation:shipment.pleaseSelectUnitOfMeasure")}],onChange:e=>k(e,"weightUom",!0)})}),(0,I.jsx)(p.Z,{sm:o?5:4,children:(0,I.jsx)(v.Z,{inputType:"number",margin:"mb-30",label:x("translation:default.fields.quantity.label"),name:"billedQuantity"+a,editMode:!0,onChange:e=>k(e,"quantity"),rules:[{required:!0,message:x("translation:default.fields.quantity.message")}]})}),(0,I.jsx)(p.Z,{sm:o?5:4,children:(0,I.jsx)(xe,{margin:"mb-30",label:x("translation:default.fields.packageLoadType.label"),placeholder:"",name:"packageLoadType"+a,editMode:!0,rules:[{required:!0,message:x("translation:default.fields.packageLoadType.message")}],onChange:e=>k(e,"packageTypeCode",!0)})})]}),(0,I.jsxs)(m.Z,{gutter:24,children:[!o&&(0,I.jsx)(p.Z,{sm:1}),(0,I.jsx)(p.Z,{sm:o?4:3,children:(0,I.jsx)(v.Z,{inputType:"number",margin:"mb-30",label:x("translation:default.fields.length"),name:"length"+a,editMode:!0,rules:[{required:!0,message:x("translation:purchase-order-view.fields.length.message")}],onChange:e=>k(e,"length"),maxLength:"5"})}),(0,I.jsx)(p.Z,{sm:o?5:4,children:(0,I.jsx)(v.Z,{inputType:"number",margin:"mb-30",label:x("translation:default.fields.width"),name:"width"+a,editMode:!0,rules:[{required:!0,message:x("translation:purchase-order-view.fields.width.message")}],onChange:e=>k(e,"width"),maxLength:"5"})}),(0,I.jsx)(p.Z,{sm:o?5:4,children:(0,I.jsx)(v.Z,{inputType:"number",margin:"mb-30",label:x("translation:default.fields.height"),name:"height"+a,editMode:!0,rules:[{required:!0,message:x("translation:purchase-order-view.fields.height.message")}],onChange:e=>k(e,"height"),maxLength:"5"})}),(0,I.jsx)(p.Z,{sm:o?5:4,children:(0,I.jsx)(ye.Z,{label:x("translation:default.fields.dimUnitOfMeasure.label"),placeholder:x("translation:default.fields.dimUnitOfMeasure.message"),editMode:!0,margin:"mb-5",name:"dimensionsUom"+a,rules:[{required:!0,message:x("translation:default.fields.dimUnitOfMeasure.message")}],onChange:e=>k(e,"dimensionsUom",!0)})}),(0,I.jsx)(p.Z,{sm:o?5:4,children:(0,I.jsx)(v.Z,{inputType:"number",margin:"mb-5",label:x("translation:default.fields.cube.label"),placeholder:x("translation:default.fields.cube.placeholder"),name:"cube"+a,singleLineMode:!1,editMode:!0,rules:[{required:!0,message:x("translation:default.fields.cube.message")}],onChange:e=>k(e,"cube"),maxLength:"9"})})]})]})})})})},Ce=e=>{var t,l,a,i;let{selectedTabKey:n,shipmentKey:s}=e;const o=(0,h.I0)(),[d,r]=(0,c.useState)(!1),[v,f]=(0,c.useState)(!1),[g,x]=(0,c.useState)(!1),{selectedShipmentSummary:j,vendorShipmentSummaryList:Z,updateShipmentSummary:b}=(0,h.v9)((e=>e.poVendor)),[C]=u.Z.useForm(),[N]=u.Z.useForm(),{pathname:F}=(0,D.TH)(),S=(0,c.useMemo)((()=>(0,V.F)(F)),[F]),{t:w}=(0,M.$G)([S,"translation"]);(0,c.useEffect)((()=>{const e=[...null===Z||void 0===Z?void 0:Z.data];o((0,T.fj)(e||[]))}),[null===Z||void 0===Z?void 0:Z.data]),(0,c.useEffect)((()=>{g&&K(g)}),[g]);let O=null===Z||void 0===Z||null===(t=Z.data)||void 0===t?void 0:t.filter((e=>{return t=e.crateNo,!isNaN(t);var t}));var L;(null===Z||void 0===Z||null===(l=Z.data)||void 0===l?void 0:l.length)===O.length&&(null===Z||void 0===Z||null===(L=Z.data)||void 0===L||L.sort(((e,t)=>parseFloat(e.crateNo)-parseFloat(t.crateNo))));const k=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0;switch(t){case"dimensionsUom":C.setFieldsValue({dimensionsUom:null===e||void 0===e?void 0:e.label});break;case"weightUom":C.setFieldsValue({weightUomName:null===e||void 0===e?void 0:e.label})}let i=[...j];i[a]="both"===t?{...j[a],...e}:{...j[a],[t]:l?null===e||void 0===e?void 0:e.label:null===e||void 0===e?void 0:e.target.value},o((0,T.fj)(i))},E=()=>{f(!1)},P=()=>{r(!1)},K=e=>{let t=[...j];t.length&&(t.forEach(((t,l)=>{t.dimensionsUom=e.dimensionsUom,t.weightUom=e.weightUom})),o((0,T.fj)(t)))},U=e=>{x(e)},W=(e,t,l)=>(t in e&&(e[l]=e[t]),e),R=(e,t)=>{let l=[...b];if(t){let t=l.findIndex((t=>t.gId===e.gId));l.splice(t,1)}else l.push(e);o((0,T.bA)(l))};return(0,I.jsxs)(c.Fragment,{children:[Z&&Z.progressing?(0,I.jsx)(A.Z,{}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(m.Z,{className:"align-items-center mb-15",justify:"space-between",children:(0,I.jsx)(p.Z,{sm:24,children:(0,I.jsxs)(m.Z,{justify:"end",align:"middle",gutter:16,children:[(0,I.jsx)(p.Z,{children:(0,I.jsx)(fe.Z,{name:"selectAllSummary",onClick:e=>{(e=>{if(e){const t=e.target.checked?[...null===Z||void 0===Z?void 0:Z.data]:[];o((0,T.bA)(t))}})(e)},checked:(null===b||void 0===b?void 0:b.length)>0&&b.length===(null===Z||void 0===Z||null===(a=Z.data)||void 0===a?void 0:a.length),className:"normal-checkbox"})}),(0,I.jsx)(p.Z,{sm:4,children:(0,I.jsx)(y.Z,{onClick:()=>{b.length?(N.resetFields(),f(!0)):r(!0)},children:w("translation:default.buttons.updateSelectedRecords")})})]})})}),null===Z||void 0===Z||null===(i=Z.data)||void 0===i?void 0:i.map(((e,t)=>(0,I.jsx)("div",{children:(0,I.jsx)(u.Z,{name:"shipmentSummary",form:C,children:(0,I.jsx)(be,{data:e,index:t,form:C,selectedTabKey:n,shipmentKey:s,onChangeHandles:k,updateValues:U,update:!1,isSelected:null===b||void 0===b?void 0:b.some((t=>(null===t||void 0===t?void 0:t.gId)===(null===e||void 0===e?void 0:e.gId))),onSelect:R},t)})},t)))]}),(0,I.jsx)(Q.Z,{title:w("translation:default.fields.updateShipmentSummary"),open:v,className:"h-auto",okText:w("translation:default.buttons.save"),cancelText:w("translation:default.buttons.cancel"),onClose:()=>{N.resetFields(),E()},onCancel:()=>{N.resetFields(),E()},onOk:()=>{N.submit()},children:(0,I.jsx)(u.Z,{form:N,name:"updateShipmentSummary",onFinish:e=>{const t={...e};E();let l=W(t,"billedQuantity","puomTotalQuantity");l=W(t,"billedQuantity","puomTotalQuantity"),l=W(t,"packageWeight","totalWeight"),l=W(t,"packageLoadType","packageTypeCode"),l=W(t,"packageType","packageUom"),(e=>{let t=[...null===Z||void 0===Z?void 0:Z.data];const l=null===t||void 0===t?void 0:t.map((t=>b.some((e=>e.gId===t.gId))?Object.assign({},t,e):Object.assign({},t))),a={data:[...l],isUpdate:!0};o((0,T.ZH)(a)),o((0,T.fj)(l))})(l)},children:(0,I.jsx)(be,{index:"",form:N,onChangeHandles:k,updateValues:U,update:!0})})}),(0,I.jsx)(q.Z,{onOk:P,onCancel:()=>P,onClose:()=>r(!1),open:d,cancelButton:!0,description:w("translation:default.fields.pleaseSelectAnyItem"),title:w("translation:default.fields.alert"),okText:"Ok"})]})};var Ne=l(76174);const Fe=()=>{const{vendorShipmentLadingList:e}=(0,h.v9)((e=>e.poVendor)),[t]=u.Z.useForm(),{pathname:l}=(0,D.TH)(),a=(0,c.useMemo)((()=>(0,V.F)(l)),[l]),{t:i}=(0,M.$G)([a,"translation"]);return(0,c.useEffect)((()=>{var l,a,i,n,s;t.setFieldValue("invoiceNumber",(null===e||void 0===e?void 0:e.data)&&(null===e||void 0===e||null===(l=e.data[0])||void 0===l?void 0:l.invoiceNumber)),t.setFieldValue("containerNumber",(null===e||void 0===e?void 0:e.data)&&(null===e||void 0===e||null===(a=e.data[0])||void 0===a?void 0:a.containerNumber)),t.setFieldValue("specialInstructions",(null===e||void 0===e?void 0:e.data)&&(null===e||void 0===e||null===(i=e.data[0])||void 0===i?void 0:i.specialInstruction)),t.setFieldValue("pickUpReference",(null===e||void 0===e?void 0:e.data)&&(null===e||void 0===e||null===(n=e.data[0])||void 0===n?void 0:n.pickUpReference)),t.setFieldValue("houseBillOfLadingNumber",(null===e||void 0===e?void 0:e.data)&&(null===e||void 0===e||null===(s=e.data[0])||void 0===s?void 0:s.billOfLadingNumber))}),[e]),(0,I.jsx)(u.Z,{name:"shipmentLandingList",form:t,children:(0,I.jsx)(f.Z,{className:'border-muted mb-5 mt-10 shadow-none"}',children:(0,I.jsx)("div",{className:"border-bottom-muted pt-5 px-10",children:(0,I.jsx)(m.Z,{className:"p-16",gutter:5,children:(0,I.jsxs)(p.Z,{sm:24,children:[(0,I.jsxs)(m.Z,{gutter:24,children:[(0,I.jsx)(p.Z,{sm:6,children:(0,I.jsx)(v.Z,{margin:"mb-5",label:i("translation:default.fields.pickUpReference.label"),placeholder:i("translation:default.fields.pickUpReference.message"),name:"pickUpReference",singleLineMode:!1,editMode:!0})}),(0,I.jsx)(p.Z,{sm:6,children:(0,I.jsx)(v.Z,{margin:"mb-30",placeholder:"",label:i("translation:purchase-order-view.fields.houseBillofLadingNumber.label"),name:"houseBillOfLadingNumber",editMode:!0,rules:[]})}),(0,I.jsx)(p.Z,{sm:6,children:(0,I.jsx)(v.Z,{margin:"mb-30",label:i("translation:default.fields.invoiceNumber"),name:"invoiceNumber",editMode:!0})}),(0,I.jsx)(p.Z,{sm:6,children:(0,I.jsx)(v.Z,{margin:"mb-30",label:i("translation:purchase-order-view.fields.containerNumber.label"),name:"containerNumber",editMode:!0})})]}),(0,I.jsx)(m.Z,{gutter:24,children:(0,I.jsx)(p.Z,{sm:13,children:(0,I.jsx)(Ne.Z,{enableAutoFocus:!1,editMode:!0,label:i("translation:default.fields.specialInstructions"),name:"specialInstructions",rows:4,maxLength:1e3})})})]})})})})})};var Se=l(763),we=l.n(Se),Te=l(72330),De=l(89017),Me=l(5045),Ve=(l(56521),l(75880),l(95)),Ie=l(37859),Oe=l.n(Ie),Le=l(74028),ke=l(3223),Ee=l(99979),Pe=l(9135);const Ke=e=>{var t,l;let{isNew:a,fileDetails:i,handleSave:n,handleDelete:s,index:o,uploadedDocumentTypes:d,allowedExtentions:r,renderKey:h,editRecord:g=(()=>{})}=e;const[j,Z]=(0,c.useState)(Boolean(i.isNew)),[b,C]=(0,c.useState)(!1),[N]=u.Z.useForm(),{pathname:F}=(0,D.TH)(),S=(0,c.useMemo)((()=>(0,V.F)(F)),[F]),{t:w}=(0,M.$G)([S,"translation"]),T=u.Z.useWatch("file",N),O=u.Z.useWatch("documentDesc",N);return(0,c.useEffect)((()=>{Z(Boolean(i.isNew))}),[i.isNew]),(0,I.jsxs)(u.Z,{form:N,onFinish:e=>{const t=new FormData;t.append("DocumentTitle",(null===e||void 0===e?void 0:e.documentTitle)||""),t.append("ReferenceNo",(null===e||void 0===e?void 0:e.referenceNo)||""),t.append("DocumentTypeCode",(null===e||void 0===e?void 0:e.docTypeCode)||""),t.append("DocumentDesc",(null===e||void 0===e?void 0:e.documentDesc)||""),b&&t.append("File",b);let l=new FileReader;l.readAsDataURL(b),l.onload=function(i){let s={FileString:l.result.substr(i.target.result.indexOf(",")+1),FileName:b.name,DocumentDesc:(null===e||void 0===e?void 0:e.documentDesc)||"",DocumentTitle:(null===e||void 0===e?void 0:e.documentTitle)||"",ReferenceNo:(null===e||void 0===e?void 0:e.referenceNo)||"",DocumentTypeCode:(null===e||void 0===e?void 0:e.docTypeCode)||"",renderKey:h};n(t,a,s)}},initialValues:i,initialValues:null!==i&&void 0!==i&&i.fileGuid?{docTypeCode:i.fileType,referenceNo:i.referenceNo,documentTitle:i.fileComments,documentDesc:i.fileDescription,file:i.file}:{},children:[(0,I.jsxs)(f.Z,{className:"border-muted mb-16",children:[(0,I.jsx)("div",{className:"border-bottom-muted px-16 pt-8 pb-10",children:(0,I.jsxs)(m.Z,{justify:"space-between",align:"middle",children:[(0,I.jsx)(p.Z,{children:(0,I.jsxs)(m.Z,{gutter:5,align:"middle",children:[(0,I.jsx)(p.Z,{children:(0,I.jsx)(x.Z,{className:"f-12",children:w("translation:default.fields.fileName")})}),(0,I.jsxs)(p.Z,{children:[j&&r&&(0,I.jsx)(Oe(),{className:"files-dropzone",onChange:e=>{try{e.length>0&&(C(e[0]),N.setFieldsValue({file:e[0].name}))}catch(t){console.log(t)}},onError:e=>{try{e&&N.setFields([{name:"file",errors:[e.message]}])}catch(e){console.log(e)}},accepts:r,multiple:!1,minFileSize:0,clickable:!0,children:(0,I.jsx)(y.Z,{children:w("translation:default.documentManager.chooseFile")})}),(0,I.jsx)(R.Z,{name:"file",rules:[{required:!0,message:w("translation:default.documentManager.chooseFileMessage")}]})]}),(0,I.jsx)(p.Z,{children:(0,I.jsx)("a",{className:"f-14 fw-600",target:"_blank",href:b&&URL.createObjectURL(b),rel:"noreferrer",children:T})})]})}),(0,I.jsx)(p.Z,{children:(0,I.jsxs)(m.Z,{gutter:16,align:"middle",children:[(null===i||void 0===i||null===(t=i.cloudUrl)||void 0===t?void 0:t.length)>0&&(0,I.jsx)(p.Z,{children:(0,I.jsx)("a",{target:"_blank",href:null===i||void 0===i||null===(l=i.cloudUrl)||void 0===l?void 0:l[0],rel:"noreferrer",children:(0,I.jsx)(G.Z,{children:(0,I.jsx)(L.Z,{Icon:Ve.r,color:"header"})})})}),!1===a&&""!=(null===i||void 0===i?void 0:i.FileString)&&(0,I.jsxs)(p.Z,{className:"d-flex gap-1",children:[(0,I.jsx)(Ee.r,{onClick:()=>g(i)}),(0,I.jsx)(Pe.r,{onClick:()=>s(o,a)})]}),a?(0,I.jsx)(p.Z,{className:"lh-0",children:(0,I.jsx)(Le.Z,{editMode:j,setEditMode:Z,onCancel:()=>{a?s(o,a,"close"):(N.setFieldsValue({docTypeCode:i.fileType,referenceNo:i.referenceNo,documentTitle:i.fileComments,documentDesc:i.fileDescription}),Z(!1))},handleRemove:()=>s(o,a)})}):""]})})]})}),(0,I.jsxs)(m.Z,{className:"p-16",gutter:16,children:[(0,I.jsx)(p.Z,{sm:6,children:(0,I.jsx)(m.Z,{children:(0,I.jsx)(p.Z,{sm:24,children:(0,I.jsx)(ke.Z,{editMode:!!j&&Boolean(a),margin:"mb-16",name:"docTypeCode",moduleId:oe.mS.SHIPMENT,rules:[{required:!0,message:w("translation:default.documentManager.docType.message")},{validator:(e,t)=>a&&0!==(0,Se.filter)(d,(e=>e===t)).length?Promise.reject():Promise.resolve(),message:"".concat(O," ").concat(w("translation:default.documentManager.docDescMessage"))}],onChange:e=>{let{label:t}=e;return N.setFieldsValue({documentDesc:t})}})})})}),(0,I.jsx)(p.Z,{sm:6,children:(0,I.jsx)(m.Z,{children:(0,I.jsx)(p.Z,{sm:24,children:(0,I.jsx)(v.Z,{label:w("translation:default.documentManager.referenceNo.label"),editMode:!!j&&Boolean(a),margin:"mb-0",name:"referenceNo"})})})}),(0,I.jsx)(p.Z,{sm:6,children:(0,I.jsx)(m.Z,{children:(0,I.jsx)(p.Z,{sm:24,children:(0,I.jsx)(v.Z,{label:w("translation:default.fields.transportationProvider.label"),editMode:!!j&&Boolean(a),margin:"mb-0",name:"carrierName"})})})}),(0,I.jsx)(p.Z,{sm:6,children:(0,I.jsx)(m.Z,{children:(0,I.jsx)(p.Z,{sm:24,children:(0,I.jsx)(v.Z,{label:w("translation:default.documentManager.fileComments.label"),editMode:!!j&&Boolean(a),margin:"mb-0",name:"documentTitle"})})})})]})]}),(0,I.jsx)(R.Z,{name:"documentDesc"})]})},Ue=e=>{let{shipmentKey:t}=e;const[l,a]=(0,c.useState)([]),{shipmentDetails:i,documentDetails:n}=(0,h.v9)((e=>e.shipment)),{createShipment:s}=(0,h.v9)((e=>e.poVendor)),{user:o}=(0,h.v9)((e=>e.auth)),d=(0,h.v9)((e=>e.common.notificationAPI)),{purchaseOrderFilters:r}=(0,h.v9)((e=>e.purchaseOrder)),{pathname:u}=(0,D.TH)(),v=(0,c.useMemo)((()=>(0,V.F)(u)),[u]),{t:f}=(0,M.$G)([v,"translation"]),g=(0,h.I0)();(0,c.useEffect)((()=>{n.success&&a(n.data.map((e=>({...e,renderKey:we().uniqueId()}))))}),[null===n||void 0===n?void 0:n.success]),(0,c.useEffect)((()=>{null!==i&&void 0!==i&&i.success&&x()}),[null===i||void 0===i?void 0:i.success]),(0,c.useEffect)((()=>{if(null!==s&&void 0!==s&&s.success){var e;let t={shipmentKey:null===s||void 0===s||null===(e=s.data[0])||void 0===e?void 0:e.shipmentKey,customerKey:null===r||void 0===r?void 0:r.customerKey};g((0,De.fe4)(t))}}),[s]),(0,c.useEffect)((()=>{g((0,De.yn7)(l))}),[l]);const x=()=>{let e={shipmentKey:t,customerKey:null===r||void 0===r?void 0:r.customerKey};g((0,De.fe4)(e))},j=async function(e,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===t){let t=we().cloneDeep(l);if(null===n)t.splice(e,1);else{let l=t[e];null!==l&&void 0!==l&&l.FileString?t.forEach((e=>{e.renderKey===l.renderKey&&(e.isNew=!e.isNew)})):t.splice(e,1)}a(t)}else try{let n=we().cloneDeep(l);if(!i){g((0,re.ef)(!0));let l={shipmentKey:t,documentFileName:n[e].fileGuid};await(0,Me.cT)(l),g((0,re.ef)(!1)),(0,me.Nh)(d,{type:oe.GT.SUCCESS,title:f("translation:default.fields.documentManager.notificationDeleteSuccess")})}n.splice(e,1),a(n)}catch(s){g((0,re.ef)(!1)),console.log(s),(0,me.Nh)(d,{type:oe.GT.ERROR,title:f("translation:default.fields.documentManager.notificationDeleteError")})}},Z=async function(e,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===t){let e=[...l];const t=e.findIndex((e=>e.renderKey===n.renderKey));e=[...e.slice(0,t),{...e[t],...n,isNew:!1},...e.slice(t+1)],a(e)}else{g((0,re.ef)(!0));try{e.append("CustomerKey",null===r||void 0===r?void 0:r.customerKey),e.append("ShipmentKey",t),i?(e.append("CreatedBy",o.data.id),await(0,Me.KL)(e),(0,me.Nh)(d,{type:oe.GT.SUCCESS,title:f("translation:default.fields.documentManager.notificationUploadingSuccess")}),g((0,re.ef)(!1)),x()):(e.append("CreatedBy",o.data.id),await(0,Me.G$)(e),(0,me.Nh)(d,{type:oe.GT.SUCCESS,title:f("translation:default.fields.documentManager.notificationUpdatingSuccess")}),g((0,re.ef)(!1)),x())}catch(s){console.log(s),g((0,re.ef)(!1)),(0,me.Nh)(d,{type:oe.GT.ERROR,title:f("translation:default.fields.documentManager.notificationUploadingFailed")})}}},b=(0,Te.Z)(oe.mS.SHIPMENT),C=(0,c.useMemo)((()=>(0,Se.remove)(l.map((e=>{let{fileType:t}=e;return t||!1})),(e=>Boolean(e)))),[l]);return(0,I.jsxs)("div",{children:[(0,I.jsxs)(m.Z,{className:"align-items-center mb-15",justify:"space-between",children:[(0,I.jsx)(p.Z,{}),(0,I.jsx)(p.Z,{children:t>=0?(0,I.jsx)(m.Z,{justify:"end",gutter:16,children:(0,I.jsx)(p.Z,{children:(0,I.jsx)(y.Z,{onClick:()=>{let e=we().cloneDeep(l);e=[{renderKey:we().uniqueId(),isNew:!0},...e],a(e)},children:f("translation:default.documentManager.addNewFile")})})}):""})]}),n.progressing?(0,I.jsx)(A.Z,{size:"large"}):(0,I.jsx)(I.Fragment,{children:t>=0&&l.length>0?l.map(((e,t)=>(0,I.jsx)(Ke,{renderKey:e.renderKey,fileDetails:e,handleDelete:j,handleSave:Z,isNew:e.isNew,index:t,uploadedDocumentTypes:C,allowedExtentions:b,editRecord:e=>{let t=we().cloneDeep(l);t.forEach((t=>{t.renderKey===e.renderKey&&(t.isNew=!t.isNew)})),a(t)}},e.renderKey))):(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("div",{className:"p-30 text-center",children:f("translation:default.documentManager.noFoundText")})})})]})},qe=e=>{let{activeKey:t,setActiveKey:l,shipmentKey:a}=e;const{pathname:i}=(0,D.TH)(),n=(0,c.useMemo)((()=>(0,V.F)(i)),[i]),{t:s}=(0,M.$G)([n,"translation"]),o=e=>{let{title:t,Icon:l,size:a=25}=e;return(0,I.jsxs)(m.Z,{gutter:10,align:"middle",children:[(0,I.jsx)(p.Z,{className:"lh-0",children:(0,I.jsx)(L.Z,{width:a,height:a,Icon:l})}),(0,I.jsx)(p.Z,{className:"lh-0",children:(0,I.jsx)("label",{className:"lh-0 text-dark cursor-pointer",children:t})})]})};return(0,I.jsx)(K.Z,{forceRender:!0,handleTabClick:e=>{e&&e[1]?l(e[1]):l("")},activeKey:t,showArrow:!1,tabs:[{content:(0,I.jsx)(ve,{shipmentKey:a}),header:(0,I.jsx)(o,{title:s("translation:purchase-order-view.shipmentEntry"),Icon:k.r,size:25})},{content:(0,I.jsx)(J,{selectedTabKey:t,shipmentKey:a}),header:(0,I.jsx)(o,{title:s("translation:purchase-order-view.shipmentItemDetails"),Icon:F.r,size:25})},{content:(0,I.jsx)(Ce,{selectedTabKey:t,shipmentKey:a}),header:(0,I.jsx)(o,{title:s("translation:purchase-order-view.shipmentSummary"),Icon:P.r,size:25})},{content:(0,I.jsx)(Fe,{selectedTabKey:t,shipmentKey:a}),header:(0,I.jsx)(o,{title:s("translation:purchase-order-view.shipmentLandingList"),Icon:P.r,size:25})},{content:(0,I.jsx)(Ue,{shipmentKey:a||0}),header:(0,I.jsx)(o,{title:s("translation:default.documentManager.title"),Icon:E.r,size:25})}]})},Ae=e=>{let{routingGuide:t,handleSelect:l,key:a}=e;const{pathname:i}=(0,D.TH)(),n=(0,c.useMemo)((()=>(0,V.F)(i)),[i]),{t:s}=(0,M.$G)([n,"translation"]);return(0,I.jsx)(f.Z,{className:"mb-15 py-10 px-15",border:!0,children:(0,I.jsxs)(m.Z,{gutter:15,align:"middle",children:[(0,I.jsx)(p.Z,{flex:1,children:(0,I.jsxs)(m.Z,{gutter:15,align:"middle",children:[(0,I.jsxs)(p.Z,{sm:12,children:[(0,I.jsx)(g.Z,{children:s("translation:default.fields.transportationProvider.label")}),(0,I.jsx)("br",{}),(0,I.jsx)(x.Z,{className:"f-14 fw-600",children:t.carrierName})]}),(0,I.jsxs)(p.Z,{sm:12,children:[(0,I.jsx)(g.Z,{children:s("translation:default.fields.cargoType.label")}),(0,I.jsx)("br",{}),(0,I.jsx)(x.Z,{className:"f-14 fw-600",children:t.cargoType})]})]})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(y.Z,{onClick:()=>l(t),children:s("translation:default.buttons.select")})})]})},a)};var We=l(29540);const Re=()=>{var e,t;const[l,a]=(0,c.useState)(["1","2","3","4"]),[i,n]=(0,c.useState)(!1),[s,o]=(0,c.useState)("D"),{selectedCompany:d}=(0,h.v9)((e=>e.auth)),{purchaseOrderFilters:r}=(0,h.v9)((e=>e.purchaseOrder)),{documentDetails:x,documentUploadData:Z}=(0,h.v9)((e=>e.shipment)),b=(0,h.v9)((e=>e.common.notificationAPI)),{pathname:S}=(0,D.TH)(),w=(0,c.useMemo)((()=>(0,V.F)(S)),[S]),{t:L}=(0,M.$G)([w,"translation"]),k=(0,h.I0)(),{vendorShipmentItemDetailList:E,selectedConsignee:P,selectedShipper:K,vendorShipmentSummaryList:U,createShipment:A,cancelShipment:W,savedShipmentDatas:R,selectedShipmentSummary:G,vendorShipmentLadingList:H,selectedShipmentItemDetail:B,customerRouterSetting:Y,getRoutingGuide:z,payloadShipData:$}=((0,c.useRef)(null),(0,h.v9)((e=>e.poVendor))),{releaseOrderInfo:_,purchaseOrderShipmentData:J}=(0,h.v9)((e=>e.purchaseOrder)),[X]=u.Z.useForm(),{userInfo:ee}=(0,me.PL)();let te=(0,D.s0)(),{shipmentKey:le,shipmentNumber:ae,requestID:ie}=(0,D.UO)();const[ne,se]=(0,c.useState)(!1),[de,ce]=(0,c.useState)(!1),[ue,pe]=(0,c.useState)(!1),[he,ve]=(0,c.useState)(!1),[fe,ge]=(0,c.useState)(!1),[xe,ye]=(0,c.useState)(!1),je=e=>{"draft"===e&&(pe(!0),ve(!1)),"parcel"===e&&(pe(!1),ve(!0)),X.submit()};(0,c.useEffect)((()=>{k((0,De.yn7)([]))}),[]),(0,c.useEffect)((()=>{var e,t;le&&(void 0==(null===r||void 0===r?void 0:r.customerKey)||""==(null===r||void 0===r?void 0:r.customerKey))&&null!==E&&void 0!==E&&null!==(e=E.data)&&void 0!==e&&e.customerKey?k((0,T.u7)({customerKey:null===E||void 0===E||null===(t=E.data)||void 0===t?void 0:t.customerKey})):null!==r&&void 0!==r&&r.customerKey&&k((0,T.u7)({customerKey:null===r||void 0===r?void 0:r.customerKey}))}),[null===r||void 0===r?void 0:r.customerKey,E]);const Ze=(0,c.useRef)();(0,c.useEffect)((()=>{Ze.current&&(null===d||void 0===d?void 0:d.companyId)!=Ze.current&&(k((0,We.dD)([])),k((0,We.qQ)({data:[]})),k((0,T.rh)()),te(-1)),Ze.current=null===d||void 0===d?void 0:d.companyId}),[k,te,null===d||void 0===d?void 0:d.companyId]),(0,c.useEffect)((()=>{if(null!==A&&void 0!==A&&A.success){let a=_.filter((e=>!J.some((t=>t.expShipDate===e.expShipDate))));var e,t,l;if(k((0,We.dD)(a)),k((0,We.dv)([])),"D"===s)null!==(e=A.data)&&void 0!==e&&e.length&&(A.data[0].shipmentType="Draft");if("F"===s)null!==(t=A.data)&&void 0!==t&&t.length&&(A.data[0].shipmentType="Final");if(k((0,T.pM)(null===A||void 0===A?void 0:A.data)),le)"F"===s?te("./../../purchase-order-management/shipment-search"):"P"===s?de&&ye(!0):te("./../../purchase-order-management/draft-search");else A.data&&(null===(l=A.data)||void 0===l?void 0:l.length)>0&&("D"===s?te("./../../purchase-order-management/draft-search"):"P"===s?de&&ye(!0):te("F"===s?"./../../purchase-order-management/shipment-search":"./../../purchase-order-management"));k((0,re.ef)(!1))}null!==A&&void 0!==A&&A.error&&k((0,re.ef)(!1))}),[A]),(0,c.useEffect)((()=>{null!==W&&void 0!==W&&W.success&&(k((0,re.ef)(!1)),k((0,T.I7)()),te("./../../purchase-order-management/draft-search"))}),[W]);const[be,Ce]=(0,c.useState)({name:"",data:""}),Ne=async(e,t)=>{if("updateShipmentSummary"===e)return!0;let l="",i="";("saveAsDraftBtn"===e||ue)&&(l=le?"U":"",i="Draft",o("D")),("saveAsParcelExpressBtn"===e||he)&&(l=le?"U":"",o("P"),ce(!0)),"createFinalShipmentBtn"===e&&(o("F"),l=le?"U":"");t.forms.shipmentEntry.getFieldValue("shipperName");if(e&&"saveShipperForm"!==e&&"UploadShipmentDocument"!=e&&"shipmentSummary"!=e){try{await t.forms.shipmentEntry.validateFields()}catch(D){return void a(1)}try{await t.forms.shipmentItemDetail.validateFields()}catch(D){return void a(2)}try{await t.forms.shipmentSummary.validateFields()}catch(D){return void a(3)}const o=await t.forms.shipmentEntry.validateFields(),M=await t.forms.shipmentItemDetail.validateFields(),V=await t.forms.shipmentSummary.validateFields();let I=[];if(k((0,T.Dd)({})),!(o&&M&&V))return(0,me.Nh)(b,{type:oe.GT.ERROR,title:L("translation:purchase-order-view.kindlyFillAllRequiredFields")}),!1;try{var n,s,c,u,m,p,h,v,f,g,y;let a="";if("createFinalShipmentBtn"===e&&"AIR"==(null===t||void 0===t||null===(n=t.forms)||void 0===n||null===(s=n.shipmentEntry)||void 0===s?void 0:s.getFieldValue("portType"))&&null!==Y&&void 0!==Y&&Y.data&&null!==Y&&void 0!==Y&&Y.data.length&&"Y"==(null===Y||void 0===Y?void 0:Y.data[0].isAirApprover)&&""==(null===t||void 0===t||null===(c=t.forms)||void 0===c||null===(u=c.approverForm)||void 0===u?void 0:u.getFieldValue("specialInstuction")))return Ce({name:e,data:t}),void se(!0);var j,C;if("AIR"==(null===t||void 0===t||null===(m=t.forms)||void 0===m||null===(p=m.shipmentEntry)||void 0===p?void 0:p.getFieldValue("portType"))&&null!==Y&&void 0!==Y&&Y.data&&null!==Y&&void 0!==Y&&Y.data.length&&"Y"==(null===Y||void 0===Y?void 0:Y.data[0].isAirApprover))a="Freight Approver: "+(null===t||void 0===t||null===(j=t.forms)||void 0===j||null===(C=j.approverForm)||void 0===C?void 0:C.getFieldValue("specialInstuction"));let o;var N,F;if(se(!1),k((0,re.ef)(!0)),le)o=null===(N=B[0])||void 0===N?void 0:N.createdOn;else o=null===(F=B[0])||void 0===F?void 0:F.orderShipDate;let b={customerKey:null===r||void 0===r?void 0:r.customerKey,customerName:"T",shipDate:o,orderDeliveryDate:o,specialInstruction:"".concat(t.forms.shipmentLandingList.getFieldValue("specialInstructions")?t.forms.shipmentLandingList.getFieldValue("specialInstructions"):""," ").concat(a).trim(),shipmentType:i||"",shipmentKey:le?parseInt(le):0,shipmentNo:(null===E||void 0===E||null===(h=E.data)||void 0===h?void 0:h.shipmentNo)||"",isDraftUpdate:l.toString(),vendorKey:null===d||void 0===d?void 0:d.companyId,vendorLogonID:null===ee||void 0===ee?void 0:ee.email,userGuid:null===ee||void 0===ee?void 0:ee.userGuid},D=K;Object.keys(D).map((function(e){null==D[e]&&(D[e]="")})),D.countryCode=D.country,D.stateCode=K.state,D.appointmentType=D.appointmentType?D.appointmentType.trim():"",D.daysOfWeek=D.daysOfWeek?D.daysOfWeek.trim():"",D.phoneCountry="",D.fromDay="",D.toDay="",D.fromTime="",D.toTime="",D.email=D.email?D.email:"",D.portRecKey=0,D.portCode=t.forms.shipmentEntry.getFieldValue("portCode")?t.forms.shipmentEntry.getFieldValue("portCode"):"",D.portName=t.forms.shipmentEntry.getFieldValue("portName")?t.forms.shipmentEntry.getFieldValue("portName"):"",D.portType=t.forms.shipmentEntry.getFieldValue("portType")?t.forms.shipmentEntry.getFieldValue("portType"):"",D.gridId=1;let M,V=P;Object.keys(V).map((function(e,t){null==V[e]&&(V[e]="")})),V.consigneeName=V.consigneeName?V.consigneeName.trim():"",V.consigneeStateCode=V.consigneeState?V.consigneeState.trim():"",V.consigneePortCode=t.forms.shipmentEntry.getFieldValue("conPortCode")?t.forms.shipmentEntry.getFieldValue("conPortCode"):"",V.consigneePortName=t.forms.shipmentEntry.getFieldValue("conPortName")?t.forms.shipmentEntry.getFieldValue("conPortName"):"",V.consigneePortType=t.forms.shipmentEntry.getFieldValue("conPortType")?t.forms.shipmentEntry.getFieldValue("conPortType"):"",delete V.consigneePortCountry,delete V.consigneePortState,delete V.consigneePortCity,delete V.consigneePortPostalCode,delete V.countryName,delete V.consigneeStatename,delete V.consigneePort,delete V.consigneeState,M=B,M.forEach(((e,l)=>{var a;console.log("row",e);let i={uniqueId:ee.userGuid,customerKey:e.customerKey?e.customerKey:0,boNumber:e.boNumber,branchKey:e.branchKey?e.branchKey:0,poID:e.poID,poNumber:e.poNumber,poPaymentTerm:e.poPaymentTerm,poPrice:e.poPrice?e.poPrice:0,poQuantity:e.poQuantity?e.poQuantity:0,poQuantityLeft:e.poQuantityLeft?e.poQuantityLeft:0,productCode:e.productCode?e.productCode.trim():"",quantityShippedOld:e.quantityShippedOld?e.quantityShippedOld:0,receivingDocument:e.receivingDocument?e.receivingDocument:0,rowID:e.rowID?e.rowID:0,shipmentTerms:e.shipmentTerms?e.shipmentTerms:"",validationStatus:e.validationStatus?e.validationStatus:"",isChecked:e.isChecked?e.isChecked:0,postalCode:e.postalCode?e.postalCode:"",crateNo:e.crateNo?e.crateNo:"",isMultiple:e.isMultiple?e.isMultiple:"",crateNoNum:0};i.nmfcItemNumber=(null===e||void 0===e?void 0:e.nmfcItemNumber)||(null===e||void 0===e?void 0:e.productCode)||"",i.nmfcItemNumber=i.nmfcItemNumber.trim(),i.quantityShipped=t.forms.shipmentItemDetail.getFieldValue("PoQuantityShipped"+l),i.hts=t.forms.shipmentItemDetail.getFieldValue("htcCode"+l),i.eccn=t.forms.shipmentItemDetail.getFieldValue("eccn"+l);let n=t.forms.shipmentItemDetail.getFieldValue("catchDate"+l);i.catchDate="undefined"===typeof(null===n||void 0===n?void 0:n.format(oe.K_))?"":(null===n||void 0===n?void 0:n.format(oe.K_))+"",i.countryCode=t.forms.shipmentItemDetail.getFieldValue("countryOfOrigin"+l),i.shipmentNo=(null===E||void 0===E||null===(a=E.data)||void 0===a?void 0:a.shipmentNo)||"",le?(i.productDesc=e.productDescription,i.orderShipDate=e.createdOn,i.lineNum=e.reference1,i.soNumber="",i.orderLineStatus="",i.shipmentTerms="",i.validationStatus="",i.poItemSequenceKey=e.poItemSequenceKey?e.poItemSequenceKey:0,delete i.productDescription,delete i.createdOn,delete i.reference1):(i.lineNum=e.lineNum,i.orderShipDate=e.orderShipDate,i.productDesc=e.productDesc,i.soNumber=e.soNumber,i.orderLineStatus=e.orderLineStatus,i.shipmentTerms=e.shipmentTerms,i.validationStatus=e.validationStatus,i.poItemSequenceKey=e.poItemSequenceKey),Object.keys(i).map((function(e,t){null==i[e]&&(i[e]="")})),I.push(i)}));let O=[],L=[];null===G||void 0===G||G.forEach(((e,l)=>{var a;let i=parseInt(e.width),n=parseInt(e.totalWeight),s=parseFloat(e.cube),o=parseInt(e.height),d=parseInt(e.length),r=t.forms.shipmentSummary.getFieldValue("billedQuantity"+l)?t.forms.shipmentSummary.getFieldValue("billedQuantity"+l):1;if(e.class=(0,me.Fx)(l),e.classCode=e.classCode?e.classCode:"",e.codeDesc=e.codeDesc?e.codeDesc:"",e.puomTotalQuantity=r>=0?parseInt(r):0,e.totalWeight=n>=0?n:0,e.width=i>=0?i:0,e.cube=s>=0?s:0,e.height=o>=0?o:0,e.length=d>=0?d:0,e.equipmentDesc=e.equipmentDesc?e.equipmentDesc:"",e.codeId=e.codeId?e.codeId:"",e.unitMeasureCode="cms"===e.dimensionsUom?"C":"N",e.weightUomCode="Kilogram"===e.weightUom?"KG":"LB",e.dimensionsUom="cms"===e.dimensionsUom?"C":"N",null!==I&&void 0!==I&&null!==(a=I[l])&&void 0!==a&&a.nmfcItemNumber){var c;let t={NMFCNumber:null===I||void 0===I||null===(c=I[l])||void 0===c?void 0:c.nmfcItemNumber,Weight:n,Length:d,Width:i,Height:o,dimUOM:"cms"===e.dimensionsUom?"C":"N",WeightUOM:"Kilogram"===e.weightUom?"KG":"LB"};L.push(t)}Object.keys(e).map((function(t,l){null==e[t]&&(e[t]="")})),O.push(e)}));const U=L.map((e=>(0,Me.ib)(e))),q=await Promise.all(U);let A=0;O.forEach(((e,t)=>{var l,a;null!==I&&void 0!==I&&null!==(l=I[t])&&void 0!==l&&l.nmfcItemNumber?e.class=(0,me.Fx)(null===(a=q[A++])||void 0===a?void 0:a.data)||"70":e.class="70"})),b.shipperList=[D],b.consigneeList=[V],b.shipmentItemlist=I,b.shipmentSummaryList=O,b.shipmentRoutingList=[{}];let W=[];if(le){var S,w;if((null===x||void 0===x||null===(S=x.data)||void 0===S?void 0:S.length)>0)null===x||void 0===x||null===(w=x.data)||void 0===w||w.forEach(((e,t)=>{let l={};l.cloudUrl=e.cloudUrl,l.file=e.file,l.filePath=e.filePath,l.fileGuid=e.fileGuid,l.fileType=e.fileType,l.fileDescription=e.fileDescription,l.fileComments=e.fileComments,l.referenceNo=e.referenceNo,l.mode=e.mode,l.documentSequence=e.documentSequence,W.push(l)}));else W=[];b.filelist=W}else{let e=[],t=0;Z.forEach((l=>{!1===l.isNew&&(e.push({...l,DocumentSequence:t+1}),t+=1)})),b.filelist=e}let R=[],H={};if(H.bolNo=t.forms.shipmentLandingList.getFieldValue("houseBillOfLadingNumber"),H.contNo=t.forms.shipmentLandingList.getFieldValue("containerNumber"),H.pickRefNo=t.forms.shipmentLandingList.getFieldValue("pickUpReference"),H.id=1,H.specialInstruction="".concat(t.forms.shipmentLandingList.getFieldValue("specialInstructions")?t.forms.shipmentLandingList.getFieldValue("specialInstructions"):""," ").concat(a).trim(),H.invoiceNo=t.forms.shipmentLandingList.getFieldValue("invoiceNumber"),R.push(H),b.shipmentLadingList=R,"RG"===(null===Y||void 0===Y||null===(v=Y.data)||void 0===v||null===(f=v[0])||void 0===f?void 0:f.routingMethod)&&"Draft"!==i)k((0,T.Dd)(b)),k((0,T.xD)(b)),k((0,re.ef)(!1)),ge(!0);else if("RS"===(null===Y||void 0===Y||null===(g=Y.data)||void 0===g||null===(y=g[0])||void 0===y?void 0:y.routingMethod)&&"Draft"!==i){k((0,T.Dd)(b));const{data:e}=await(0,Me.JR)((0,me.aW)(b));k((0,re.ef)(!1)),ge(!0)}else k((0,T.pL)(b))}catch(D){return k((0,re.ef)(!1)),(0,me.Nh)(b,{type:oe.GT.ERROR,title:L("translation:purchase-order-view.kindlyFillAllRequiredFields")}),!1}}},Fe=e=>{k((0,re.ef)(!0)),ge(!1),$.shipmentRoutingList=[e],k((0,T.pL)($)),k((0,T.Dd)([])),"SP"===(null===e||void 0===e?void 0:e.cargoType)&&(o("P"),ce(!0))};return(0,I.jsxs)(u.Z.Provider,{className:"overflow-hidden h-100",onFormFinish:Ne,children:[(0,I.jsx)(u.Z,{name:"approverForm",form:X,initialValues:{specialInstuction:""},children:(0,I.jsx)(Q.Z,{className:"vw-25 h-30",open:ne,title:L("translation:purchase-order-view.approver"),okText:L("translation:purchase-order-view.confirmationModal.okText"),cancelText:L("translation:default.buttons.cancel"),onCancel:()=>{X.setFieldValue("specialInstuction",""),se(!1)},onClose:()=>{X.setFieldValue("specialInstuction",""),se(!1)},onOk:()=>(()=>{var e,t,l,a,i,n;if(""==(null===be||void 0===be||null===(e=be.data)||void 0===e||null===(t=e.forms)||void 0===t||null===(l=t.approverForm)||void 0===l?void 0:l.getFieldValue("specialInstuction")))return null===be||void 0===be||null===(a=be.data)||void 0===a||null===(i=a.forms)||void 0===i||null===(n=i.approverForm)||void 0===n||n.validateFields(["specialInstuction"]),!1;Ne(be.name,be.data)})(),children:(0,I.jsx)("div",{className:"h-100 d-flex flex-direction-column",children:(0,I.jsx)("div",{className:"custom-scroll-bar",children:(0,I.jsx)(m.Z,{children:(0,I.jsx)(p.Z,{sm:24,children:(0,I.jsx)(v.Z,{editMode:!0,label:L("translation:purchase-order-view.pleaseEnterTheAir"),placeholder:L("translation:purchase-order-view.pleaseEnterTheAir"),name:"specialInstuction",rules:[{required:!0,message:L("translation:purchase-order-view.pleaseEnterTheAir")}]})})})})})})}),(0,I.jsxs)(m.Z,{className:"flex-direction-column flex-nowrap overflow-hidden h-100",children:[(0,I.jsx)(p.Z,{className:"mb-15",children:(0,I.jsx)(f.Z,{className:"p-15 border-radius-bottom-none",children:(0,I.jsxs)(m.Z,{align:"middle",justify:"space-between",children:[(0,I.jsx)(p.Z,{children:(0,I.jsx)("h3",{className:"dark-header-text",children:L("translation:purchase-order-view.createShipment")})}),(0,I.jsx)(p.Z,{children:(0,I.jsxs)(m.Z,{gutter:16,className:"px-30 align-items-center",justify:"end",children:[(0,I.jsx)(u.Z,{name:"createFinalShipmentBtn",children:(0,I.jsx)(p.Z,{children:(0,I.jsx)(y.Z,{htmlType:"submit",children:L("translation:purchase-order-view.createFinalShipment")})})}),le?(0,I.jsx)(p.Z,{children:(0,I.jsx)(j.Z,{icon:(0,I.jsx)(N.r,{}),onClick:()=>(k((0,re.ef)(!0)),void k((0,T.s4)({shipmentKey:le}))),children:(0,I.jsxs)("label",{className:"ml-5",children:[L("translation:default.buttons.cancel")," ",L("translation:default.options.draftShipment")]})})}):"",(0,I.jsx)(p.Z,{children:(0,I.jsx)(u.Z,{name:"saveAsDraftBtn",children:(0,I.jsx)(j.Z,{icon:(0,I.jsx)(C,{}),htmlType:"submit",onClick:()=>je("draft"),children:(0,I.jsx)("label",{className:"ml-5",children:L(le?"translation:default.fields.updateDraft":"translation:default.fields.saveAsDraft")})})})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)(u.Z,{name:"saveAsParcelExpressBtn",children:(0,I.jsx)(j.Z,{icon:(0,I.jsx)(F.r,{}),htmlType:"submit",onClick:()=>je("parcel"),children:(0,I.jsx)("label",{className:"ml-5",children:"Parcel Express"})})})})]})})]})})}),le?(0,I.jsx)(f.Z,{className:"mb-15 p-10",children:(0,I.jsxs)(p.Z,{className:"text-center",children:[(0,I.jsx)("label",{className:"ml-5 f-18 text-black",children:L("translation:default.fields.shipmentNumber.label")}),(0,I.jsx)(y.Z,{className:"ml-10",children:null===E||void 0===E||null===(e=E.data)||void 0===e?void 0:e.shipmentNo})]})}):" ",(0,I.jsx)(p.Z,{className:"flex-1 custom-scroll-bar mb-5",children:(0,I.jsx)(qe,{activeKey:l,setActiveKey:a,shipmentKey:le,requestID:ie,shipmentNumber:ae})}),(0,I.jsx)(p.Z,{children:(0,I.jsx)("div",{className:"mb-15",children:(0,I.jsx)(O,{shipmentKey:le,shipmentNumber:ae})})})]}),(0,I.jsx)(Q.Z,{className:"final-shipment-box",open:i,title:L("translation:purchase-order-view.createShipmentExport"),okText:L("translation:purchase-order-view.createShipmentExport"),cancelText:L("translation:default.buttons.close"),onClose:()=>n(!i),onCancel:()=>n(!i),onOk:()=>{X.submit()},children:(0,I.jsx)(u.Z,{form:X,name:"createFinalShipment",children:(0,I.jsx)(m.Z,{children:(0,I.jsx)(p.Z,{children:(0,I.jsx)(v.Z,{placeholder:L("translation:purchase-order-view.shipmentConfirmationNumber"),label:L("translation:purchase-order-view.shipmentConfirmationNumber"),margin:"mb-5 ml-5",editMode:!0,rules:[{required:!0,message:L("translation:purchase-order-view.kindlyEnterConfirmationNumber")}],singleLineMode:!0})})})})}),(0,I.jsx)(Q.Z,{title:"Routing Type",open:fe,className:"h-auto",onClose:()=>ge(!1),onCancel:()=>ge(!1),customFooter:(0,I.jsx)(I.Fragment,{}),children:(0,I.jsx)(u.Z,{form:X,name:"saveAsDraftBtn",children:null!==z&&void 0!==z&&null!==(t=z.data)&&void 0!==t&&t.length?(0,I.jsx)(I.Fragment,{children:null===z||void 0===z?void 0:z.data.map(((e,t)=>(0,I.jsx)(Ae,{routingGuide:e,handleSelect:Fe},t)))}):(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(f.Z,{className:"mb-15 py-10 px-15",border:!0,children:(0,I.jsxs)(m.Z,{gutter:15,align:"middle",children:[(0,I.jsx)(p.Z,{flex:1,sm:15,children:(0,I.jsx)(m.Z,{gutter:15,align:"middle",children:(0,I.jsx)(p.Z,{sm:24,children:(0,I.jsx)(g.Z,{children:"No matching Routing Guide lanes were found. Do you still want to continue creating the shipment? Transportation Provider and Cargo Type won't be defaulted."})})})}),(0,I.jsx)(p.Z,{sm:9,children:(0,I.jsx)(y.Z,{onClick:()=>Fe({}),children:L("translation:purchase-order-view.clickToContinueShipment")})})]})})})})}),(0,I.jsx)(q.Z,{open:xe,onClose:()=>ye(!1),onOk:()=>{var e,t;return te("./../../parcel-express/".concat(null===A||void 0===A||null===(e=A.data)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.shipmentKey))},onCancel:()=>te("./../../purchase-order-management/shipment-search"),description:"Do you want to process this shipment as a Parcel Shipment?",title:"parcel Express",okText:"Yes"})]})}}}]);
//# sourceMappingURL=3760.21eac184.chunk.js.map